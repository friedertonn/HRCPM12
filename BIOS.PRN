	MACRO-80 3.44	09-Dec-81	PAGE	1


                                ; ***********************************************************
                                ; *                                                         *
                                ; *  HRCPM12-BIOS fuer den AC 1     Version vom 31.05.2022  *
                                ; *                                                         *
                                ; *  alle Referenzen (hoffentlich) aufgeloest    BIOS123    *
                                ; *                                                         *
                                ; ***********************************************************
                                ;
                                ;
                                ;       BIOS123
                                ;
                                ;
                                ;
                                        IF1
                                        .PRINTX 'PASS 1'
                                        ENDIF
                                ;
                                        IF2
                                        .PRINTX 'PASS 2'
                                        ENDIF
                                ;
                                        .CREF
                                        .Z80
                                ;
                                        .PHASE 0E600H
                                ;
                                ;
                                ; Definitionen fuer die Anpassung von HRCPM an verschiedene Hardware
  0001                          RD512   EQU  1            ;0 --> RAMDisk 1024K   1 --> RAMDisk 512K
                                ;
  07EE                          OUTHEX  EQU  07EEH
  07F1                          OUTHL   EQU  07F1H
  01A5                          RSA     EQU  01A5H        ; CPU-Register nach RSA - nicht MO11 !
  0272                          MBEEP   EQU  0272H        ; MO-UP "akustisches Signal"
  05CE                          REGIST  EQU  05CEH        ; Registeranzeige - nicht MO11!
  0B32                          KLOAD   EQU  0B32H        ; Load From Kassette - Nicht MO11!!
  0DF9                          MV24A   EQU  0DF9H        ; MO-UP V24-Out
                                ;
                                ;
  1800                          CUPOS   EQU  1800H
  1818                          BREAK   EQU  1818H        ; NMI Sprungziel
  181F                          CBWSB   EQU  181FH        ; Merkzelle fuer das Farbbyte im Monitor-RAM 
                                ;                         ; 0=kein Color-BWS, sonst der eingestellte Farbwert
  185B                          ARG1    EQU  185BH
  185D                          ARG2    EQU  185DH
                                ;
                                ;
  0000                          WARMBT  EQU  0000H        ; WBOOT der Grundseite.
  0005                          BDOSF   EQU  0005H        ; BDOS-Aufruf + TPA-MAX
  0038                          RST38   EQU  0038H        ; CP/M-Break
  0066                          NMI     EQU  0066H
                                ;
                                ;
  0003                          IOBYTE  EQU  0003H
  0004                          LWBYTE  EQU  0004H        ; LW (Bit0-3) + USER Nr.(Bit4-7)
                                ;
  FFD0                          ZEIPUF  EQU  0FFD0H       ; 1 + 32 Byte Puffer f. ?Tastatur
                                ;
                                ;
  D806                          BDOS    EQU  0D806H       ; BDOS-EinsprungAdresse
  E603                          WBOOTB  EQU  0E603H       ; BIOS-Eisprung WBOOT
                                ;
	MACRO-80 3.44	09-Dec-81	PAGE	1-1


                                ;
  B000                          HPRDSK  EQU  0B000H       ;Hilfsprogramm: Format RAM-Disk
  D000                          EQUCCP  EQU  0D000H       ;Start CCP
                                ;
  00E5                          PE5     EQU  0E5H         ;RAM-Disk Extended-Adresse
  00E6                          PE6     EQU  0E6H         ;RAM-Disk H-Adresse
  00E7                          PE7     EQU  0E7H         ;RAM-Disk L-Adresse
  00F0                          PF0     EQU  0F0H         ;BWS-CPLD Adresse
                                ;
  0040                          CFDC    EQU  40H          ;Hauptstatusregister FDC
  0041                          DFDC    EQU  41H          ;Datenport FDC
  0043                          WAIT    EQU  43H          ;IO-Adr. /WAIT Monoflop
  0045                          LATCH   EQU  45H          ;IO-Adr. Latch 74LS175
                                ;
  000F                          CUZEI   EQU  0FH          ; KursorSymbol
                                ;
                                ;============================================================================
                                ;
  E600    C3 E843                       JP   BOOT
  E603    C3 E8D6                       JP   WBOOT
  E606    C3 E9FD                       JP   CONST
  E609    C3 EA05                       JP   CONIN
  E60C    C3 EA82                       JP   CONOUT
  E60F    C3 EA59                       JP   LIST
  E612    C3 EA75                       JP   PUNCH
  E615    C3 EA05                       JP   CONIN        ;eigentlich JP READER
  E618    C3 EDA6                       JP   HOME
  E61B    C3 ED87                       JP   SELDSK
  E61E    C3 EDA9                       JP   SETTRK
  E621    C3 EDAE                       JP   SETSEC
  E624    C3 EDB3                       JP   SETDMA
  E627    C3 EDC4                       JP   READ
  E62A    C3 EDC9                       JP   WRITE
  E62D    C3 ED84                       JP   LISTST
  E630    C3 EDB8                       JP   SECTRN
                                ;
  E633    43 38 35 41                   DEFM 'C85AC'      ;fuer PC/BC Progr.
  E637    43                    
  E638    C3 E961                       JP   EXIT         ;User-Kommando EXIT
  E63B    C3 EF0C                       JP   LOAD         ;User-Kommando LOAD
  E63E    C3 0000                       JP   0000H
                                ;
  E641    D000                  CCP:    DEFW 0D000H       ;Start CCP
                                ;
  E643    07                    NDISK:  DEFB 7            ;Anzahl der LW = 7
                                ;
  E644    E646                  DPHX:   DEFW DPHY         ;Zeiger auf den 1. Block?
  E646    E654                  DPHY:   DEFW DPH0         ;DPH von LW A:
  E648    E664                          DEFW DPH1         ;DPH von LW B:
  E64A    E674                          DEFW DPH2         ;DPH von LW C:
  E64C    E684                          DEFW DPH3         ;DPH von LW D:
  E64E    E694                          DEFW DPH4         ;DPH von LW E:
  E650    E6A4                          DEFW DPH5         ;DPH von LW F:
  E652    E6B4                          DEFW DPH6         ;DPH von LW G:
                                ;
  E654    0000                  DPH0:   DEFW 0            ;RAM-Disk A:
  E656    0000                          DEFW 0
  E658    0000                          DEFW 0
  E65A    0000                          DEFW 0
  E65C    F7AB                          DEFW DIRBF
  E65E    E6C6                          DEFW DPB0
  E660    FCB9                          DEFW CHK00
	MACRO-80 3.44	09-Dec-81	PAGE	1-2


  E662    FD19                          DEFW ALL00
                                ;
  E664    0000                  DPH1:   DEFW 0            ;Floppy B:
  E666    0000                          DEFW 0
  E668    0000                          DEFW 0
  E66A    0000                          DEFW 0
  E66C    F7AB                          DEFW DIRBF
  E66E    E6D7                          DEFW DPB1
  E670    FCB9                          DEFW CHK00
  E672    F82B                          DEFW ALL01
                                ;
  E674    0000                  DPH2:   DEFW 0            ;GIDE C:
  E676    0000                          DEFW 0
  E678    0000                          DEFW 0
  E67A    0000                          DEFW 0
  E67C    F7AB                          DEFW DIRBF
  E67E    E6F3                          DEFW DPB2
  E680    FCD9                          DEFW CHK02
  E682    F85D                          DEFW ALL02
                                ;
  E684    0000                  DPH3:   DEFW 0            ;GIDE D:
  E686    0000                          DEFW 0
  E688    0000                          DEFW 0
  E68A    0000                          DEFW 0
  E68C    F7AB                          DEFW DIRBF
  E68E    E70F                          DEFW DPB3
  E690    FCD9                          DEFW CHK02
  E692    FA55                          DEFW ALL03
                                ;
  E694    0000                  DPH4:   DEFW 0            ;GIDE E:
  E696    0000                          DEFW 0
  E698    0000                          DEFW 0
  E69A    0000                          DEFW 0
  E69C    F7AB                          DEFW DIRBF
  E69E    E72B                          DEFW DPB4
  E6A0    FCD9                          DEFW CHK02
  E6A2    FB55                          DEFW ALL04
                                ;
  E6A4    0000                  DPH5:   DEFW 0            ;Floppy F:
  E6A6    0000                          DEFW 0
  E6A8    0000                          DEFW 0
  E6AA    0000                          DEFW 0
  E6AC    F7AB                          DEFW DIRBF
  E6AE    E747                          DEFW DPB5
  E6B0    FCD9                          DEFW CHK02
  E6B2    FC55                          DEFW ALL05
                                ;
  E6B4    0000                  DPH6:   DEFW 0            ;Floppy G:
  E6B6    0000                          DEFW 0
  E6B8    0000                          DEFW 0
  E6BA    0000                          DEFW 0
  E6BC    F7AB                          DEFW DIRBF
  E6BE    E763                          DEFW DPB6
  E6C0    FCF9                          DEFW CHK06
  E6C2    FC87                          DEFW ALL06
                                ;
                                ; https://hc-ddr.hucki.net/wiki/doku.php/cpm/write_a_bios/teil_1
                                ;
  E6C4    EDF0                          DEFW LEDF1        ;???
                                ;
  E6C6    0080                  DPB0:   DEFW 128          ;128 Sectoren/Track (Rec/Trk) = 16k/Trk
  E6C8    04                            DEFB 4            ;Blockgroesse = 2 Kbyte
	MACRO-80 3.44	09-Dec-81	PAGE	1-3


  E6C9    0F                            DEFB 15
                                IFDEF RD512               ;RAM-Disk 512 KByte
  E6CA    01                            DEFB 1            ;8Bit Blockadressen im FCB/DIR, da weniger als 255 Bloecke (248)
  E6CB    00F7                          DEFW 247          ;248 * 2 Kbyte-Bloecke  -> 512k-16k(System)=496k(CP/M) ( - 2k(DIR) -> 494k (NETTO f. Daten))
                                ELSE                      ;RAM-Disk 1024 KByte
                                        DEFB 0            ;16Bit Blockadressen im FCB/DIR, da mehr als 255 Bloecke
                                        DEFW 503          ;503 * 2 Kbyte-Bloecke  -> 1024k-16k(System)=1008k(CP/M) ( - 2k(DIR) -> 1006k (NETTO f. Daten))
                                ENDIF
  E6CD    003F                          DEFW 63           ;64 DIR - Eintaege
  E6CF    0080                          DEFW 080H         ;1 DIR-Block
  E6D1    0000                          DEFW 0            ;weil nichtwechselbares Medium
  E6D3    0001                          DEFW 1            ;16 Kbyte System / Track-Offset
                                ;
  E6D5    EF2C                          DEFW LF019        ;???
                                ;
  E6D7    0050                  DPB1:   DEFW 80           ;80 Sectoren/Track
  E6D9    04                            DEFB 4            ;Blockgroesse = 2 Kbyte
  E6DA    0F                            DEFB 15
  E6DB    00                            DEFB 0
  E6DC    0185                          DEFW 389          ;390 * 2 Kbyte - Bloecke
  E6DE    007F                          DEFW 127          ;128 DIR - Eintraege
  E6E0    00C0                          DEFW 0C0H         ;2 DIR-Bloecke
  E6E2    0020                          DEFW 32
  E6E4    0002                          DEFW 2            ;20 Kbyte System
                                ;
  E6E6    03 07 05 25                   DEFB 3,7,5,25H
  E6EA    50 00 43 FF                   DEFB 50H,0,43H,0FFH
  E6EE    E1 33 FF                      DEFB 0E1H,33H,0FFH
                                ;
  E6F1    EF28                          DEFW LF015        ;???
                                ;
  E6F3    0800                  DPB2:   DEFW 0800H        ;2048 Records/Track = 256k/Trk
  E6F5    05                            DEFB 5
  E6F6    1F                            DEFB 1FH          ;4k Bloecke
  E6F7    01                            DEFB 1            ;16Bit Blockadressen im FCB/DIR
  E6F8    0FBF                          DEFW 0FBFH        ;4032 * 4k-Bloecke = 16128k
  E6FA    07FF                          DEFW 07FFH        ;2048 DIR-Eintraege
  E6FC    FFFF                          DEFW 0FFFFH       ;16 DIR-Bloecke
  E6FE    0000                          DEFW 0            ;weil nichtwechselbares Medium
  E700    0001                          DEFW 1            ;1 Trk = 256k System
                                ;
  E702    02 03 A0                      DEFB 2,3,0A0H     ;???
  E705    000A                          DEFW 000AH        ;10 = 1. Zylinder-Nr. phys. LW, wo BDOS-LW beginnt
  E707    0040                          DEFW 0040H        ;64 Zyl. f. 16 MB LW-Groesse
  E709    03D8                          DEFW 03D8H        ;984 Zylinder HDD
  E70B    10                            DEFB 10H          ;16 Koepfe HDD
  E70C    20                            DEFB 20H          ;32 Sektoren/Spur HDD
                                ;
  E70D    EF28                          DEFW LF015        ;???
                                ;
  E70F    0800                  DPB3:   DEFW 0800H        ;2048 Records/Track = 256k/Trk
  E711    06                            DEFB 6
  E712    3F                            DEFB 3FH          ;8k Bloecke
  E713    03                            DEFB 3            ;16Bit Blockadressen im FCB/DIR
  E714    07FF                          DEFW 07FFH        ;2048 * 8k-Bloecke = 16384k = 16M
  E716    0FFF                          DEFW 0FFFH        ;4096 DIR-Eintraege
  E718    FFFF                          DEFW 0FFFFH       ;16 DIR-Bloecke
  E71A    0000                          DEFW 0            ;weil nichtwechselbares Medium
  E71C    0000                          DEFW 0            ;kein System-Track
                                ;
  E71E    02 03 A0                      DEFB 2,3,0A0H     ;???
  E721    0096                          DEFW 0096H        ;150 = 1. Zylinder-Nr. phys. LW, wo BDOS-LW beginnt
	MACRO-80 3.44	09-Dec-81	PAGE	1-4


  E723    0040                          DEFW 0040H        ;64 Zyl. f. 16 MB LW-Groesse
  E725    03D8                          DEFW 03D8H        ;984 Zylinder HDD
  E727    10                            DEFB 10H          ;16 Koepfe HDD
  E728    20                            DEFB 20H          ;32 Sektoren/Spur HDD
                                ;
  E729    EF28                          DEFW LF015        ;???
                                ;
  E72B    0800                  DPB4:   DEFW 0800H        ;2048 Records/Track = 256k/Trk
  E72D    06                            DEFB 6
  E72E    3F                            DEFB 3FH          ;8k Bloecke
  E72F    03                            DEFB 3            ;16Bit Blockadressen im FCB/DIR
  E730    07FF                          DEFW 07FFH        ;2048 * 8k-Bloecke = 16384k = 16M
  E732    0FFF                          DEFW 0FFFH        ;4096 DIR-Eintraege
  E734    FFFF                          DEFW 0FFFFH       ;16 DIR-Bloecke
  E736    0000                          DEFW 0            ;weil nichtwechselbares Medium
  E738    0000                          DEFW 0            ;kein System-Track
                                ;
  E73A    02 03 A0                      DEFB 2,3,0A0H     ;???
  E73D    012C                          DEFW 012CH        ;300 = 1. Zylinder-Nr. phys. LW, wo BDOS-LW beginnt
  E73F    0040                          DEFW 0040H        ;64 Zyl. f. 16 MB LW-Groesse
  E741    03D8                          DEFW 03D8H        ;984 Zylinder HDD
  E743    10                            DEFB 10H          ;16 Koepfe HDD
  E744    20                            DEFB 20H          ;32 Sektoren/Spur HDD
                                ;
  E745    EF2C                          DEFW LF019        ;???
                                ;
  E747    0040                  DPB5:   DEFW 64           ;64 Sectoren/Track
  E749    04                            DEFB 4            ;Blockgroesse = 2 Kbyte
  E74A    0F                            DEFB 15
  E74B    00                            DEFB 0
  E74C    013F                          DEFW 319          ;320 * 2 Kbyte - Bloecke
  E74E    007F                          DEFW 127          ;128 DIR - Eintraege
  E750    00C0                          DEFW 0C0H         ;2 DIR-Bloecke
  E752    0020                          DEFW 32
  E754    0000                          DEFW 0            ;kein System-Track
                                ;
  E756    01 01 10 14                   DEFB 1,1,10H,14H
  E75A    50 00 43 FF                   DEFB 50H,0,43H,0FFH
  E75E    E1 33 FF                      DEFB 0E1H,33H,0FFH
                                ;
  E761    EF2C                          DEFW LF019        ;???
                                ;
  E763    0050                  DPB6:   DEFW 80           ;80 Sectoren/Track
  E765    04                            DEFB 4            ;Blockgroesse = 2 Kbyte
  E766    0F                            DEFB 15
  E767    00                            DEFB 0
  E768    018F                          DEFW 399          ;400 * 2 Kbyte - Bloecke
  E76A    007F                          DEFW 127          ;128 DIR - Eintraege
  E76C    00C0                          DEFW 0C0H         ;2 DIR-Bloecke
  E76E    0020                          DEFW 32
  E770    0000                          DEFW 0            ;kein System-Track
                                ;
  E772    03 07 05 25                   DEFB 3,7,5,25H
  E776    50 01 43 FF                   DEFB 50H,1,43H,0FFH
  E77A    E1 33 FF                      DEFB 0E1H,33H,0FFH
                                ;
  E77D    0C                    TXT01:  DEFB 0CH
  E77E    48 52 43 50                   DEFM "HRCPM AC1 V1.2 CPA "
  E782    4D 20 41 43           
  E786    31 20 56 31           
  E78A    2E 32 20 43           
  E78E    50 41 20              
	MACRO-80 3.44	09-Dec-81	PAGE	1-5


  E791    32 34 2E 30                   DEFM "24.08.86 FA-MODE "
  E795    38 2E 38 36           
  E799    20 46 41 2D           
  E79D    4D 4F 44 45           
  E7A1    20                    
  E7A2    43 6F 6E 49                   DEFM "ConIn INT"
  E7A6    6E 20 49 4E           
  E7AA    54                    
  E7AB    0F                            DEFB 0FH
  E7AC    20 76 2E 20                   DEFM " v. 03.12.11  B123"
  E7B0    30 33 2E 31           
  E7B4    32 2E 31 31           
  E7B8    20 20 42 31           
  E7BC    32 33                 
  E7BE    0D 0A 0D 0A                   DEFB 0DH,0AH,0DH,0AH
  E7C2    47 49 44 45                   DEFM "GIDE(80H) C0:16MB,"
  E7C6    28 38 30 48           
  E7CA    29 20 43 30           
  E7CE    3A 31 36 4D           
  E7D2    42 2C                 
  E7D4    20 20 44 30                   DEFM "  D0: 16MB  E0: 16MB"
  E7D8    3A 20 31 36           
  E7DC    4D 42 20 20           
  E7E0    45 30 3A 20           
  E7E4    31 36 4D 42           
  E7E8    0D 0A                         DEFB 0DH,0AH
  E7EA    46 44 43 20                   DEFM "FDC (45H) B0:5*1024"   ;B0 --> Floppy-Drive 0,
  E7EE    28 34 35 48           
  E7F2    29 20 42 30           
  E7F6    3A 35 2A 31           
  E7FA    30 32 34              
  E7FD    20 46 30 3A                   DEFM " F0:16*256 G1:5*1024"  ;F0 --> Floppy-Drive 0, G1 --> Floppy-Drive 1
  E801    31 36 2A 32           
  E805    35 36 20 47           
  E809    31 3A 35 2A           
  E80D    31 30 32 34           
  E811    0D 0A 0D 0A                   DEFB 0DH,0AH,0DH,0AH
  E815    52 46 4C 20                   DEFM "RFL Praeci.Port E0H"
  E819    50 72 61 65           
  E81D    63 69 2E 50           
  E821    6F 72 74 20           
  E825    45 30 48              
                                IFDEF RD512
  E828    20 41 3A 20                   DEFM " A: 512k --> "
  E82C    35 31 32 6B           
  E830    20 2D 2D 3E           
  E834    20                    
                                ELSE
                                        DEFM " A: 1024k --> "
                                ENDIF
  E835    46 6F 72 6D                   DEFM "Format A:(J)?"
  E839    61 74 20 41           
  E83D    3A 28 4A 29           
  E841    3F                    
  E842    00                            DEFB 0
                                ;
                                ;******************************   BOOT   *******************************
                                ;
  E843    F3                    BOOT:   DI
  E844    31 F34D                       LD   SP,CPMSTK
  E847    AF                            XOR  A
  E848    32 F386                       LD   (LATPU),A    ;FDC-Latch zuruecksetzen
	MACRO-80 3.44	09-Dec-81	PAGE	1-6


  E84B    3E 82                         LD   A,82H        ;Cursor einschalten
  E84D    32 F35C                       LD   (CUFLAG),A
  E850    3E 20                         LD   A,20H        ;alternierendes Cursor-Zeichen
  E852    32 F35D                       LD   (CUALT),A
  E855    CD ED51                       CALL BWSINI
  E858    DB 05                         IN   A,(P05)
  E85A    CB 9F                         RES  3,A          ; BildInvers (PIO1B) Bit3 aus
  E85C    D3 05                         OUT  (P05),A
  E85E    2A 1818                       LD   HL,(BREAK)   ; Sprungtabelle NMI MONOTOR
  E861    22 F36A                       LD   (OLDNMI),HL  ; sichern
  E864    21 E603                       LD   HL,WBOOTB    ; CP/M-Warmstart-Einsprungadresse
  E867    22 1818                       LD   (BREAK),HL
  E86A    CD E956                       CALL CPMMOD
  E86D    AF                            XOR  A
  E86E    32 F3A6                       LD   (DF51A),A
  E871    32 0003                       LD   (IOBYTE),A
  E874    32 0004                       LD   (LWBYTE),A
  E877    32 FFD0                       LD   (ZEIPUF),A
  E87A    CD E92C                       CALL BOOT1
                                ;
  E87D    3E 03                         LD   A,03H        ;CTC init. + Interrupt abgeschaltet
  E87F    D3 00                         OUT  (P00),A
  E881    D3 01                         OUT  (P01),A
  E883    D3 02                         OUT  (P02),A
  E885    D3 03                         OUT  (P03),A
  E887    3E FF                         LD   A,0FFH       ;HWT vom Interruptvektor 0FF80h ff.
  E889    ED 47                         LD   I,A
  E88B    ED 5E                         IM   2            ;Interrupt freigeben
  E88D    21 F218                       LD   HL,INTEND    ;Adresse Einsprungpunkt fuer nicht verwendete Interrupts
  E890    22 FF80                       LD   (DFF80),HL   ;Prog. Einsprung IV fuer CTC-Kanal 0
  E893    22 FF82                       LD   (DFF82),HL   ;Prog. Einsprung IV fuer CTC-Kanal 1
  E896    22 FF84                       LD   (DFF84),HL   ;Prog. Einsprung IV fuer CTC-Kanal 2
  E899    21 F1FD                       LD   HL,ISRCTC    ;Einsprungpunkt CTC-Interrupt - Nachlauf Floppy-LW
  E89C    22 FF86                       LD   (DFF86),HL   ;Prog. Einsprung IV fuer CTC-Kanal 3
  E89F    3E 80                         LD   A,80H
  E8A1    D3 00                         OUT  (P00),A      ;CTC-Interruptadresse NWT (= 80h) eintragen
  E8A3    3E FF                         LD   A,0FFH
  E8A5    32 F385                       LD   (CTCCNT),A   ;Init. CTC-Counter = 255 --> Zusatzzaehler fuer CTC-Interrupt
  E8A8    3E A7                         LD   A,0A7H
  E8AA    D3 03                         OUT  (P03),A      ;Programmierung der CTC K3 als Zeitgeber mit Interrupt, Vorteiler 256
  E8AC    AF                            XOR  A
  E8AD    D3 03                         OUT  (P03),A      ;Programmierung der CTC K3 - Hauptteiler = 256
                                                          ;d.h. bei 2 MHz CPU-Takt wird alle 33ms ein CTC-Interrupt ausgeloest
                                ;
  E8AF    21 E985                       LD   HL,ISRTAS    ;Einsprungpunkt PIO-Interrupt - Tastaturpuffer
  E8B2    22 FF88                       LD   (DFF88),HL   ;auf 0FF88h eintragen
  E8B5    21 E9D8                       LD   HL,ISRPA     ;Einsprungpunkt PIO-Interrupt - auf dem Controlkanal !?! - habe ich nicht begriffen
  E8B8    22 FF8A                       LD   (DFF8A),HL   ;auf 0FF8Ah eintragen
  E8BB    01 0506                       LD   BC,0506H     ;5 Bytes auf Controlkanal PIO1 A
  E8BE    21 E9E6                       LD   HL,PIO1TAB
  E8C1    ED B3                         OTIR              ;PIO1_A Init.
                                ;
  E8C3    21 E77D                       LD   HL,TXT01     ;Begruessungstext
  E8C6    CD E9ED                       CALL OUTTXT
  E8C9    FB                            EI
  E8CA    CD EA05                       CALL CONIN
  E8CD    CB AF                         RES  5,A          ;Grossbuchstaben
  E8CF    FE 4A                         CP   4AH          ;J --> RAM-Disk formatieren
  E8D1    CC EE45                       CALL Z,RDFORM
  E8D4    18 1E                         JR   WBOOT1
                                ;
                                ;*******************************   WBOOT   *****************************
	MACRO-80 3.44	09-Dec-81	PAGE	1-7


                                ;
  E8D6    31 F34D               WBOOT:  LD   SP,CPMSTK
  E8D9    CD E956                       CALL CPMMOD
  E8DC    3A F3A7                       LD   A,(DF51B)
  E8DF    B7                            OR   A
  E8E0    C4 EFE1                       CALL NZ,LF0CE
  E8E3    06 2C                         LD   B,2CH        ;44 Records CCP+BDOS
  E8E5    21 EDC4                       LD   HL,READ
  E8E8    22 EEBA                       LD   (WRCCP2),HL
  E8EB    CD EEA0                       CALL WRCCP        ; wirklich READCCP !
  E8EE    21 EDC9                       LD   HL,WRITE
  E8F1    22 EEBA                       LD   (WRCCP2),HL
                                ;
  E8F4    CD E92C               WBOOT1: CALL BOOT1
  E8F7    3E 01                         LD   A,01H
  E8F9    32 F35C                       LD   (CUFLAG),A
  E8FC    3A F350                       LD   A,(COLO2)
  E8FF    32 F34E                       LD   (COLOR),A     ;Arbeitszelle Farbbyte
  E902    E6 77                         AND  77H           ;Intensivdarstellung maskieren
  E904    32 F34F                       LD   (COLO1),A     ;Arbeitszelle "Normaldarstellung"
  E907    3A 0004                       LD   A,(LWBYTE)
                                ;        AND  1FH           ; warum USER-Bereiche einschraenken? (Bit4-7)
  E90A    4F                            LD   C,A
  E90B    CD ED87                       CALL SELDSK
  E90E    2A E641                       LD   HL,(CCP)
  E911    E9                            JP   (HL)         ; JP CCP
                                ;
                                ;
  E912    F5                    CPMERR: PUSH AF           ; CP/M-Fehler - zurueck z. MONITOR
  E913    E5                            PUSH HL
  E914    CD E965                       CALL EXIT1
  E917    DF                            RST  18H
  E918    20 43 50                      DEFM " CP"
  E91B    CD                            DEFB 4DH+80H      ;"M+80H
  E91C    E1                            POP  HL
  E91D    F1                            POP  AF
  E91E    CD 01A5                       CALL RSA
  E921    E1                            POP  HL
  E922    2B                            DEC  HL
  E923    CD 07F1                       CALL OUTHL
  E926    DF                            RST  18H
  E927    8D                            DEFB 0DH+80H
  E928    CD 05CE                       CALL REGIST       ; MONI - Registeranzeige - nicht MO11 !!!
  E92B    FF                            RST  38H          ; zurueck zum MONI
                                ;
                                ;
  E92C    3E C3                 BOOT1:  LD   A,0C3H       ; CP/M "Grundseite" INIT
  E92E    32 0000                       LD   (WARMBT),A
  E931    32 0005                       LD   (BDOSF),A
  E934    32 0038                       LD   (RST38),A
  E937    32 0066                       LD   (NMI),A
  E93A    21 E603                       LD   HL,WBOOTB
  E93D    22 0001                       LD   (WARMBT+1),HL
  E940    22 0067                       LD   (NMI+1),HL
  E943    21 D806                       LD   HL,BDOS
  E946    22 0006                       LD   (BDOSF+1),HL
  E949    21 E912                       LD   HL,CPMERR
  E94C    22 0039                       LD   (RST38+1),HL
  E94F    21 0080                       LD   HL,0080H
  E952    22 F38D                       LD   (DMA),HL
  E955    C9                            RET
                                ;
	MACRO-80 3.44	09-Dec-81	PAGE	1-8


                                ;+++++++++++++++++++++++++++++++++   Ende BOOT / WBOOT   +++++++++++++++++
                                ;
  E956    F5                    CPMMOD: PUSH AF           ; CP/M EIN
  E957    3E 01                         LD   A,01H
  E959    18 02                         JR   MOD1
                                ;
  E95B    F5                    AC1MOD: PUSH AF           ; CP/M AUS (AC1-Mode)
  E95C    AF                            XOR  A
  E95D    D3 1E                 MOD1:   OUT  (P1E),A
  E95F    F1                            POP  AF
  E960    C9                            RET
                                ;
                                ;
                                ;EXIT - Routine
                                ;
  E961    21 0000               EXIT:   LD   HL,0000H     ;Ruecksprungadresse fuer RET
  E964    E5                            PUSH HL
  E965    AF                    EXIT1:  XOR  A
  E966    D3 1E                         OUT  (P1E),A      ;AC1-Mode
  E968    D3 11                         OUT  (P11),A      ;Modul_1 - ggf. EPROMs ausblenden
  E96A    2A F36A                       LD   HL,(OLDNMI)
  E96D    22 1818                       LD   (BREAK),HL   ;alten NMI wiederherstellen
  E970    3E 03                         LD   A,03H
  E972    D3 00                         OUT  (P00),A      ;CTC: Interrupts ausschalten
  E974    D3 01                         OUT  (P01),A
  E976    D3 02                         OUT  (P02),A
  E978    D3 03                         OUT  (P03),A
  E97A    D3 06                         OUT  (P06),A      ;PIO1 A: Interrupt auschalten
  E97C    3E CF                         LD   A,0CFH
  E97E    D3 06                         OUT  (P06),A
  E980    3E FF                         LD   A,0FFH
  E982    D3 06                         OUT  (P06),A
  E984    C9                            RET               ;zurueck zum MONITOR, normal
                                ;
                                ;
                                ;Interrupt-Einsprung fuer die Tastatur
                                ;
  E985    F3                    ISRTAS: DI
  E986    F5                            PUSH AF
  E987    C5                            PUSH BC
  E988    E5                            PUSH HL
  E989    DB 04                         IN   A,(P04)      ;PIO_A abfragen
  E98B    CB 7F                         BIT  7,A          ;Taste gedrueckt?
  E98D    28 43                         JR   Z,ISREND     ;nein, ISR beenden
  E98F    4F                            LD   C,A
                                ;
  E990    06 1E                         LD   B,1EH        ;Tastaturentprellung
  E992    DB 04                 PRELL1: IN   A,(P04)
  E994    B9                            CP   C
  E995    20 3B                         JR   NZ,ISREND
  E997    10 F9                         DJNZ PRELL1       ;30 Durchlaeufe
                                ;
  E999    FE 80                         CP   80H
  E99B    28 35                         JR   Z,ISREND     ;das war eine NULL-Eingabe
  E99D    21 E9EB                       LD   HL,PIOTAB
  E9A0    01 0206                       LD   BC,0206H     ;PIO_A-Control, 2 Bytes
  E9A3    ED B3                         OTIR              ;weitere Interrupts loeschen
                                ;
  E9A5    4F                            LD   C,A
  E9A6    21 FFD0                       LD   HL,ZEIPUF
  E9A9    7E                            LD   A,(HL)       ;Fuellstand Zeichenpuffer
  E9AA    3C                            INC  A
	MACRO-80 3.44	09-Dec-81	PAGE	1-9


  E9AB    FE 1F                         CP   1FH          ;Puffer voll?
  E9AD    28 23                         JR   Z,ISREND
  E9AF    77                            LD   (HL),A       ;Anzahl der Zeichen im Puffer
  E9B0    C5                            PUSH BC
  E9B1    4F                            LD   C,A
  E9B2    09                            ADD  HL,BC        ;HL = Position im Zeichenpuffer
  E9B3    C1                            POP  BC
  E9B4    CB B9                         RES  7,C          ;7. Bit loeschen und
  E9B6    71                            LD   (HL),C       ;Taste in Zeichenpuffer eintragen
                                ;
  E9B7    01 8034                       LD   BC,8034H     ;Initialisierung Tastenpiep
  E9BA    79                    BEEP1:  LD   A,C
  E9BB    3D                    BEEP2:  DEC  A
  E9BC    20 FD                         JR   NZ,BEEP2
  E9BE    DB 05                         IN   A,(P05)      ;PIO_B-Daten
  E9C0    EE 01                         XOR  01H          ;Tastenpiep
  E9C2    D3 05                         OUT  (P05),A
  E9C4    10 F4                         DJNZ BEEP1
  E9C6    E6 FE                         AND  0FEH
  E9C8    D3 05                         OUT  (P05),A
                                ;
  E9CA    01 0200                       LD   BC,0200H     ;Warteschleife - Entprellung
  E9CD    0B                    PRELL2: DEC  BC
  E9CE    78                            LD   A,B
  E9CF    B1                            OR   C
  E9D0    20 FB                         JR   NZ,PRELL2
                                ;
  E9D2    E1                    ISREND: POP  HL
  E9D3    C1                            POP  BC
  E9D4    F1                            POP  AF
  E9D5    FB                            EI
  E9D6    ED 4D                         RETI
                                ;
                                ;
                                ;Interrupt-Einsprung fuer PIO1 Kanal A - auf dem Controlkanal !?! - Neuinitialisierung der PIO
                                ;
  E9D8    F3                    ISRPA:  DI
  E9D9    F5                            PUSH AF
  E9DA    C5                            PUSH BC
  E9DB    E5                            PUSH HL
  E9DC    21 E9E6                       LD   HL,PIO1TAB
  E9DF    01 0506                       LD   BC,0506H      ; 5 Bytes f. PIO_A-Control
  E9E2    ED B3                         OTIR
  E9E4    18 EC                         JR   ISREND
                                ;
  E9E6    88 CF FF B7           PIO1TAB: DEFB 88H,0CFH,0FFH,0B7H,7FH   ;Tabelle PIO1 Port A
  E9EA    7F                    
                                ;
  E9EB    8A 87                 PIOTAB: DEFB 8AH,87H      ;Steuercode zum Loeschen weiterer Interrupts
                                ;
                                ;
  E9ED    C5                    OUTTXT: PUSH BC
  E9EE    F5                            PUSH AF
  E9EF    4E                    TEXT1:  LD   C,(HL)
  E9F0    79                            LD   A,C
  E9F1    B7                            OR   A
  E9F2    28 06                         JR   Z,TEXT2
  E9F4    CD EA82                       CALL CONOUT
  E9F7    23                            INC  HL
  E9F8    18 F5                         JR   TEXT1
  E9FA    F1                    TEXT2:  POP  AF
  E9FB    C1                            POP  BC
	MACRO-80 3.44	09-Dec-81	PAGE	1-10


  E9FC    C9                            RET
                                ;
                                ;Ansprung unklar
                                        ;LEA2A:  XOR  A
                                        ;        RET
                                ;
                                ;************************   CONST   *************************
                                ;
  E9FD    3A FFD0               CONST:  LD   A,(ZEIPUF)
  EA00    B7                            OR   A
  EA01    C8                            RET  Z
  EA02    3E FF                         LD   A,0FFH
  EA04    C9                            RET
                                ;
                                ;***************************   CONIN   ***********************
                                ;
  EA05    F3                    CONIN:  DI
  EA06    ED 73 F364                    LD   (SPCIN),SP
  EA0A    31 F2CE                       LD   SP,CINSP
  EA0D    C5                            PUSH BC
  EA0E    D5                            PUSH DE
  EA0F    E5                            PUSH HL
  EA10    AF                    CON10:  XOR  A
  EA11    F3                            DI
  EA12    2A FFD0                       LD   HL,(ZEIPUF)
  EA15    B5                            OR   L
  EA16    20 19                         JR   NZ,CON12
  EA18    FB                            EI
  EA19    10 F5                         DJNZ CON10
  EA1B    F3                            DI
  EA1C    D3 1E                         OUT  (P1E),A      ; AC1 Mode
  EA1E    2A 1800                       LD   HL,(CUPOS)
  EA21    0C                            INC  C
  EA22    CB 71                         BIT  6,C
  EA24    3A F35D                       LD   A,(CUALT)
  EA27    28 02                         JR   Z,CON11
  EA29    3E 0F                         LD   A,CUZEI
  EA2B    77                    CON11:  LD   (HL),A
  EA2C    CD E956                       CALL CPMMOD       ; CP/M Mode
  EA2F    18 DF                         JR   CON10
  EA31    3D                    CON12:  DEC  A
  EA32    32 FFD0                       LD   (ZEIPUF),A
  EA35    7C                            LD   A,H
  EA36    21 FFD2                       LD   HL,ZEIPUF+2
  EA39    11 FFD1                       LD   DE,ZEIPUF+1
  EA3C    01 001F                       LD   BC,001FH
  EA3F    ED B0                         LDIR
  EA41    CD EA4D                       CALL CON20
  EA44    E1                            POP  HL
  EA45    D1                            POP  DE
  EA46    C1                            POP  BC
  EA47    ED 7B F364                    LD   SP,(SPCIN)
  EA4B    FB                            EI
  EA4C    C9                            RET
                                ;
  EA4D    FE 41                 CON20:  CP   41H
  EA4F    D8                            RET  C
  EA50    D0                            RET  NC
  EA51    FE 5F                         CP   5FH
  EA53    28 01                         JR   Z,CON21
  EA55    C9                            RET
                                ;
	MACRO-80 3.44	09-Dec-81	PAGE	1-11


                                ;Ansprung unklar
                                        ;LEA85:  CP   5EH
                                        ;JR   C,CON21
                                        ;    CP   61H
                                        ;RET  C
                                        ;CP   7EH
                                        ;RET  NC
  EA56    EE 20                 CON21:  XOR  20H
  EA58    C9                            RET
                                ;
                                ;********************   LIST   PUNCH   (READER)   ***********
                                ;
  EA59    F3                    LIST:   DI
  EA5A    CD E95B                       CALL AC1MOD
  EA5D    F5                            PUSH AF      
  EA5E    79                            LD   A,C
  EA5F    FE 0A                         CP   0AH  
  EA61    28 0C                         JR   Z,LEND1  
  EA63    CD 0DF9                       CALL MV24A         ; MONI V24 Ausgabe Akku
  EA66    FE 0D                         CP   0DH     
  EA68    20 05                         JR   NZ,LEND1 
  EA6A    3E 0A                         LD   A,0AH   
  EA6C    CD 0DF9                       CALL MV24A         ; MONI V24 Ausgabe Akku
  EA6F    F1                    LEND1:  POP  AF      
  EA70    CD E956                       CALL CPMMOD
  EA73    FB                            EI
  EA74    C9                            RET
                                ;
                                ;
  EA75    F3                    PUNCH:  DI                 ; Ausgabe C nach V24
  EA76    79                            LD   A,C
  EA77    CD E95B                       CALL AC1MOD
  EA7A    CD 0DF9                       CALL MV24A         ; MONI V24 Ausgabe Akku
  EA7D    CD E956                       CALL CPMMOD
  EA80    FB                            EI
  EA81    C9                            RET
                                ;
                                ;******************************* CONOUT  *********************
                                ;
                                ;       ; Ausgabe eines Zeichens  ,   IN: Zeichen in C
                                ;
  EA82    F3                    CONOUT: DI
  EA83    ED 73 F366                    LD   (SPCOUT),SP     ; Stack bei MON-Aufruf retten
  EA87    31 F2F4                       LD   SP,COUTSP
  EA8A    F5                            PUSH AF
  EA8B    C5                            PUSH BC
  EA8C    D5                            PUSH DE
  EA8D    E5                            PUSH HL
  EA8E    CD E95B                       CALL AC1MOD
  EA91    E5                            PUSH HL
  EA92    2A 1800                       LD   HL,(CUPOS)      ;Cursorposition
  EA95    3A F361                       LD   A,(CHAR)
  EA98    77                            LD   (HL),A          ;altes Zeichen auf Position
  EA99    3A F35E                       LD   A,(STZ00)       ;Durchlauf bei Steuerzeichen?
  EA9C    A7                            AND  A
  EA9D    C2 ECBF                       JP   NZ,KONV10       ;NZ= Steuerzeichen 2. oder 3. Durchlauf
  EAA0    79                            LD   A,C             ;Byte
  EAA1    FE 20                         CP   20H             ;kleinstes Zeichen
  EAA3    38 27                         JR   C,KONVTB
  EAA5    FE 7F                         CP   7FH             ;groesstes Zeichen
  EAA7    30 23                         JR   NC,KONVTB
  EAA9    2A 1800                       LD   HL,(CUPOS)
	MACRO-80 3.44	09-Dec-81	PAGE	1-12


  EAAC    C3 EC15                       JP   CCHAR          ;Ausgabe einzelnes Zeichen
                                ;
  EAAF    2A 1800               KONVT9: LD   HL,(CUPOS)
  EAB2    7E                            LD   A,(HL)
  EAB3    32 F361                       LD   (CHAR),A
  EAB6    3A F35C                       LD   A,(CUFLAG)
  EAB9    FE 01                         CP   01H
  EABB    20 02                         JR   NZ,COEN1
  EABD    36 0F                         LD   (HL),CUZEI
  EABF    CD E956               COEN1:  CALL CPMMOD
  EAC2    E1                            POP  HL
  EAC3    D1                            POP  DE
  EAC4    C1                            POP  BC
  EAC5    F1                            POP  AF
  EAC6    ED 7B F366                    LD   SP,(SPCOUT)
  EACA    FB                            EI
  EACB    C9                            RET
                                ;
                                ;       ; Verzweigung bei Steuerzeichen
                                ;       ; INPUT:  A=Zeichen
                                ;
  EACC    FE 1B                 KONVTB: CP   1BH            ; ESC ?
  EACE    20 07                         JR   NZ,KONVT1
  EAD0    3E 02                         LD   A,02H          ;wenn ja
  EAD2    32 F35E                       LD   (STZ00),A      ;Zeiger auf 2
  EAD5    18 D8                         JR   KONVT9         ;nichts ausgeben
                                ;
  EAD7    2A 1800               KONVT1: LD   HL,(CUPOS)
  EADA    FE 01                         CP   01H            ;^A Cursor home                      
  EADC    28 65                         JR   Z,CHOME                                             
  EADE    FE 07                         CP   07H            ;^G akustisches Signal                                                 
  EAE0    CA EC67                       JP   Z,BEEP                                              
  EAE3    FE 08                         CP   08H            ;^H Cursor links                     
  EAE5    CA EB6B                       JP   Z,CLEFT                                             
  EAE8    FE 0A                         CP   0AH            ;^J Zeilenvorschub                   
  EAEA    CA EB6F                       JP   Z,CLF                                               
  EAED    FE 0C                         CP   0CH            ;^L CLS                              
  EAEF    28 5B                         JR   Z,BCLS                                              
  EAF1    FE 0D                         CP   0DH            ;^M Wagenruecklauf                   
  EAF3    CA EB87                       JP   Z,CCRET                                             
  EAF6    FE 14                         CP   14H            ;^T BS ab Cursor loeschen            
  EAF8    CA EB8E                       JP   Z,CBLOE                                             
  EAFB    FE 15                         CP   15H            ;^U Cursor nach rechts               
  EAFD    CA EBB1                       JP   Z,CRIGH                                             
  EB00    FE 16                         CP   16H            ;^V Zeile ab Cursor loeschen         
  EB02    CA EBB5                       JP   Z,CZLOE                                             
  EB05    FE 18                         CP   18H            ;^X Zeile ab Cursor loeschen + CR    
  EB07    CA EBDC                       JP   Z,CZLCR                                             
  EB0A    FE 1A                         CP   1AH            ;^Z Cursor hoch                      
  EB0C    CA EC05                       JP   Z,CHOCH                                             
  EB0F    47                            LD   B,A            ;Zeichen merken                      
  EB10    3A F34E                       LD   A,(COLOR)                                           
  EB13    A7                            AND  A              ;Test auf Color-BWS                  
  EB14    CA EAAF                       JP   Z,KONVT9       ;Z = monochrom                       
  EB17    78                            LD   A,B                                                 
  EB18    FE 02                         CP   02H            ;^B ??                               
  EB1A    CA ECB0                       JP   Z,CUON
  EB1D    FE 82                         CP   82H
  EB1F    CA ECB0                       JP   Z,CUON
  EB22    FE 03                         CP   03H
  EB24    CA ECB8                       JP   Z,CUOFF
  EB27    FE 83                         CP   83H
	MACRO-80 3.44	09-Dec-81	PAGE	1-13


  EB29    CA ECB8                       JP   Z,CUOFF
  EB2C    FE 84                         CP   84H            ;normale Darstellung
  EB2E    CA EC75                       JP   Z,BNORM
  EB31    FE 85                         CP   85H            ;invers
  EB33    CA EC83                       JP   Z,BINVN
  EB36    FE 86                         CP   86H            ;intensiv - HihgLight
  EB38    CA EC92                       JP   Z,BINTE
  EB3B    FE 87                         CP   87H            ;intensiv + invers
  EB3D    CA EC9F                       JP   Z,BIVIN
  EB40    C3 EAAF                       JP   KONVT9
                                ;
  EB43    21 17FF               CHOME:  LD   HL,17FFH
  EB46    22 1800                       LD   (CUPOS),HL
  EB49    C3 EAAF                       JP   KONVT9
                                ;
  EB4C    3E 20                 BCLS:   LD   A,20H          ;0Ch    Bildschirm loeschen
  EB4E    CD EB78                       CALL BCL1           ;Loeschroutine
  EB51    22 1800                       LD   (CUPOS),HL     ;Cursorposition
  EB54    3A F34E                       LD   A,(COLOR)      ;Farbbyte
  EB57    E6 77                         AND  77H            ;Farb-BWS vorhanden?
  EB59    CA EAAF                       JP   Z,KONVT9       ;Z = nein, dann Ende
  EB5C    CD ED42                       CALL BWSCOL         ;Farbspeicher ein
  EB5F    3A F34E                       LD   A,(COLOR)
  EB62    CD EB78                       CALL BCL1
  EB65    CD ED48                       CALL BWSZEI         ;Farbspeicher aus
  EB68    C3 EAAF                       JP   KONVT9
                                ;
  EB6B    23                    CLEFT:  INC  HL             ;08h     Cursor links
  EB6C    C3 EC09                       JP   CHOLI
                                ;
  EB6F    11 0040               CLF:    LD   DE,0040H       ;0Ah     Zeilenvorschub
  EB72    A7                            AND  A
  EB73    ED 52                         SBC  HL,DE
  EB75    C3 EC26                       JP   SCROL
                                ;
  EB78    21 1000               BCL1:   LD   HL,1000H       ;Anfang BWS
  EB7B    77                            LD   (HL),A
  EB7C    54                            LD   D,H
  EB7D    5D                            LD   E,L
  EB7E    1C                            INC  E
  EB7F    C5                            PUSH BC
  EB80    01 07FF                       LD   BC,07FFH       ;Laenge BWS
  EB83    ED B0                         LDIR
  EB85    C1                            POP  BC
  EB86    C9                            RET
                                ;
  EB87    7D                    CCRET:  LD   A,L            ;0Dh     Wagenruecklauf
  EB88    F6 3F                         OR   3FH
  EB8A    6F                            LD   L,A
  EB8B    C3 EC26                       JP   SCROL
                                ;
  EB8E    E5                    CBLOE:  PUSH HL
  EB8F    3E 0F                         LD   A,CUZEI          ;14h     BS ab Cursor loeschen
  EB91    36 20                 CBLO1:  LD   (HL),20H
  EB93    2B                            DEC  HL
  EB94    BC                            CP   H
  EB95    20 FA                         JR   NZ,CBLO1
  EB97    E1                            POP  HL
  EB98    3A F34E                       LD   A,(COLOR)
  EB9B    47                            LD   B,A
  EB9C    E6 77                         AND  77H
  EB9E    CA EAAF                       JP   Z,KONVT9
	MACRO-80 3.44	09-Dec-81	PAGE	1-14


  EBA1    CD ED42                       CALL BWSCOL          ;Farbspeicher ein
  EBA4    3E 0F                         LD   A,CUZEI
  EBA6    70                    CBLO2:  LD   (HL),B
  EBA7    2B                            DEC  HL
  EBA8    BC                            CP   H
  EBA9    20 FB                         JR   NZ,CBLO2
  EBAB    CD ED48                       CALL BWSZEI          ;Farbspeicher aus
  EBAE    C3 EAAF                       JP   KONVT9
                                ;
  EBB1    2B                    CRIGH:  DEC  HL              ;15h     Cursor nach rechts
  EBB2    C3 EC26                       JP   SCROL
                                ;
  EBB5    E5                    CZLOE:  PUSH HL              ;16h   Zeile ab Cursor loeschen
  EBB6    7D                            LD   A,L
  EBB7    E6 3F                         AND  3FH
  EBB9    47                            LD   B,A
  EBBA    04                            INC  B
  EBBB    36 20                 CZLO1:  LD   (HL),20H
  EBBD    2B                            DEC  HL
  EBBE    10 FB                         DJNZ CZLO1
  EBC0    E1                            POP  HL
  EBC1    3A F34E                       LD   A,(COLOR)
  EBC4    4F                            LD   C,A
  EBC5    E6 77                         AND  77H
  EBC7    CA EAAF                       JP   Z,KONVT9
  EBCA    CD ED42                       CALL BWSCOL          ;Farbspeicher ein
  EBCD    7D                            LD   A,L
  EBCE    E6 3F                         AND  3FH
  EBD0    47                            LD   B,A
  EBD1    04                            INC  B
  EBD2    71                    CZLO2:  LD   (HL),C
  EBD3    2B                            DEC  HL
  EBD4    10 FC                         DJNZ CZLO2
  EBD6    CD ED48                       CALL BWSZEI          ;Farbspeicher aus
  EBD9    C3 EAAF                       JP   KONVT9
                                ;
  EBDC    E5                    CZLCR:  PUSH HL              ;18h   Zeile ab Cursor loeschen + CR
  EBDD    7D                            LD   A,L
  EBDE    F6 3F                         OR   3FH
  EBE0    6F                            LD   L,A
  EBE1    22 1800                       LD   (CUPOS),HL
  EBE4    E5                            PUSH HL
  EBE5    06 40                         LD   B,40H           ;Zeilenlaenge
  EBE7    36 20                 CZLC1:  LD   (HL),20H
  EBE9    2B                            DEC  HL
  EBEA    10 FB                         DJNZ CZLC1
  EBEC    E1                            POP  HL
  EBED    3A F34E                       LD   A,(COLOR)
  EBF0    4F                            LD   C,A
  EBF1    E6 77                         AND  77H
  EBF3    CA EAAF                       JP   Z,KONVT9
  EBF6    CD ED42                       CALL BWSCOL          ;Farbspeicher ein
  EBF9    06 40                         LD   B,40H
  EBFB    71                    CZLC2:  LD   (HL),C
  EBFC    2B                            DEC  HL
  EBFD    10 FC                         DJNZ CZLC2
  EBFF    CD ED48                       CALL BWSZEI          ;Farbspeicher aus
  EC02    C3 EAAF                       JP   KONVT9
                                ;
  EC05    11 0040               CHOCH:  LD   DE,0040H        ;1Ah     Cursor hoch
  EC08    19                            ADD  HL,DE
                                ;
	MACRO-80 3.44	09-Dec-81	PAGE	1-15


  EC09    3E 18                 CHOLI:  LD   A,18H           ;Begrenzung Cursor hoch und links
  EC0B    BC                            CP   H
  EC0C    CA EAAF                       JP   Z,KONVT9
  EC0F    22 1800                       LD   (CUPOS),HL
  EC12    C3 EAAF                       JP   KONVT9
                                ;
  EC15    77                    CCHAR:  LD   (HL),A
  EC16    3A F34E                       LD   A,(COLOR)
  EC19    4F                            LD   C,A
  EC1A    E6 77                         AND  77H
  EC1C    28 07                         JR   Z,CCHA1
  EC1E    CD ED42                       CALL BWSCOL          ;Farbspeicher ein
  EC21    71                            LD   (HL),C
  EC22    CD ED48                       CALL BWSZEI          ;Farbspeicher aus
  EC25    2B                    CCHA1:  DEC  HL
                                ;
  EC26    22 1800               SCROL:  LD   (CUPOS),HL
  EC29    EB                            EX   DE,HL             ;Test ob Scrollen noetig
  EC2A    21 0FFF                       LD   HL,0FFFH
  EC2D    A7                            AND  A
  EC2E    ED 52                         SBC  HL,DE             ;DE = akt. Cursorpos.
  EC30    EB                            EX   DE,HL
  EC31    DA EAAF                       JP   C,KONVT9          ;CY = nicht scrollen
  EC34    3E 20                         LD   A,20H             ;Leerzeichen
  EC36    CD EC50                       CALL SCR11             ;Scrollen
  EC39    3A F34E                       LD   A,(COLOR)
  EC3C    E6 77                         AND  77H
  EC3E    CA EAAF                       JP   Z,KONVT9          ;Z = kein Farbspeicher
  EC41    CD ED42                       CALL BWSCOL            ;Farbspeicher ein
  EC44    3A F34E                       LD   A,(COLOR)         ;Farbbyte
  EC47    CD EC50                       CALL SCR11
  EC4A    CD ED48                       CALL BWSZEI            ;Farbspeicher aus
  EC4D    C3 EAAF                       JP   KONVT9
                                ;
  EC50    21 17BF               SCR11:  LD   HL,17BFH          ;Umladeroutine Scrollen
  EC53    11 17FF                       LD   DE,17FFH
  EC56    01 07C0                       LD   BC,07C0H
  EC59    ED B8                         LDDR
  EC5B    EB                            EX   DE,HL
  EC5C    22 1800                       LD   (CUPOS),HL
  EC5F    23                            INC  HL
  EC60    06 40                         LD   B,40H             ;eine Zeilenlaenge
  EC62    2D                    SCR12:  DEC  L
  EC63    77                            LD   (HL),A            ;Leerzeile schreiben
  EC64    10 FC                         DJNZ SCR12
  EC66    C9                            RET
                                ;
  EC67    F3                    BEEP:   DI
  EC68    CD E95B                       CALL AC1MOD
  EC6B    CD 0272                       CALL MBEEP             ; MONI BEEP
  EC6E    CD E956                       CALL CPMMOD
  EC71    FB                            EI
  EC72    C3 EABF                       JP   COEN1
                                ;
                                ;
  EC75    3A F34F               BNORM:  LD   A,(COLO1)         ;84h    normale Darstellung
  EC78    E6 77                         AND  77H
  EC7A    32 F34E                       LD   (COLOR),A
  EC7D    32 F34F                       LD   (COLO1),A
  EC80    C3 EAAF                       JP   KONVT9
                                ;
  EC83    3A F34F               BINVN:  LD   A,(COLO1)         ;85    invers EIN
	MACRO-80 3.44	09-Dec-81	PAGE	1-16


  EC86    E6 77                         AND  77H
  EC88    0F                            RRCA
  EC89    0F                            RRCA
  EC8A    0F                            RRCA
  EC8B    0F                            RRCA
  EC8C    32 F34E                       LD   (COLOR),A
  EC8F    C3 EAAF                       JP   KONVT9
                                ;
  EC92    3A F34F               BINTE:  LD   A,(COLO1)         ;86h    intensiv EIN
  EC95    E6 77                         AND  77H
  EC97    F6 08                         OR   08H
  EC99    32 F34E                       LD   (COLOR),A
  EC9C    C3 EAAF                       JP   KONVT9
                                ;
  EC9F    3A F34E               BIVIN:  LD   A,(COLOR)         ;87h    intensiv + invers
  ECA2    E6 77                         AND  77H
  ECA4    F6 08                         OR   08H
  ECA6    0F                            RRCA
  ECA7    0F                            RRCA
  ECA8    0F                            RRCA
  ECA9    0F                            RRCA
  ECAA    32 F34E                       LD   (COLOR),A
  ECAD    C3 EAAF                       JP   KONVT9
                                ;
  ECB0    3E 01                 CUON:   LD   A,01H              ;82h   Cursor EIN
  ECB2    32 F35C                       LD   (CUFLAG),A
  ECB5    C3 EAAF                       JP   KONVT9
                                ;
  ECB8    AF                    CUOFF:  XOR  A                  ;83h  Cursor AUS
  ECB9    32 F35C                       LD   (CUFLAG),A
  ECBC    C3 EAAF                       JP   KONVT9
                                ;
                                ; Behandlung ESC-Sequenzen
                                ;
                                ; Input: ESC + 2 Steuerzeichen
                                ; wenn 1. Zeichen > 80h dann Cursorposition
                                ; sonst Auswertung Farbe / Grafikzeichen
                                ; (stz00) = Zaehler fuer Zeichenanzahl
                                ;
  ECBF    3A F35E               KONV10: LD   A,(STZ00)
  ECC2    FE 02                         CP   02H             ;2 = 1. Steuerzeichen (Zeile)
  ECC4    20 0C                         JR   NZ,KONV20       ;sonst 3. Durchlauf (Spalte)
  ECC6    79                            LD   A,C
  ECC7    32 F35F                       LD   (STZ01),A       ;erstes Zeichen merken
  ECCA    3E 01                         LD   A,01H           ;Zeiger fuer 3. Durchlauf
  ECCC    32 F35E                       LD   (STZ00),A
  ECCF    C3 EAAF                       JP   KONVT9          ;nichts ausgeben
                                ;
                                ; Verzweigung Cursorposition / weitere Funktionen
                                ;
  ECD2    79                    KONV20: LD   A,C
  ECD3    32 F360                       LD   (STZ02),A       ;zweites Zeichen merken
  ECD6    AF                            XOR  A
  ECD7    32 F35E                       LD   (STZ00),A       ;Durchlaufzaehler ruecksetzen
  ECDA    21 F35F                       LD   HL,STZ01
  ECDD    7E                            LD   A,(HL)
  ECDE    CB 7F                         BIT  7,A             ;welche Funktion? NZ = Cursor
  ECE0    28 2F                         JR   Z,KONV22        ;Z = weitere Funktionen
                                
                                ; Berechnung direkte Cursorposition
                                ; OUT:    HL = BWS-Adresse
                                ;
	MACRO-80 3.44	09-Dec-81	PAGE	1-17


  ECE2    F5                            PUSH AF
  ECE3    79                            LD   A,C
  ECE4    E6 3F                         AND  3FH             ;max. Spaltenzahl
  ECE6    6F                            LD   L,A
  ECE7    F1                            POP  AF
  ECE8    E6 1F                         AND  1FH             ;max. Zeilenzahl
  ECEA    16 00                         LD   D,00H
  ECEC    62                            LD   H,D
  ECED    5F                            LD   E,A
  ECEE    06 06                         LD   B,06H
  ECF0    CB 23                 KONV21: SLA  E
  ECF2    CB 12                         RL   D
  ECF4    10 FA                         DJNZ KONV21
  ECF6    19                            ADD  HL,DE
  ECF7    EB                            EX   DE,HL
  ECF8    21 17FF                       LD   HL,17FFH         ;Ende BWS-RAM
  ECFB    A7                            AND  A
  ECFC    ED 52                         SBC  HL,DE
                                ;
                                ; Cursor direkt positionieren
                                ; IN:    HL = Adresse Cursor
                                ;
  ECFE    E5                            PUSH HL
  ECFF    2A 1800                       LD   HL,(CUPOS)	      ;alte Position
  ED02    3A F361                       LD   A,(CHAR)	      ;Zeichen holen
  ED05    77                            LD   (HL),A	      ;auf BS schreiben
  ED06    E1                            POP  HL
  ED07    22 1800                       LD   (CUPOS),HL       ;neue Position setzen
  ED0A    7E                            LD   A,(HL)           ;neues Zeichen holen
  ED0B    32 F361                       LD   (CHAR),A         ;und merken
  ED0E    C3 EAAF                       JP   KONVT9
                                ;
                                ; Auswertung weiterer ESC-Funktionen
                                ; IN:      A = 1. Steuerzeichen
                                ;
                                ; Ausgabe Grafikzeichen aus AC1-ZG ( > 80h )
                                ;
  ED11    FE 5F                 KONV22: CP   5FH               ;Grafikzeichen?
  ED13    20 08                         JR   NZ,KONV24         ;NZ = nein
  ED15    23                            INC  HL
  ED16    7E                            LD   A,(HL)            ;2. Zeichen holen
  ED17    2A 1800                       LD   HL,(CUPOS)
  ED1A    C3 EC15                       JP   CCHAR             ;Zeichen ausgeben
                                ;
                                ; Einstellen der Farbe (nur Color-BWS)
                                ;
  ED1D    FE 5D                 KONV24: CP   5DH               ;Farbe?
  ED1F    C2 EAAF                       JP   NZ,KONVT9         ;NZ = nein
  ED22    3A F34E                       LD   A,(COLOR)         ;Color-BWS?
  ED25    A7                            AND  A
  ED26    CA EAAF                       JP   Z,KONVT9          ;Z = nein
  ED29    23                            INC  HL
  ED2A    7E                            LD   A,(HL)            ;2. Zeichen holen
  ED2B    E6 77                         AND  77H               ;intensiv maskieren
  ED2D    47                            LD   B,A
  ED2E    0F                            RRCA
  ED2F    0F                            RRCA
  ED30    0F                            RRCA
  ED31    0F                            RRCA
  ED32    B8                            CP   B                 ;Zeichen- und HG-Farbe gleich?
  ED33    CA EAAF                       JP   Z,KONVT9          ;Z = Ja, dann ignorieren
  ED36    78                            LD   A,B
	MACRO-80 3.44	09-Dec-81	PAGE	1-18


  ED37    32 F34E                       LD   (COLOR),A         ;Farbe setzen
  ED3A    E6 77                         AND  77H               ;intensiv maskieren
  ED3C    32 F34F                       LD   (COLO1),A         ;Backup
  ED3F    C3 EAAF                       JP   KONVT9
                                ;
  ED42    DB F0                 BWSCOL: IN   A,(PF0)           ; bwsport
  ED44    CB D7                         SET  2,A               ;Farbspeicher ein
  ED46    18 04                         JR   BWSZ1
                                ;
  ED48    DB F0                 BWSZEI: IN   A,(PF0)           ; bwsport
  ED4A    CB 97                         RES  2,A               ;Farbspeicher aus
  ED4C    E6 07                 BWSZ1:  AND  07H
  ED4E    D3 F0                         OUT  (PF0),A
  ED50    C9                            RET
                                ;
  ED51    AF                    BWSINI: XOR  A            ;Farbbyte auf Monochrom setzen
  ED52    32 F350                       LD   (COLO2),A    ;in die Merkzelle im BIOS schreiben
  ED55    0E F0                         LD   C,0F0H       ;I/O-Adresse COLOR-BWS
  ED57    ED 40                         IN   B,(C)        ;Konfigbyte COLOR-BWS lesen
  ED59    04                            INC  B            ;fuer COLOR-BWS muss B<255 sein
  ED5A    C8                            RET  Z            ;kein COLOR-BWS vorhanden --> Ende
                                		;hier wird die Routine verlassen, wenn kein CPLD vorh. ist
  ED5B    3A 181F                       LD   A,(CBWSB)    ;Farbbyte im AC1-Monitor
  ED5E    05                            DEC  B            ;Konfigbyte COLOR-BWS: Farb-RAM aus
  ED5F    50                            LD   D,B
  ED60    CB D2                         SET  2,D          ;Konfigbyte COLOR-BWS: Farb-RAM ein
  ED62    21 1000                       LD   HL,1000H
  ED65    5E                            LD   E,(HL)       ;Zeichen aus 1000h
  ED66    ED 51                         OUT  (C),D        ;Farb-RAM einschalten
  ED68    77                            LD   (HL),A       ;Farbe auf 1000h setzen
  ED69    BE                            CP   (HL)         ;ist Farb-RAM gesteckt?
  ED6A    ED 41                         OUT  (C),B        ;Farb-RAM ausschalten
  ED6C    73                            LD   (HL),E       ;Zeichen auf 1000h zurueckschreiben
  ED6D    C0                            RET  NZ           ;Farbe hat nicht geklappt --> Ende
                                		;hier wird die Routine verlassen, wenn kein Farb-RAM steckt
  ED6E    ED 51                         OUT  (C),D        ;Farb-RAM einschalten
  ED70    C5                            PUSH BC
  ED71    11 1001                       LD   DE,1001H
  ED74    01 07FF                       LD   BC,07FFH
  ED77    ED B0                         LDIR              ;Farb-RAM initialisieren
  ED79    7E                            LD   A,(HL)       ;Farbe aus 17FEh ruecklesen
  ED7A    C1                            POP  BC
  ED7B    ED 41                         OUT  (C),B        ;Farb-RAM ausschalten
  ED7D    32 F34E                       LD   (COLOR),A    ;Arbeitszelle Farbbyte im BIOS
  ED80    32 F350                       LD   (COLO2),A    ;Merkzelle fuer WBOOT im BIOS
  ED83    C9                            RET
                                ;
                                ;+++++++++++++++++++++++++++++   Ende CONOUT  ++++++++++++++++
                                ;
                                ;Ansprung unklar
                                        ;LED82:  XOR  A
                                        ;DEC  A
                                        ;RET
                                ;
  ED84    AF                    LISTST: XOR  A
  ED85    3D                            DEC  A
  ED86    C9                            RET
                                ;
  ED87    21 E643               SELDSK: LD   HL,NDISK     ;Anzahl der LW
  ED8A    79                            LD   A,C          ;C = akt. LW
  ED8B    BE                            CP   (HL)
  ED8C    21 0000                       LD   HL,0000H     ;HL=0 --> kein LW
	MACRO-80 3.44	09-Dec-81	PAGE	1-19


  ED8F    D0                            RET  NC           ;akt. LW >= NDISK!!!
  ED90    2A E644                       LD   HL,(DPHX)
  ED93    06 00                         LD   B,00H
  ED95    09                            ADD  HL,BC
  ED96    09                            ADD  HL,BC        ;DPHX + (2 * LW)
  ED97    5E                            LD   E,(HL)
  ED98    23                            INC  HL
  ED99    56                            LD   D,(HL)
  ED9A    EB                            EX   DE,HL
  ED9B    7C                            LD   A,H
  ED9C    B5                            OR   L
  ED9D    C8                            RET  Z            ;HL=0 --> kein DPB
  ED9E    79                            LD   A,C
  ED9F    32 F388                       LD   (DRIVE),A    ;aktives LW --> A
  EDA2    22 F38F                       LD   (DPH),HL     ;zugeordneter DPH --> HL
  EDA5    C9                            RET
                                ;
  EDA6    01 0000               HOME:   LD   BC,0000H
  EDA9    ED 43 F389            SETTRK: LD   (TRACK),BC
  EDAD    C9                            RET
                                ;
  EDAE    ED 43 F38B            SETSEC: LD   (SECTOR),BC
  EDB2    C9                            RET
                                ;
  EDB3    ED 43 F38D            SETDMA: LD   (DMA),BC
  EDB7    C9                            RET
                                ;
  EDB8    60                    SECTRN: LD   H,B
  EDB9    69                            LD   L,C
  EDBA    7A                            LD   A,D
  EDBB    B3                            OR   E
  EDBC    C8                            RET  Z
  EDBD    EB                            EX   DE,HL
  EDBE    06 00                         LD   B,00H
  EDC0    09                            ADD  HL,BC
  EDC1    6E                            LD   L,(HL)
  EDC2    62                            LD   H,D
  EDC3    C9                            RET
                                ;
  EDC4    0E 02                 READ:   LD   C,02H
  EDC6    3E 04                         LD   A,04H
  EDC8    21                            DEFB 21H          ;LD HL,063EH mit nxt. Befehl!!!
  EDC9    3E 06                 WRITE:  LD   A,06H
  EDCB    32 F387                       LD   (DF4FB),A    ;hier geht es fuer READ weiter!
  EDCE    79                            LD   A,C
  EDCF    32 F3AA                       LD   (DF51E),A
  EDD2    21 EDEB                       LD   HL,LEDEC
  EDD5    E5                            PUSH HL
  EDD6    2A F38F                       LD   HL,(DPH)
  EDD9    11 000A                       LD   DE,000AH
  EDDC    19                            ADD  HL,DE
  EDDD    7E                            LD   A,(HL)
  EDDE    23                            INC  HL
  EDDF    66                            LD   H,(HL)
  EDE0    6F                            LD   L,A
  EDE1    2B                            DEC  HL
  EDE2    7E                            LD   A,(HL)
  EDE3    2B                            DEC  HL
  EDE4    6E                            LD   L,(HL)
  EDE5    67                            LD   H,A
  EDE6    E5                            PUSH HL
  EDE7    21 F387                       LD   HL,DF4FB
	MACRO-80 3.44	09-Dec-81	PAGE	1-20


  EDEA    C9                            RET
                                ;
  EDEB    B7                    LEDEC:  OR   A
  EDEC    C8                            RET  Z
  EDED    3E 01                         LD   A,01H
  EDEF    C9                            RET
                                ;
                                ;************************  RAM-Disk   ******************************
                                ;
  EDF0    4E                    LEDF1:  LD   C,(HL)           ; RAF-READ Record 
  EDF1    23                            INC  HL
  EDF2    23                            INC  HL
  EDF3    7E                            LD   A,(HL)
  EDF4    32 F351                       LD   (RAFTRK),A
  EDF7    23                            INC  HL
  EDF8    7E                            LD   A,(HL)
  EDF9    A7                            AND  A
  EDFA    20 2E                         JR   NZ,RDERR
  EDFC    23                            INC  HL
  EDFD    7E                            LD   A,(HL)
  EDFE    32 F352                       LD   (RAFSEC),A
  EE01    CB 7F                         BIT  7,A
  EE03    20 25                         JR   NZ,RDERR
  EE05    23                            INC  HL
  EE06    7E                            LD   A,(HL)
  EE07    A7                            AND  A
  EE08    20 20                         JR   NZ,RDERR
  EE0A    23                            INC  HL
  EE0B    23                            INC  HL
  EE0C    79                            LD   A,C
  EE0D    01 0080                       LD   BC,0080H
  EE10    FE 06                         CP   06H
  EE12    28 08                         JR   Z,LEE1D
  EE14    CD EED8                       CALL ADRRAF
  EE17    ED B2                         INIR
  EE19    00                            NOP
  EE1A    AF                            XOR  A             ; in Ordnung
  EE1B    C9                            RET
                                ;
  EE1C    21 0080               LEE1D:  LD   HL,0080H      ; RAF-WRITE Record 
  EE1F    ED 5B F38D                    LD   DE,(DMA)
                                        ;                  ;CALL CHKSU
                                        ;                   LD   (CHKSUM),BC
  EE23    CD EED8                       CALL ADRRAF
  EE26    ED B3                         OTIR
                                        ;                    NOP
                                        ;                    CALL ADRRAF
                                        ;                    INIR
                                        ;                    NOP
                                        ;                    LD   HL,0080H
                                        ;                    LD   DE,(DMA)
                                        ;                    CALL CHKSU
                                        ;                    LD   HL,(CHKSUM)
                                        ;                    SBC  HL,BC
                                        ;                  JR   NZ,RDERR
  EE28    AF                            XOR  A            ; in Ordnung
  EE29    C9                            RET
                                ;
  EE2A    3E FF                 RDERR:  LD   A,0FFH       ; Fehler
  EE2C    C9                            RET
                                ;
  EE2D    20 3D 3E 49           TXTINI: DEFM " =>INIT.."
	MACRO-80 3.44	09-Dec-81	PAGE	1-21


  EE31    4E 49 54 2E           
  EE35    2E                    
  EE36    00                            DEFB 0
                                ;
  EE37    4F 4B                 TEXTOK: DEFM "OK"
  EE39    00                            DEFB 0
                                ;
  EE3A    52 46 4C 20           RFLERR: DEFM "RFL ERROR!"
  EE3E    45 52 52 4F           
  EE42    52 21                 
  EE44    00                            DEFB 0
                                ;
  EE45    21 EE2D               RDFORM: LD   HL,TXTINI
  EE48    CD E9ED                       CALL OUTTXT
  EE4B    21 B002                       LD   HL,0B002H    ;Hilfsprogramm von 0B000H bis 0B800H
  EE4E    54                            LD   D,H
  EE4F    5D                            LD   E,L
  EE50    2B                            DEC  HL
  EE51    36 E0                         LD   (HL),0E0H    ;0B001H = 0E0H
  EE53    2B                            DEC  HL
  EE54    36 D3                         LD   (HL),0D3H    ;0B000H = 0D3H
  EE56    01 0200                       LD   BC,0200H
  EE59    ED B0                         LDIR              ;0D3H,0E0H von 0B000H bis 0B1FFH
  EE5B    23                            INC  HL
  EE5C    36 E1                         LD   (HL),0E1H
  EE5E    2B                            DEC  HL
  EE5F    01 0200                       LD   BC,0200H
  EE62    ED B0                         LDIR              ;0D3H,0E1H von 0B200H bis 0B3FFH
  EE64    23                            INC  HL
  EE65    36 E2                         LD   (HL),0E2H
  EE67    2B                            DEC  HL
  EE68    01 0200                       LD   BC,0200H
  EE6B    ED B0                         LDIR              ;0D3H,0E2H von 0B400H bis 0B5FFH
  EE6D    23                            INC  HL
  EE6E    36 E3                         LD   (HL),0E3H
  EE70    2B                            DEC  HL
  EE71    01 0200                       LD   BC,0200H
  EE74    ED B0                         LDIR              ;0D3H,0E3H von 0B600H bis 0B7FFH
  EE76    36 C9                         LD   (HL),0C9H    ;RET auf 0B800H
  EE78    AF                            XOR  A
  EE79    D3 E7                         OUT  (PE7),A      ;L-Adresse
  EE7B    D3 E6                         OUT  (PE6),A      ;H-Adresse
  EE7D    D3 E5                         OUT  (PE5),A      ;Extended-Adresse
  EE7F    47                            LD   B,A
  EE80    3E E5                         LD   A,0E5H       ;RD wird mit 0E5H formatiert
  EE82    0E E6                         LD   C,0E6H
  EE84    CD B000               RDFOR1: CALL HPRDSK       ;Hilfsprogramm Format RAM-Disk
  EE87    ED 41                         OUT  (C),B
  EE89    10 F9                         DJNZ RDFOR1       ;fuer alls H-Adressen (256 Durchl.)
  EE8B    21 D000                       LD   HL,EQUCCP
  EE8E    22 F38D                       LD   (DMA),HL
  EE91    06 2C                         LD   B,2CH        ;44 Bloecke CCP+BDOS
  EE93    CD EEA0                       CALL WRCCP
  EE96    C2 E912                       JP   NZ,CPMERR
  EE99    21 EE37                       LD   HL,TEXTOK
  EE9C    CD E9ED                       CALL OUTTXT
  EE9F    C9                            RET
                                ;
  EEA0    C5                    WRCCP:  PUSH BC           ;CCP+BDOS in Systemtrack schreiben
  EEA1    0E 00                         LD   C,00H        ;LW A:
  EEA3    CD ED87                       CALL SELDSK
  EEA6    C1                            POP  BC
	MACRO-80 3.44	09-Dec-81	PAGE	1-22


  EEA7    21 0000                       LD   HL,0000H
  EEAA    22 F389                       LD   (TRACK),HL   ;Track 0
  EEAD    EB                            EX   DE,HL
  EEAE    2A E641                       LD   HL,(CCP)
  EEB1    ED 53 F38B            WRCCP1: LD   (SECTOR),DE
  EEB5    22 F38D                       LD   (DMA),HL
  EEB8    C5                            PUSH BC
  EEB9    CD                            DEFB 0CDH         ;CALL WRITE -> CD ED CA
  EEBA    EDC9                  WRCCP2: DEFW WRITE       ; kannn durch     READ (EDC5) ersetzt werden
  EEBC    C1                            POP  BC
  EEBD    20 10                         JR   NZ,RDERRO
  EEBF    2A F38D                       LD   HL,(DMA)
  EEC2    11 0080                       LD   DE,0080H
  EEC5    19                            ADD  HL,DE
  EEC6    ED 5B F38B                    LD   DE,(SECTOR)
  EECA    13                            INC  DE
  EECB    10 E4                         DJNZ WRCCP1
  EECD    AF                            XOR  A
  EECE    C9                            RET
                                ;
  EECF    21 EE3A               RDERRO: LD   HL,RFLERR
  EED2    CD E9ED                       CALL OUTTXT
  EED5    AF                            XOR  A
  EED6    3D                            DEC  A
  EED7    C9                            RET
                                ;
  EED8    AF                    ADRRAF: XOR  A            ;L=RADR 0-7 , H=RADR 8-15 , A=RADR 16-19(21)
  EED9    6F                            LD   L,A
  EEDA    3A F352                       LD   A,(RAFSEC)   ;(RAFSEC)
  EEDD    67                            LD   H,A          ;H=Record (max. 128 = Bit 0-6)
  EEDE    CB 1C                         RR   H
  EEE0    CB 1D                         RR   L            ;H0 -> L7 ...... H6 -> H5
  EEE2    3A F351                       LD   A,(RAFTRK)    ;(RAFTRK) , A=Track (max. 64 bei 1M (256 bei 4M) = Bit 0-5(7)
  EEE5    CB 1F                         RR   A            ;A0 -> CY
  EEE7    30 02                         JR   NC,LEF0B
  EEE9    CB F4                         SET  6,H          ;H6 = A0 (RADR14)
  EEEB    CB 1F                 LEF0B:  RR   A            ;A1 -> CY
  EEED    30 02                         JR   NC,LEF11
  EEEF    CB FC                         SET  7,H          ;H7 = A1 (RADR15)
  EEF1    F5                    LEF11:  PUSH AF
  EEF2    E6 03                         AND  03H
  EEF4    F6 E0                         OR   0E0H
  EEF6    4F                            LD   C,A
  EEF7    7D                            LD   A,L
  EEF8    D3 E7                         OUT  (PE7),A      ;L-Adresse
  EEFA    7C                            LD   A,H
  EEFB    D3 E6                         OUT  (PE6),A      ;H-Adresse
  EEFD    F1                            POP  AF
  EEFE    CB 1F                         RR   A            ;Rotiere A rechts durch Carry
  EF00    CB 1F                         RR   A
  EF02    E6 0F                         AND  0FH
  EF04    D3 E5                         OUT  (PE5),A      ;Extended-Adresse
  EF06    06 80                         LD   B,80H
  EF08    2A F38D                       LD   HL,(DMA)
  EF0B    C9                            RET
                                ;
                                ;**********************  Ende  RAM-Disk  ***************************
                                ;
                                ;-------------------  ist Umladeroutine 'C' von HRDOS ---------
                                ;
                                ;
                                ;*************************  LOAD (Turbo)  ********************
	MACRO-80 3.44	09-Dec-81	PAGE	1-23


                                ;
  EF0C    C9                    LOAD:   RET
                                ;
                                ;******************************   Ende LOAD  *****************
                                ;
  EF0D    2A F38F               LEFFA:  LD   HL,(DPH)
  EF10    22 F3A1                       LD   (DF515),HL
  EF13    2E 0F                 LF000:  LD   L,0FH
  EF15    D5                    LF002:  PUSH DE
  EF16    11 000A                       LD   DE,000AH
  EF19    62                            LD   H,D
  EF1A    E5                            PUSH HL
  EF1B    2A F3A1                       LD   HL,(DF515)
  EF1E    19                            ADD  HL,DE
  EF1F    5E                            LD   E,(HL)
  EF20    23                            INC  HL
  EF21    56                            LD   D,(HL)
  EF22    E1                            POP  HL
  EF23    19                            ADD  HL,DE
  EF24    D1                            POP  DE
  EF25    7E                            LD   A,(HL)
  EF26    B7                            OR   A
  EF27    C9                            RET
                                ;Ansprung unklar
  EF28    23                    LF015:  INC  HL
  EF29    CB FE                         SET  7,(HL)
  EF2B    2B                            DEC  HL
  EF2C    AF                    LF019:  XOR  A
  EF2D    32 F3A8                       LD   (DF51C),A
  EF30    CD EF37                       CALL LF024
  EF33    3A F3A8                       LD   A,(DF51C)
  EF36    C9                            RET
                                ;
  EF37    4E                    LF024:  LD   C,(HL)
  EF38    CD EF0D                       CALL LEFFA
  EF3B    CA EFF4                       JP   Z,LF0E1
  EF3E    79                            LD   A,C
  EF3F    FE 06                         CP   06H
  EF41    3E 01                         LD   A,01H
  EF43    20 01                         JR   NZ,LF033
  EF45    AF                            XOR  A
  EF46    32 F3A9               LF033:  LD   (DF51D),A
  EF49    CD EF13                       CALL LF000
  EF4C    47                            LD   B,A
  EF4D    2A F38B                       LD   HL,(SECTOR)
  EF50    CB 3C                 LF03D:  SRL  H
  EF52    CB 1D                         RR   L
  EF54    10 FA                         DJNZ LF03D
  EF56    22 F3A4                       LD   (DF518),HL
  EF59    21 F3A6                       LD   HL,DF51A
  EF5C    7E                            LD   A,(HL)
  EF5D    36 01                         LD   (HL),01H
  EF5F    B7                            OR   A
  EF60    28 26                         JR   Z,LF075
  EF62    3A F388                       LD   A,(DRIVE)
  EF65    21 F391                       LD   HL,DF505
  EF68    BE                            CP   (HL)
  EF69    20 16                         JR   NZ,LF06E
  EF6B    2A F392                       LD   HL,(DF506)
  EF6E    ED 5B F389                    LD   DE,(TRACK)
  EF72    ED 52                         SBC  HL,DE
  EF74    20 0B                         JR   NZ,LF06E
	MACRO-80 3.44	09-Dec-81	PAGE	1-24


  EF76    2A F394                       LD   HL,(DF508)
  EF79    ED 5B F3A4                    LD   DE,(DF518)
  EF7D    ED 52                         SBC  HL,DE
  EF7F    28 1F                         JR   Z,LF08D
  EF81    3A F3A7               LF06E:  LD   A,(DF51B)
  EF84    B7                            OR   A
  EF85    C4 EFE1                       CALL NZ,LF0CE
  EF88    21 F388               LF075:  LD   HL,DRIVE
  EF8B    11 F391                       LD   DE,DF505
  EF8E    01 0009                       LD   BC,0009H
  EF91    ED B0                         LDIR
  EF93    2A F3A4                       LD   HL,(DF518)
  EF96    22 F394                       LD   (DF508),HL
  EF99    CD EFE4                       CALL LF0D1
  EF9C    AF                            XOR  A
  EF9D    32 F3A7                       LD   (DF51B),A
  EFA0    CD EF13               LF08D:  CALL LF000
  EFA3    23                            INC  HL
  EFA4    3A F38B                       LD   A,(SECTOR)
  EFA7    A6                            AND  (HL)
  EFA8    1F                            RRA
  EFA9    67                            LD   H,A
  EFAA    3E 00                         LD   A,00H
  EFAC    1F                            RRA
  EFAD    6F                            LD   L,A
  EFAE    11 F3AB                       LD   DE,DISKP
  EFB1    19                            ADD  HL,DE
  EFB2    ED 5B F38D                    LD   DE,(DMA)
  EFB6    3A F3A9                       LD   A,(DF51D)
  EFB9    B7                            OR   A
  EFBA    20 05                         JR   NZ,LF0AE
  EFBC    3C                            INC  A
  EFBD    32 F3A7                       LD   (DF51B),A
  EFC0    EB                            EX   DE,HL
  EFC1    01 0080               LF0AE:  LD   BC,0080H
  EFC4    ED B0                         LDIR
  EFC6    3A F3A8                       LD   A,(DF51C)
  EFC9    B7                            OR   A
  EFCA    20 10                         JR   NZ,LF0C9
  EFCC    3A F3AA                       LD   A,(DF51E)
  EFCF    3D                            DEC  A
  EFD0    C0                            RET  NZ
  EFD1    32 F3A7                       LD   (DF51B),A
  EFD4    CD EFE1                       CALL LF0CE
  EFD7    3A F3A8                       LD   A,(DF51C)
  EFDA    B7                            OR   A
  EFDB    C8                            RET  Z
  EFDC    AF                    LF0C9:  XOR  A
  EFDD    32 F3A6                       LD   (DF51A),A
  EFE0    C9                            RET
                                ;
  EFE1    3E 06                 LF0CE:  LD   A,06H
  EFE3    21                            DEFB 21H             ; LD   HL,043EH  -> 21 3E 04
  EFE4    3E 04                 LF0D1:  LD   A,04H  
  EFE6    32 F3A3                       LD   (DF517),A
  EFE9    21 F3AB                       LD   HL,DISKP
  EFEC    22 F396                       LD   (DF50A),HL
  EFEF    21 F391                       LD   HL,DF505
  EFF2    18 09                         JR   LF0EA
                                ;
  EFF4    3A F387               LF0E1:  LD   A,(DF4FB)
  EFF7    32 F3A3                       LD   (DF517),A
	MACRO-80 3.44	09-Dec-81	PAGE	1-25


  EFFA    21 F388                       LD   HL,DRIVE
  EFFD    11 F39A               LF0EA:  LD   DE,DF50E
  F000    01 0009                       LD   BC,0009H
  F003    ED B0                         LDIR
  F005    3A F39A                       LD   A,(DF50E)
  F008    17                            RLA
  F009    DA F21B                       JP   C,LF307
  F00C    3A F39C                       LD   A,(DF510)
  F00F    21 F39E                       LD   HL,DF512
  F012    B6                            OR   (HL)
  F013    C2 F0D4                       JP   NZ,LF1C1
  F016    CD EF13                       CALL LF000
  F019    32 F374                       LD   (DF4E8),A
  F01C    B7                            OR   A
  F01D    3E FF                         LD   A,0FFH
  F01F    28 02                         JR   Z,LF110
  F021    3E 80                         LD   A,80H
  F023    32 F377               LF110:  LD   (DF4EB),A
  F026    23                            INC  HL
  F027    23                            INC  HL
  F028    7E                            LD   A,(HL)
  F029    32 F375                       LD   (DF4E9),A
  F02C    3A F39D                       LD   A,(DF511)
  F02F    BE                            CP   (HL)
  F030    38 04                         JR   C,LF123
  F032    96                            SUB  (HL)
  F033    01 0104                       LD   BC,0104H
  F036    3C                    LF123:  INC  A
  F037    32 F373                       LD   (DF4E7),A
  F03A    23                            INC  HL
  F03B    7E                            LD   A,(HL)
  F03C    32 F376                       LD   (DF4EA),A
  F03F    23                            INC  HL
  F040    3A F39B                       LD   A,(DF50F)
  F043    BE                            CP   (HL)
  F044    38 04                         JR   C,LF137
  F046    96                            SUB  (HL)
  F047    01 0104                       LD   BC,0104H
  F04A    32 F371               LF137:  LD   (DF4E5),A
  F04D    23                            INC  HL
  F04E    7E                            LD   A,(HL)
  F04F    B1                            OR   C
  F050    32 F370                       LD   (DF4E4),A
  F053    78                            LD   A,B
  F054    32 F372                       LD   (DF4E6),A
  F057    23                            INC  HL
  F058    3A F3A3                       LD   A,(DF517)
  F05B    16 05                         LD   D,05H
  F05D    FE 06                         CP   06H
  F05F    28 02                         JR   Z,LF150
  F061    16 06                         LD   D,06H
  F063    7E                    LF150:  LD   A,(HL)
  F064    E6 40                         AND  40H
  F066    B2                            OR   D
  F067    32 F36E                       LD   (DF4E2),A
  F06A    11 F378                       LD   DE,DF4EC
  F06D    01 0004                       LD   BC,0004H
  F070    ED B0                         LDIR
  F072    0E 02                         LD   C,02H
  F074    06 02                 LF161:  LD   B,02H
  F076    C5                    LF163:  PUSH BC
  F077    CD F088                       CALL LF175
	MACRO-80 3.44	09-Dec-81	PAGE	1-26


  F07A    C1                            POP  BC
  F07B    B7                            OR   A
  F07C    C8                            RET  Z
  F07D    10 F7                         DJNZ LF163
  F07F    0D                            DEC  C
  F080    C8                            RET  Z
  F081    C5                            PUSH BC
  F082    CD F0E8                       CALL LF1D5
  F085    C1                            POP  BC
  F086    18 EC                         JR   LF161
                                ;
  F088    3E 03                 LF175:  LD   A,03H
  F08A    06 02                         LD   B,02H
  F08C    21 F37A                       LD   HL,CTAB      ;FDC Befehlsbyte
  F08F    D3 41                         OUT  (DFDC),A     ;Datenport FDC
  F091    CD F143                       CALL LF230
  F094    CD F0FA                       CALL LF1E7
  F097    20 3B                         JR   NZ,LF1C1
  F099    21 0040                       LD   HL,0040H
  F09C    3A F374                       LD   A,(DF4E8)
  F09F    3C                            INC  A
  F0A0    29                    LF18D:  ADD  HL,HL
  F0A1    3D                            DEC  A
  F0A2    20 FC                         JR   NZ,LF18D
  F0A4    2B                            DEC  HL
  F0A5    24                            INC  H
  F0A6    2C                            INC  L
  F0A7    E5                            PUSH HL
  F0A8    2A F39F                       LD   HL,(DF513)
  F0AB    E5                            PUSH HL
  F0AC    3A F36E                       LD   A,(DF4E2)
  F0AF    4F                            LD   C,A
  F0B0    06 09                         LD   B,09H
  F0B2    0F                            RRCA
  F0B3    3E 51                         LD   A,51H
  F0B5    8F                            ADC  A,A
  F0B6    32 F182                       LD   (MODE0),A    ;A2 --> INI
  F0B9    32 F188                       LD   (MODE1),A    ;A3 --> OUTI
  F0BC    F3                            DI
  F0BD    CD F13A                       CALL LF227
  F0C0    E1                            POP  HL
  F0C1    D1                            POP  DE
  F0C2    43                            LD   B,E
  F0C3    0E 41                         LD   C,DFDC       ;Datenport FDC
  F0C5    CD F175                       CALL RW           ;FDC RW-Routine
  F0C8    FB                            EI
  F0C9    CD F0DB                       CALL LF1C8
  F0CC    21 F37C                       LD   HL,DF4F0
  F0CF    7E                            LD   A,(HL)
  F0D0    E6 C0                         AND  0C0H
  F0D2    28 02                         JR   Z,LF1C3
  F0D4    3E FF                 LF1C1:  LD   A,0FFH
  F0D6    32 F3A8               LF1C3:  LD   (DF51C),A
  F0D9    B7                            OR   A
  F0DA    C9                            RET
                                ;
  F0DB    06 07                 LF1C8:  LD   B,07H
  F0DD    21 F37C                       LD   HL,DF4F0
  F0E0    CD F15E               LF1CD:  CALL LF24B
  F0E3    77                            LD   (HL),A
  F0E4    23                            INC  HL
  F0E5    10 F9                         DJNZ LF1CD
	MACRO-80 3.44	09-Dec-81	PAGE	1-27


  F0E7    C9                            RET
                                ;
  F0E8    01 0207               LF1D5:  LD   BC,0207H
  F0EB    CD F13A                       CALL LF227
  F0EE    CD F11A                       CALL LF207
  F0F1    C8                            RET  Z
  F0F2    01 0207                       LD   BC,0207H
  F0F5    CD F13A                       CALL LF227
  F0F8    18 20                         JR   LF207
                                ;
  F0FA    3A F371               LF1E7:  LD   A,(DF4E5)
  F0FD    32 F383                       LD   (DF4F7),A
  F100    B7                            OR   A
  F101    28 E5                         JR   Z,LF1D5
  F103    01 030F                       LD   BC,030FH
  F106    21 F378                       LD   HL,DF4EC
  F109    CB 66                         BIT  4,(HL)
  F10B    28 04                         JR   Z,LF1FE
  F10D    87                            ADD  A,A
  F10E    32 F371                       LD   (DF4E5),A
  F111    CD F13A               LF1FE:  CALL LF227
  F114    3A F383                       LD   A,(DF4F7)
  F117    32 F371                       LD   (DF4E5),A
  F11A    01 0108               LF207:  LD   BC,0108H
  F11D    CD F13A                       CALL LF227
  F120    CD F15E                       CALL LF24B
  F123    47                            LD   B,A
  F124    32 F37C                       LD   (DF4F0),A
  F127    FE 80                         CP   80H
  F129    C4 F15E                       CALL NZ,LF24B
  F12C    CB 68                         BIT  5,B
  F12E    28 EA                         JR   Z,LF207
  F130    78                            LD   A,B
  F131    E6 F0                         AND  0F0H
  F133    FE C0                         CP   0C0H
  F135    28 E3                         JR   Z,LF207
  F137    EE 20                         XOR  20H
  F139    C9                            RET
                                ;
  F13A    C5                    LF227:  PUSH BC
  F13B    CD F198                       CALL LF285
  F13E    C1                            POP  BC
  F13F    21 F36F               LF22C:  LD   HL,DF4E3
  F142    71                            LD   (HL),C
  F143    0E 41                 LF230:  LD   C,41H
  F145    D5                            PUSH DE
  F146    11 1FFF               LF233:  LD   DE,1FFFH
  F149    7B                    LF236:  LD   A,E
  F14A    B2                            OR   D
  F14B    28 0D                         JR   Z,LF247      ;Abbruch nach 8192 Versuchen
  F14D    DB 40                         IN   A,(CFDC)     ;Lese Hauptstatusregister
  F14F    E6 C0                         AND  0C0H
  F151    FE 80                         CP   80H          ;FDC bereit zum Schreiben?
  F153    1B                            DEC  DE
  F154    20 F3                         JR   NZ,LF236     ;noch nicht bereit
  F156    ED A3                         OUTI              ;1 Byte --> FDC
  F158    20 EC                         JR   NZ,LF233     ;Wdhlg., bis B=0
  F15A    06 00                 LF247:  LD   B,00H
  F15C    D1                            POP  DE
  F15D    C9                            RET
                                ;
  F15E    E5                    LF24B:  PUSH HL
	MACRO-80 3.44	09-Dec-81	PAGE	1-28


  F15F    21 1FFF                       LD   HL,1FFFH
  F162    7D                    LF24F:  LD   A,L
  F163    B4                            OR   H
  F164    3E C0                         LD   A,0C0H
  F166    28 0B                         JR   Z,LF260      ;Abbruch nach 8192 Versuchen
  F168    DB 40                         IN   A,(CFDC)     ;Lese Hauptstatusregister
  F16A    E6 C0                         AND  0C0H
  F16C    FE C0                         CP   0C0H         ;FDC bereit zum Lesen?
  F16E    2B                            DEC  HL
  F16F    20 F1                         JR   NZ,LF24F     ;noch nicht bereit
  F171    DB 41                         IN   A,(DFDC)     ;1 Byte vom FDC lesen --> A
  F173    E1                    LF260:  POP  HL
  F174    C9                            RET
                                ;
                                ;
                                ;       FDC READ/WRITE Routine
                                ;       ----------------------
                                ;
  F175    3A F386               RW:     LD   A,(LATPU)
  F178    CB CF                         SET  1,A
  F17A    D3 45                         OUT  (LATCH),A    ;WAIT-Freigabe
  F17C    DB 40                 RW01:   IN   A,(CFDC)     ;Lese Hauptstatusregister
  F17E    07                            RLCA
  F17F    30 FB                         JR   NC,RW01      ;FDC noch nicht bereit
  F181    ED                            DEFB 0EDH         ;ED A2 = INI
  F182    A2                    MODE0:  DEFB 0A2H         ;ED A3 = OUTI
  F183    00                            NOP
  F184    D3 43                 RW02:   OUT  (WAIT),A     ;WAIT bis Interrupt FDC
  F186    00                            NOP
  F187    ED                            DEFB 0EDH         ;ED A2 = INI
  F188    A2                    MODE1:  DEFB 0A2H         ;ED A3 = OUTI
  F189    C2 F184                       JP   NZ,RW02
  F18C    15                            DEC  D
  F18D    C2 F184                       JP   NZ,RW02
  F190    3A F386                       LD   A,(LATPU)
  F193    CB E7                         SET  4,A          ;Terminal Count
  F195    D3 45                         OUT  (LATCH),A    ;TC + WAIT-Sperrung
  F197    C9                            RET
                                ;
  F198    21 F384               LF285:  LD   HL,DF4F8
  F19B    3A F370                       LD   A,(DF4E4)
  F19E    E6 03                         AND  03H
  F1A0    BE                            CP   (HL)
  F1A1    77                            LD   (HL),A
  F1A2    23                            INC  HL
  F1A3    4E                            LD   C,(HL)
  F1A4    36 48                         LD   (HL),48H
  F1A6    F5                            PUSH AF
  F1A7    E5                            PUSH HL
  F1A8    21 F386                       LD   HL,LATPU
  F1AB    3A F370                       LD   A,(DF4E4)
  F1AE    E6 03                         AND  03H
  F1B0    28 08                         JR   Z,LF2A7
  F1B2    FE 02                         CP   02H
  F1B4    28 04                         JR   Z,LF2A7
  F1B6    CB DE                         SET  3,(HL)       ;Floppy-LW 1: Motor an
  F1B8    18 02                         JR   LF2A9
                                ;
  F1BA    CB C6                 LF2A7:  SET  0,(HL)       ;Floppy-LW 0: Motor an
  F1BC    7E                    LF2A9:  LD   A,(HL)
  F1BD    D3 45                         OUT  (LATCH),A
  F1BF    E1                            POP  HL
	MACRO-80 3.44	09-Dec-81	PAGE	1-29


  F1C0    F1                            POP  AF
  F1C1    20 04                         JR   NZ,LF2B4
  F1C3    79                            LD   A,C
  F1C4    A7                            AND  A
  F1C5    20 09                         JR   NZ,LF2BD
  F1C7    3E 48                 LF2B4:  LD   A,48H
  F1C9    CB 3F                         SRL  A
  F1CB    CB 3F                         SRL  A
  F1CD    BE                            CP   (HL)
  F1CE    38 F7                         JR   C,LF2B4
  F1D0    7E                    LF2BD:  LD   A,(HL)
  F1D1    A7                            AND  A
  F1D2    20 08                         JR   NZ,LF2C9
  F1D4    E5                            PUSH HL
  F1D5    21 F1F0                       LD   HL,DISCTX
  F1D8    CD E9ED                       CALL OUTTXT
  F1DB    E1                            POP  HL
  F1DC    C5                    LF2C9:  PUSH BC
  F1DD    E5                            PUSH HL
  F1DE    01 0204                       LD   BC,0204H
  F1E1    CD F13F                       CALL LF22C
  F1E4    CD F15E                       CALL LF24B
  F1E7    E1                            POP  HL
  F1E8    C1                            POP  BC
  F1E9    CB 6F                         BIT  5,A
  F1EB    28 E3                         JR   Z,LF2BD
  F1ED    36 90                         LD   (HL),90H
  F1EF    C9                            RET
                                ;
  F1F0    20 44 49 53           DISCTX: DEFM ' DISC?'
  F1F4    43 3F                 
  F1F6    08 08 08 08                   DEFB 8,8,8,8,8,8
  F1FA    08 08                 
  F1FC    00                            NOP
                                ;
                                ;
                                ; Interrupteinsprung von CTC Kanal 3
                                ;
  F1FD    F3                    ISRCTC: DI                ;DI hat gefehlt, wurde ergaenzt
  F1FE    F5                            PUSH AF
  F1FF    3A F385                       LD   A,(CTCCNT)   ;CTC-Zusatzzaehler lesen
  F202    A7                            AND  A
  F203    28 12                         JR   Z,ISRCTE     ;bei "0", die Fkt. beenden
                                		;das ist total schraeg:
                                		;Beim Start von HRCPM wird CNTCNT per Interrupt 1x !!! von 255 auf 0 heruntergezaehlt
                                		;und bleibt dann auf 0
                                		;Das sieht nach einer verzoegerten Initialisierung von LATPU und LATCH aus.
                                		;Ich frage mich, ob das wirklich notwendig ist?
                                		;Man haette den CTC-Interrupt besser abschalten sollen, wenn CTCCNT = 0 ist.
  F205    3D                            DEC  A
  F206    32 F385                       LD   (CTCCNT),A
  F209    20 0C                         JR   NZ,ISRCTE
  F20B    E5                            PUSH HL           ;Bei 2 MHz CPU-Takt wird nach 8 Sekunden diese Stelle erreicht
  F20C    21 F386                       LD   HL,LATPU
  F20F    CB 86                         RES  0,(HL)       ;Floppy-LW 0: Motor aus
  F211    CB 9E                         RES  3,(HL)       ;Floppy-LW 1: Motor aus
  F213    7E                            LD   A,(HL)
  F214    D3 45                         OUT  (LATCH),A    ;Latch auf dem Floppy-Controller ruecksetzen
  F216    E1                            POP  HL
  F217    F1                    ISRCTE: POP  AF
  F218    FB                    INTEND: EI                ;ist zusaetzlich Einsprungpunkt fuer nicht genutzte Interrupts
  F219    ED 4D                         RETI
	MACRO-80 3.44	09-Dec-81	PAGE	1-30


                                ;
  F21B    DB 8F                 LF307:  IN   A,(P8F)
  F21D    17                            RLA
  F21E    38 FB                         JR   C,LF307
  F220    2E 19                         LD   L,19H
  F222    CD EF15                       CALL LF002
  F225    4F                            LD   C,A
  F226    2A F39D                       LD   HL,(DF511)
  F229    23                            INC  HL
  F22A    AF                            XOR  A
  F22B    47                            LD   B,A
  F22C    3C                    LF318:  INC  A
  F22D    ED 42                         SBC  HL,BC
  F22F    28 02                         JR   Z,LF31F
  F231    30 F9                         JR   NC,LF318
  F233    09                    LF31F:  ADD  HL,BC
  F234    3D                            DEC  A
  F235    57                            LD   D,A
  F236    5D                            LD   E,L
  F237    2E 11                         LD   L,11H
  F239    CD EF15                       CALL LF002
  F23C    B2                            OR   D
  F23D    D3 8E                         OUT  (P8E),A
  F23F    7B                            LD   A,E
  F240    D3 8B                         OUT  (P8B),A
  F242    23                            INC  HL
  F243    5E                            LD   E,(HL)
  F244    23                            INC  HL
  F245    56                            LD   D,(HL)
  F246    2A F39B                       LD   HL,(DF50F)
  F249    19                            ADD  HL,DE
  F24A    7D                            LD   A,L
  F24B    D3 8C                         OUT  (P8C),A
  F24D    7C                            LD   A,H
  F24E    D3 8D                         OUT  (P8D),A
  F250    3E 01                         LD   A,01H
  F252    D3 8A                         OUT  (P8A),A
  F254    3A F3A3                       LD   A,(DF517)
  F257    FE 06                         CP   06H
  F259    28 16                         JR   Z,LF35D
  F25B    3E 20                         LD   A,20H
  F25D    D3 8F                         OUT  (P8F),A
  F25F    DB 8F                 LF34B:  IN   A,(P8F)
  F261    CB 5F                         BIT  3,A
  F263    28 FA                         JR   Z,LF34B
  F265    2A F39F                       LD   HL,(DF513)
  F268    01 0088                       LD   BC,0088H
  F26B    ED B2                         INIR
  F26D    ED B2                         INIR
  F26F    18 19                         JR   LF376
                                ;
  F271    3E 30                 LF35D:  LD   A,30H
  F273    D3 8F                         OUT  (P8F),A
  F275    DB 8F                 LF361:  IN   A,(P8F)
  F277    17                            RLA
  F278    38 FB                         JR   C,LF361
  F27A    DB 8F                 LF366:  IN   A,(P8F)
  F27C    CB 5F                         BIT  3,A
  F27E    28 FA                         JR   Z,LF366
  F280    2A F39F                       LD   HL,(DF513)
  F283    01 0088                       LD   BC,0088H
  F286    ED B3                         OTIR
	MACRO-80 3.44	09-Dec-81	PAGE	1-31


  F288    ED B3                         OTIR
  F28A    DB 8F                 LF376:  IN   A,(P8F)
  F28C    17                            RLA
  F28D    38 FB                         JR   C,LF376
  F28F    DB 8F                         IN   A,(P8F)
  F291    E6 89                         AND  89H
  F293    C8                            RET  Z
  F294    3E FF                         LD   A,0FFH
  F296    32 F3A8                       LD   (DF51C),A
  F299    C9                            RET
                                ;
                                ;----- RTC -----------------  'T'  von HRDOS12  --------------
                                ;
                                ;
                                ;---- momentan ungenutzt -----  fuer Debugging  ---------------
                                ;
                                ;
                                ;---------   Ende Debugging   ---------------------------------
                                ;
  F29A    43 4F 4E 49                   DEFM "CONIN-ZBIOS-STACK==26BYTES"
  F29E    4E 2D 5A 42           
  F2A2    49 4F 53 2D           
  F2A6    53 54 41 43           
  F2AA    4B 3D 3D 32           
  F2AE    36 42 59 54           
  F2B2    45 53                 
  F2B4    43 4F 4E 49                   DEFM "CONIN-ZBIOS-STACK==26BYTES"
  F2B8    4E 2D 5A 42           
  F2BC    49 4F 53 2D           
  F2C0    53 54 41 43           
  F2C4    4B 3D 3D 32           
  F2C8    36 42 59 54           
  F2CC    45 53                 
  F2CE    43 4F 4E 4F           CINSP:  DEFM "CONOUT-STACK_CONOUT-STACK_CONOUT-STACK"
  F2D2    55 54 2D 53           
  F2D6    54 41 43 4B           
  F2DA    5F 43 4F 4E           
  F2DE    4F 55 54 2D           
  F2E2    53 54 41 43           
  F2E6    4B 5F 43 4F           
  F2EA    4E 4F 55 54           
  F2EE    2D 53 54 41           
  F2F2    43 4B                 
  F2F4    4C 4F 41 44           COUTSP: DEFM "LOAD-ZBIOS-STACK=48BYTES"
  F2F8    2D 5A 42 49           
  F2FC    4F 53 2D 53           
  F300    54 41 43 4B           
  F304    3D 34 38 42           
  F308    59 54 45 53           
  F30C    4C 4F 41 44                   DEFM "LOAD-ZBIOS-STACK=48BYTES"
  F310    2D 5A 42 49           
  F314    4F 53 2D 53           
  F318    54 41 43 4B           
  F31C    3D 34 38 42           
  F320    59 54 45 53           
  F324    5A 42 49 4F           LOADSP: DEFM "ZBIOS(C)ML-SOFT 2003 & AC1-BIOS(C)HR 2011"
  F328    53 28 43 29           
  F32C    4D 4C 2D 53           
  F330    4F 46 54 20           
  F334    32 30 30 33           
  F338    20 26 20 41           
  F33C    43 31 2D 42           
	MACRO-80 3.44	09-Dec-81	PAGE	1-32


  F340    49 4F 53 28           
  F344    43 29 48 52           
  F348    20 32 30 31           
  F34C    31                    
  F34D    00                    CPMSTK: NOP
                                ;
                                ;****************  Ende CP/M StackBereich  *******************
                                ;
  F34E    00                    COLOR:  DEFB 0   ; Merkzelle aktuelle BWS-Farbe (0=Monochrom)
  F34F    00                    COLO1:  DEFB 0   ; aktuelle Farbe ohne invers und intensiv
  F350    00                    COLO2:  DEFB 0   ; Farbe fuer Monitor und CP/M Warmstart
                                ;
  F351    00                    RAFTRK: DEFB 0   ; RAFTRK  EQU  0F4C2H
  F352    00                    RAFSEC: DEFB 0
                                ;
  F353    00                            NOP   ; kein Verweis   F4C4
  F354    00                            NOP   ; kein Verweis   F4C5
  F355    00                            NOP   ; kein Verweis   F4C6
  F356    00                            NOP   ; kein Verweis   F4C7
  F357    00                            NOP   ; kein Verweis   F4C8
  F358    00                            NOP   ; kein Verweis   F4C9
                                ;
  F359    0000                  CHKSUM: DEFW 0   ; Merkzelle f. Pruefsumme       F4CAh
  F35B    00                            NOP      ; kein Verweis   F4CC
  F35C    01                    CUFLAG: DEFB 1   ;CUON/CUOFF   1/0  KursorFlag   F4CDh
  F35D    20                    CUALT:  DEFB 20H ;Cursor OFF Symbol
  F35E    00                    STZ00:  DEFB 0   ;Merkzelle Anz. BS-Steuerzeichen   F4CFh
  F35F    00                    STZ01:  DEFB 0   ;Merkzelle fuer 1. ESC-Steuerzeichen
  F360    00                    STZ02:  DEFB 0   ;Merkzelle fuer 2. ESC-Steuerzeichen
                                ;
  F361    00                    CHAR:   DEFB 0   ; Merkzelle Zeichen <> Cursor    F4D2h
                                ;
  F362    00                            NOP      ; kein Verweis   F4D6
  F363    00                            NOP      ; kein Verweis   F4D7
                                ;
  F364    0000                  SPCIN:  DEFW 0    ;F4D8
  F366    0000                  SPCOUT: DEFW 0
  F368    0000                  SPLOAD: DEFW 0
  F36A    0000                  OLDNMI: DEFW 0    ;F4DE
                                ;
  F36C    00                            NOP      ; kein Verweis   F4E0
  F36D    00                            NOP      ; kein Verweis   F4E1
                                ;
  F36E    00                    DF4E2:  NOP
  F36F    00                    DF4E3:  NOP      ; Merkzelle
  F370    00                    DF4E4:  NOP
  F371    00                    DF4E5:  NOP
  F372    00                    DF4E6:  NOP
  F373    00                    DF4E7:  NOP
  F374    00                    DF4E8:  NOP
  F375    00                    DF4E9:  NOP
  F376    00                    DF4EA:  NOP
  F377    00                    DF4EB:  NOP
                                ;
  F378    00                    DF4EC:  NOP      ; 4 Merkzellen  
  F379    00                            NOP
  F37A    00                    CTAB:   NOP      ;FDC Befehlsbyte
  F37B    00                            NOP      ; 4 Merkzellen  Ende
                                ;
  F37C    00                    DF4F0:  NOP      ;F4F0
                                ;
  F37D    00                            NOP      ; kein Verweis   F4F1
	MACRO-80 3.44	09-Dec-81	PAGE	1-33


  F37E    00                            NOP      ; kein Verweis   F4F2
  F37F    00                            NOP      ; kein Verweis   F4F3
  F380    00                            NOP      ; kein Verweis   F4F4
  F381    00                            NOP      ; kein Verweis   F4F5
  F382    00                            NOP      ; kein Verweis   F4F6
                                ;
  F383    00                    DF4F7:  NOP
  F384    00                    DF4F8:  NOP
  F385    00                    CTCCNT: NOP         ;CTC-Counter - Zusatzzaehler fuer CTC-Interrupt
  F386    00                    LATPU:  NOP
  F387    04                    DF4FB:  DEFB 4      ; 4 = READ,  6 = WRITE
                                ;
  F388    00                    DRIVE:  DEFB 0      ; LW-Nr.
  F389    0000                  TRACK:  DEFW 0
  F38B    0000                  SECTOR: DEFW 0      ;F4FF
  F38D    0000                  DMA:    DEFW 0
  F38F    0000                  DPH:    DEFW 0
  F391    00                    DF505:  DEFB 0      ; 9 Bytes Kopie ab DRIVE:
  F392    0000                  DF506:  DEFW 0
  F394    0000                  DF508:  DEFW 0
  F396    0000                  DF50A:  DEFW 0
  F398    0000                          DEFW 0      ; Ende 9 Bytes
                                ;
  F39A    00                    DF50E:  NOP
  F39B    00                    DF50F:  NOP
  F39C    00                    DF510:  NOP
  F39D    00                    DF511:  DEFB 0
  F39E    00                    DF512:  DEFB 0
  F39F    0000                  DF513:  DEFW 0
  F3A1    0000                  DF515:  DEFW 0
  F3A3    04                    DF517:  DEFB 4
  F3A4    0000                  DF518:  DEFW 0
  F3A6    00                    DF51A:  DEFB 0
  F3A7    00                    DF51B:  NOP
  F3A8    00                    DF51C:  NOP
  F3A9    00                    DF51D:  NOP
  F3AA    00                    DF51E:  NOP
                                ;
  F3AB                          DISKP:  DEFS 1024,0       ;0F51FH
  F7AB                          DIRBF:  DEFS 128,0        ;0F91FH
  F82B                          ALL01:  DEFS 50,0         ;0F99FH
  F85D                          ALL02:  DEFS 504,0        ;0F9D1H
  FA55                          ALL03:  DEFS 256,0        ;0FBC9H
  FB55                          ALL04:  DEFS 256,0        ;0FCC9H
  FC55                          ALL05:  DEFS 50,0         ;0FDC9H
  FC87                          ALL06:  DEFS 50,0         ;0FDFBH
  FCB9                          CHK00:  DEFS 32,0         ;0FE2DH
  FCD9                          CHK02:  DEFS 32,0         ;0FE4DH
  FCF9                          CHK06:  DEFS 32,0         ;0FE6DH
                                ;
                                ;        DEFS 121,1AH      ;0FE8DH
                                ;
  FD19                          ALL00:                    ;ALL00 zeigt hinter das BIOS   (FF00h)
                                ;                          1024k / 2k Bloecke = 512 Bloecke
                                ;                          512 / 8 bit/Byte = 64 Byte ALV benoetigt
                                ;
                                ;
                                ;
                                ;
  FF80                          DFF80   EQU  0FF80H       ;Interrupt-Einsprungpunkt CTC Kanal 0
  FF82                          DFF82   EQU  0FF82H       ;Interrupt-Einsprungpunkt CTC Kanal 1
  FF84                          DFF84   EQU  0FF84H       ;Interrupt-Einsprungpunkt CTC Kanal 2
	MACRO-80 3.44	09-Dec-81	PAGE	1-34


  FF86                          DFF86   EQU  0FF86H       ;Interrupt-Einsprungpunkt CTC Kanal 3
  FF88                          DFF88   EQU  0FF88H       ;Interrupt-Einsprungpunkt PIO1 A - Daten
  FF8A                          DFF8A   EQU  0FF8AH       ;Interrupt-Einsprungpunkt PIO1 A - Control ??? noch mal nachlesen!
                                ;
                                ;#############################   PortAdressen   ##############
                                ;
  0000                          P00     EQU  00H          ; CTC Kanal 0
  0001                          P01     EQU  01H          ; CTC Kanal 1
  0002                          P02     EQU  02H          ; CTC Kanal 2
  0003                          P03     EQU  03H          ; CTC Kanal 3
                                ;
  0004                          P04     EQU  04H          ; PIO_A-Daten
  0005                          P05     EQU  05H          ; PIO_B-Daten
  0006                          P06     EQU  06H          ; PIO_A-Control
                                ;
  0011                          P11     EQU  11H          ; Modul_1 - ggf. EPROMs ausblenden
                                ;
  001E                          P1E     EQU  1EH          ; CP/M - Umschalter
                                ;
  008A                          P8A     EQU  8AH          ; GIDE ? -> 80h
  008B                          P8B     EQU  8BH
  008C                          P8C     EQU  8CH
  008D                          P8D     EQU  8DH
  008E                          P8E     EQU  8EH
  008F                          P8F     EQU  8FH
                                ;
  00F0                          PF0     EQU  0F0H         ; C-BWS-(Steuer)Port
                                ;
                                ;
                                        .DEPHASE
                                        END
	MACRO-80 3.44	09-Dec-81	PAGE	S


Macros:

Symbols:
E95B 	AC1MOD          EED8 	ADRRAF          FD19 	ALL00           
F82B 	ALL01           F85D 	ALL02           FA55 	ALL03           
FB55 	ALL04           FC55 	ALL05           FC87 	ALL06           
185B 	ARG1            185D 	ARG2            EB78 	BCL1            
EB4C 	BCLS            D806 	BDOS            0005 	BDOSF           
EC67 	BEEP            E9BA 	BEEP1           E9BB 	BEEP2           
EC92 	BINTE           EC83 	BINVN           EC9F 	BIVIN           
EC75 	BNORM           E843 	BOOT            E92C 	BOOT1           
1818 	BREAK           ED42 	BWSCOL          ED51 	BWSINI          
ED4C 	BWSZ1           ED48 	BWSZEI          EB91 	CBLO1           
EBA6 	CBLO2           EB8E 	CBLOE           181F 	CBWSB           
EC25 	CCHA1           EC15 	CCHAR           E641 	CCP             
EB87 	CCRET           0040 	CFDC            F361 	CHAR            
FCB9 	CHK00           FCD9 	CHK02           FCF9 	CHK06           
F359 	CHKSUM          EC05 	CHOCH           EC09 	CHOLI           
EB43 	CHOME           F2CE 	CINSP           EB6B 	CLEFT           
EB6F 	CLF             EABF 	COEN1           F34F 	COLO1           
F350 	COLO2           F34E 	COLOR           EA10 	CON10           
EA2B 	CON11           EA31 	CON12           EA4D 	CON20           
EA56 	CON21           EA05 	CONIN           EA82 	CONOUT          
E9FD 	CONST           F2F4 	COUTSP          E912 	CPMERR          
E956 	CPMMOD          F34D 	CPMSTK          EBB1 	CRIGH           
F37A 	CTAB            F385 	CTCCNT          F35D 	CUALT           
F35C 	CUFLAG          ECB8 	CUOFF           ECB0 	CUON            
1800 	CUPOS           000F 	CUZEI           EBE7 	CZLC1           
EBFB 	CZLC2           EBDC 	CZLCR           EBBB 	CZLO1           
EBD2 	CZLO2           EBB5 	CZLOE           F36E 	DF4E2           
F36F 	DF4E3           F370 	DF4E4           F371 	DF4E5           
F372 	DF4E6           F373 	DF4E7           F374 	DF4E8           
F375 	DF4E9           F376 	DF4EA           F377 	DF4EB           
F378 	DF4EC           F37C 	DF4F0           F383 	DF4F7           
F384 	DF4F8           F387 	DF4FB           F391 	DF505           
F392 	DF506           F394 	DF508           F396 	DF50A           
F39A 	DF50E           F39B 	DF50F           F39C 	DF510           
F39D 	DF511           F39E 	DF512           F39F 	DF513           
F3A1 	DF515           F3A3 	DF517           F3A4 	DF518           
F3A6 	DF51A           F3A7 	DF51B           F3A8 	DF51C           
F3A9 	DF51D           F3AA 	DF51E           0041 	DFDC            
FF80 	DFF80           FF82 	DFF82           FF84 	DFF84           
FF86 	DFF86           FF88 	DFF88           FF8A 	DFF8A           
F7AB 	DIRBF           F1F0 	DISCTX          F3AB 	DISKP           
F38D 	DMA             E6C6 	DPB0            E6D7 	DPB1            
E6F3 	DPB2            E70F 	DPB3            E72B 	DPB4            
E747 	DPB5            E763 	DPB6            F38F 	DPH             
E654 	DPH0            E664 	DPH1            E674 	DPH2            
E684 	DPH3            E694 	DPH4            E6A4 	DPH5            
E6B4 	DPH6            E644 	DPHX            E646 	DPHY            
F388 	DRIVE           D000 	EQUCCP          E961 	EXIT            
E965 	EXIT1           EDA6 	HOME            B000 	HPRDSK          
F218 	INTEND          0003 	IOBYTE          F1FD 	ISRCTC          
F217 	ISRCTE          E9D2 	ISREND          E9D8 	ISRPA           
E985 	ISRTAS          0B32 	KLOAD           ECBF 	KONV10          
ECD2 	KONV20          ECF0 	KONV21          ED11 	KONV22          
ED1D 	KONV24          EAD7 	KONVT1          EAAF 	KONVT9          
EACC 	KONVTB          0045 	LATCH           F386 	LATPU           
EDEB 	LEDEC           EDF0 	LEDF1           EE1C 	LEE1D           
EEEB 	LEF0B           EEF1 	LEF11           EF0D 	LEFFA           
EA6F 	LEND1           EF13 	LF000           EF15 	LF002           
	MACRO-80 3.44	09-Dec-81	PAGE	S-1


EF28 	LF015           EF2C 	LF019           EF37 	LF024           
EF46 	LF033           EF50 	LF03D           EF81 	LF06E           
EF88 	LF075           EFA0 	LF08D           EFC1 	LF0AE           
EFDC 	LF0C9           EFE1 	LF0CE           EFE4 	LF0D1           
EFF4 	LF0E1           EFFD 	LF0EA           F023 	LF110           
F036 	LF123           F04A 	LF137           F063 	LF150           
F074 	LF161           F076 	LF163           F088 	LF175           
F0A0 	LF18D           F0D4 	LF1C1           F0D6 	LF1C3           
F0DB 	LF1C8           F0E0 	LF1CD           F0E8 	LF1D5           
F0FA 	LF1E7           F111 	LF1FE           F11A 	LF207           
F13A 	LF227           F13F 	LF22C           F143 	LF230           
F146 	LF233           F149 	LF236           F15A 	LF247           
F15E 	LF24B           F162 	LF24F           F173 	LF260           
F198 	LF285           F1BA 	LF2A7           F1BC 	LF2A9           
F1C7 	LF2B4           F1D0 	LF2BD           F1DC 	LF2C9           
F21B 	LF307           F22C 	LF318           F233 	LF31F           
F25F 	LF34B           F271 	LF35D           F275 	LF361           
F27A 	LF366           F28A 	LF376           EA59 	LIST            
ED84 	LISTST          EF0C 	LOAD            F324 	LOADSP          
0004 	LWBYTE          0272 	MBEEP           E95D 	MOD1            
F182 	MODE0           F188 	MODE1           0DF9 	MV24A           
E643 	NDISK           0066 	NMI             F36A 	OLDNMI          
07EE 	OUTHEX          07F1 	OUTHL           E9ED 	OUTTXT          
0000 	P00             0001 	P01             0002 	P02             
0003 	P03             0004 	P04             0005 	P05             
0006 	P06             0011 	P11             001E 	P1E             
008A 	P8A             008B 	P8B             008C 	P8C             
008D 	P8D             008E 	P8E             008F 	P8F             
00E5 	PE5             00E6 	PE6             00E7 	PE7             
00F0 	PF0             E9E6 	PIO1TAB         E9EB 	PIOTAB          
E992 	PRELL1          E9CD 	PRELL2          EA75 	PUNCH           
F352 	RAFSEC          F351 	RAFTRK          0001 	RD512           
EE2A 	RDERR           EECF 	RDERRO          EE84 	RDFOR1          
EE45 	RDFORM          EDC4 	READ            05CE 	REGIST          
EE3A 	RFLERR          01A5 	RSA             0038 	RST38           
F175 	RW              F17C 	RW01            F184 	RW02            
EC50 	SCR11           EC62 	SCR12           EC26 	SCROL           
F38B 	SECTOR          EDB8 	SECTRN          ED87 	SELDSK          
EDB3 	SETDMA          EDAE 	SETSEC          EDA9 	SETTRK          
F364 	SPCIN           F366 	SPCOUT          F368 	SPLOAD          
F35E 	STZ00           F35F 	STZ01           F360 	STZ02           
E9EF 	TEXT1           E9FA 	TEXT2           EE37 	TEXTOK          
F389 	TRACK           E77D 	TXT01           EE2D 	TXTINI          
0043 	WAIT            0000 	WARMBT          E8D6 	WBOOT           
E8F4 	WBOOT1          E603 	WBOOTB          EEA0 	WRCCP           
EEB1 	WRCCP1          EEBA 	WRCCP2          EDC9 	WRITE           
FFD0 	ZEIPUF          



No Fatal error(s)


