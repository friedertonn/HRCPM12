	MACRO-80 3.44	09-Dec-81	PAGE	1


                                ; ***********************************************************
                                ; *                                                         *
                                ; *  HRCPM12-BIOS fuer den AC 1     Version vom 20.09.2021  *
                                ; *                                                         *
                                ; ***********************************************************
                                ;
                                        IF1
                                        .PRINTX 'PASS 1'
                                        ENDIF
                                ;
                                        IF2
                                        .PRINTX 'PASS 2'
                                        ENDIF
                                ;
                                        .CREF
                                        .Z80
                                ;
                                        .PHASE 0E600H
                                ;
  B000                          HPRDSK  EQU  0B000H       ;Hilfsprogramm: Format RAM-Disk
  D000                          EQUCCP  EQU  0D000H       ;Start CCP
                                ;
  00E5                          PE5     EQU  0E5H         ;RAM-Disk Extended-Adresse
  00E6                          PE6     EQU  0E6H         ;RAM-Disk H-Adresse
  00E7                          PE7     EQU  0E7H         ;RAM-Disk L-Adresse
                                ;
  0040                          CFDC    EQU  40H          ;Hauptstatusregister FDC
  0041                          DFDC    EQU  41H          ;Datenport FDC
  0043                          WAIT    EQU  43H          ;IO-Adr. /WAIT Monoflop
  0045                          LATCH   EQU  45H          ;IO-Adr. Latch 74LS175
                                ;
  E600    C3 E83F                       JP   BOOT
  E603    C3 E8D5                       JP   WBOOT
  E606    C3 EA2C                       JP   CONST
  E609    C3 EA34                       JP   CONIN
  E60C    C3 EA94                       JP   CONOUT
  E60F    C3 EA92                       JP   LIST
  E612    C3 EA93                       JP   PUNCH
  E615    C3 EA34                       JP   CONIN        ;eigentlich JP READER
  E618    C3 EDA7                       JP   HOME
  E61B    C3 ED88                       JP   SELDSK
  E61E    C3 EDAA                       JP   SETTRK
  E621    C3 EDAF                       JP   SETSEC
  E624    C3 EDB4                       JP   SETDMA
  E627    C3 EDC5                       JP   READ
  E62A    C3 EDCA                       JP   WRITE
  E62D    C3 ED85                       JP   LISTST
  E630    C3 EDB9                       JP   SECTRN
                                ;
  E633    43 38 35 41                   DEFM 'C85AC'      ;fuer PC/BC Progr.
  E637    43                    
  E638    C3 E98C                       JP   EXIT         ;User-Kommando EXIT
  E63B    C3 EF66                       JP   LOAD         ;User-Kommando LOAD
  E63E    C3 0000                       JP   0000H
                                ;
  E641    D000                  CCP:    DEFW 0D000H       ;Start CCP
                                ;
  E643    07                    NDISK:  DEFB 7            ;Anzahl der LW = 7
                                ;
  E644    E646                  DPHX:   DEFW DPHY         ;Zeiger auf den 1. Block?
  E646    E654                  DPHY:   DEFW DPH0         ;DPH von LW A:
  E648    E664                          DEFW DPH1         ;DPH von LW B:
	MACRO-80 3.44	09-Dec-81	PAGE	1-1


  E64A    E674                          DEFW DPH2         ;DPH von LW C:
  E64C    E684                          DEFW DPH3         ;DPH von LW D:
  E64E    E694                          DEFW DPH4         ;DPH von LW E:
  E650    E6A4                          DEFW DPH5         ;DPH von LW F:
  E652    E6B4                          DEFW DPH6         ;DPH von LW G:
                                ;
  E654    0000                  DPH0:   DEFW 0            ;RAM-Disk A:
  E656    0000                          DEFW 0
  E658    0000                          DEFW 0
  E65A    0000                          DEFW 0
  E65C    F91F                          DEFW DIRBF
  E65E    E6C6                          DEFW DPB0
  E660    FE2D                          DEFW CHK00
  E662    FF00                          DEFW ALL00
                                ;
  E664    0000                  DPH1:   DEFW 0            ;Floppy B:
  E666    0000                          DEFW 0
  E668    0000                          DEFW 0
  E66A    0000                          DEFW 0
  E66C    F91F                          DEFW DIRBF
  E66E    E6D7                          DEFW DPB1
  E670    FE2D                          DEFW CHK00
  E672    F99F                          DEFW ALL01
                                ;
  E674    0000                  DPH2:   DEFW 0            ;GIDE C:
  E676    0000                          DEFW 0
  E678    0000                          DEFW 0
  E67A    0000                          DEFW 0
  E67C    F91F                          DEFW DIRBF
  E67E    E6F3                          DEFW DPB2
  E680    FE4D                          DEFW CHK02
  E682    F9D1                          DEFW ALL02
                                ;
  E684    0000                  DPH3:   DEFW 0            ;GIDE D:
  E686    0000                          DEFW 0
  E688    0000                          DEFW 0
  E68A    0000                          DEFW 0
  E68C    F91F                          DEFW DIRBF
  E68E    E70F                          DEFW DPB3
  E690    FE4D                          DEFW CHK02
  E692    FBC9                          DEFW ALL03
                                ;
  E694    0000                  DPH4:   DEFW 0            ;GIDE E:
  E696    0000                          DEFW 0
  E698    0000                          DEFW 0
  E69A    0000                          DEFW 0
  E69C    F91F                          DEFW DIRBF
  E69E    E72B                          DEFW DPB4
  E6A0    FE4D                          DEFW CHK02
  E6A2    FCC9                          DEFW ALL04
                                ;
  E6A4    0000                  DPH5:   DEFW 0            ;Floppy F:
  E6A6    0000                          DEFW 0
  E6A8    0000                          DEFW 0
  E6AA    0000                          DEFW 0
  E6AC    F91F                          DEFW DIRBF
  E6AE    E747                          DEFW DPB5
  E6B0    FE4D                          DEFW CHK02
  E6B2    FDC9                          DEFW ALL05
                                ;
  E6B4    0000                  DPH6:   DEFW 0            ;Floppy G:
  E6B6    0000                          DEFW 0
	MACRO-80 3.44	09-Dec-81	PAGE	1-2


  E6B8    0000                          DEFW 0
  E6BA    0000                          DEFW 0
  E6BC    F91F                          DEFW DIRBF
  E6BE    E763                          DEFW DPB6
  E6C0    FE6D                          DEFW CHK06
  E6C2    FDFB                          DEFW ALL06
                                ;
                                ; https://hc-ddr.hucki.net/wiki/doku.php/cpm/write_a_bios/teil_1
                                ;
  E6C4    EDF1                          DEFW LEDF1        ;???
                                ;
  E6C6    0080                  DPB0:   DEFW 128          ;128 Sectoren/Track (Rec/Trk) = 16k/Trk
  E6C8    04                            DEFB 4            ;Blockgroesse = 2 Kbyte
  E6C9    0F                            DEFB 15
  E6CA    00                            DEFB 0            ;16Bit Blockadressen im FCB/DIR
  E6CB    01F7                          DEFW 503          ;504 * 2 Kbyte - Bloecke
  E6CD    003F                          DEFW 63           ;64 DIR - Eintaege
  E6CF    0080                          DEFW 080H         ;1 DIR-Block
  E6D1    0000                          DEFW 0            ;weil nichtwechselbares Medium
  E6D3    0001                          DEFW 1            ;16 Kbyte System
                                ;
  E6D5    F019                          DEFW LF019        ;???
                                ;
  E6D7    0050                  DPB1:   DEFW 80           ;80 Sectoren/Track
  E6D9    04                            DEFB 4            ;Blockgroesse = 2 Kbyte
  E6DA    0F                            DEFB 15
  E6DB    00                            DEFB 0
  E6DC    0185                          DEFW 389          ;390 * 2 Kbyte - Bloecke
  E6DE    007F                          DEFW 127          ;128 DIR - Eintraege
  E6E0    00C0                          DEFW 0C0H         ;2 DIR-Bloecke
  E6E2    0020                          DEFW 32
  E6E4    0002                          DEFW 2            ;20 Kbyte System
                                ;
  E6E6    03 07 05 25                   DEFB 3,7,5,25H
  E6EA    50 00 43 FF                   DEFB 50H,0,43H,0FFH
  E6EE    E1 33 FF                      DEFB 0E1H,33H,0FFH
                                ;
  E6F1    F015                          DEFW LF015        ;???
                                ;
  E6F3    0800                  DPB2:   DEFW 0800H        ;2048 Records/Track = 256k/Trk
  E6F5    05                            DEFB 5
  E6F6    1F                            DEFB 1FH          ;4k Bloecke
  E6F7    01                            DEFB 1            ;16Bit Blockadressen im FCB/DIR
  E6F8    0FBF                          DEFW 0FBFH        ;4032 * 4k-Bloecke = 16128k
  E6FA    07FF                          DEFW 07FFH        ;2048 DIR-Eintraege
  E6FC    FFFF                          DEFW 0FFFFH       ;16 DIR-Bloecke
  E6FE    0000                          DEFW 0            ;weil nichtwechselbares Medium
  E700    0001                          DEFW 1            ;1 Trk = 256k System
                                ;
  E702    02 03 A0 0A                   DEFB 2,3,0A0H,0AH
  E706    00 40 00 D8                   DEFB 0,40H,0,0D8H
  E70A    03 10 20                      DEFB 3,10H,20H
                                ;
  E70D    F015                          DEFW LF015        ;???
                                ;
  E70F    0800                  DPB3:   DEFW 0800H        ;2048 Records/Track = 256k/Trk
  E711    06                            DEFB 6
  E712    3F                            DEFB 3FH          ;8k Bloecke
  E713    03                            DEFB 3            ;16Bit Blockadressen im FCB/DIR
  E714    07FF                          DEFW 07FFH        ;2048 * 8k-Bloecke = 16384k = 16M
  E716    0FFF                          DEFW 0FFFH        ;4096 DIR-Eintraege
  E718    FFFF                          DEFW 0FFFFH       ;16 DIR-Bloecke
	MACRO-80 3.44	09-Dec-81	PAGE	1-3


  E71A    0000                          DEFW 0            ;weil nichtwechselbares Medium
  E71C    0000                          DEFW 0            ;kein System-Track
                                ;
  E71E    02 03 A0 96                   DEFB 2,3,0A0H,96H
  E722    00 40 00 D8                   DEFB 0,40H,0,0D8H
  E726    03 10 20                      DEFB 3,10H,20H
                                ;
  E729    F015                          DEFW LF015        ;???
                                ;
  E72B    0800                  DPB4:   DEFW 0800H        ;2048 Records/Track = 256k/Trk
  E72D    06                            DEFB 6
  E72E    3F                            DEFB 3FH          ;8k Bloecke
  E72F    03                            DEFB 3            ;16Bit Blockadressen im FCB/DIR
  E730    07FF                          DEFW 07FFH        ;2048 * 8k-Bloecke = 16384k = 16M
  E732    0FFF                          DEFW 0FFFH        ;4096 DIR-Eintraege
  E734    FFFF                          DEFW 0FFFFH       ;16 DIR-Bloecke
  E736    0000                          DEFW 0            ;weil nichtwechselbares Medium
  E738    0000                          DEFW 0            ;kein System-Track
                                ;
  E73A    02 03 A0 2C                   DEFB 2,3,0A0H,2CH
  E73E    01 40 00 D8                   DEFB 1,40H,0,0D8H
  E742    03 10 20                      DEFB 3,10H,20H
                                ;
  E745    F019                          DEFW LF019        ;???
                                ;
  E747    0040                  DPB5:   DEFW 64           ;64 Sectoren/Track
  E749    04                            DEFB 4            ;Blockgroesse = 2 Kbyte
  E74A    0F                            DEFB 15
  E74B    00                            DEFB 0
  E74C    013F                          DEFW 319          ;320 * 2 Kbyte - Bloecke
  E74E    007F                          DEFW 127          ;128 DIR - Eintraege
  E750    00C0                          DEFW 0C0H         ;2 DIR-Bloecke
  E752    0020                          DEFW 32
  E754    0000                          DEFW 0            ;kein System-Track
                                ;
  E756    01 01 10 14                   DEFB 1,1,10H,14H
  E75A    50 00 43 FF                   DEFB 50H,0,43H,0FFH
  E75E    E1 33 FF                      DEFB 0E1H,33H,0FFH
                                ;
  E761    F019                          DEFW LF019        ;???
                                ;
  E763    0050                  DPB6:   DEFW 80           ;80 Sectoren/Track
  E765    04                            DEFB 4            ;Blockgroesse = 2 Kbyte
  E766    0F                            DEFB 15
  E767    00                            DEFB 0
  E768    018F                          DEFW 399          ;400 * 2 Kbyte - Bloecke
  E76A    007F                          DEFW 127          ;128 DIR - Eintraege
  E76C    00C0                          DEFW 0C0H         ;2 DIR-Bloecke
  E76E    0020                          DEFW 32
  E770    0000                          DEFW 0            ;kein System-Track
                                ;
  E772    03 07 05 25                   DEFB 3,7,5,25H
  E776    50 01 43 FF                   DEFB 50H,1,43H,0FFH
  E77A    E1 33 FF                      DEFB 0E1H,33H,0FFH
                                ;
  E77D    0C                    TEXT1:  DEFB 0CH
  E77E    48 52 43 50                   DEFM "HRCPM AC1 V1.2 CPA"
  E782    4D 20 41 43           
  E786    31 20 56 31           
  E78A    2E 32 20 43           
  E78E    50 41                 
  E790    32 34 2E 30                   DEFM "24.08.86 FA-MODE "
	MACRO-80 3.44	09-Dec-81	PAGE	1-4


  E794    38 2E 38 36           
  E798    20 46 41 2D           
  E79C    4D 4F 44 45           
  E7A0    20                    
  E7A1    43 6F 6E 49                   DEFM "ConIn INT"
  E7A5    6E 20 49 4E           
  E7A9    54                    
  E7AA    0F                            DEFB 0FH
  E7AB    20 53 74 61                   DEFM " Stand 03.12.11"
  E7AF    6E 64 20 30           
  E7B3    33 2E 31 32           
  E7B7    2E 31 31              
  E7BA    0D 0A 0D 0A                   DEFB 0DH,0AH,0DH,0AH
  E7BE    47 49 44 45                   DEFM "GIDE(80H) C0:16MB,"
  E7C2    28 38 30 48           
  E7C6    29 20 43 30           
  E7CA    3A 31 36 4D           
  E7CE    42 2C                 
  E7D0    20 20 44 30                   DEFM "  D0: 16MB  E0: 16MB"
  E7D4    3A 20 31 36           
  E7D8    4D 42 20 20           
  E7DC    45 30 3A 20           
  E7E0    31 36 4D 42           
  E7E4    0D 0A                 		DEFB 0DH,0AH
  E7E6    46 44 43 20                   DEFM "FDC (45H) B0:5*1024"
  E7EA    28 34 35 48           
  E7EE    29 20 42 30           
  E7F2    3A 35 2A 31           
  E7F6    30 32 34              
  E7F9    20 46 30 3A                   DEFM " F0:16*256 G1:5*1024"
  E7FD    31 36 2A 32           
  E801    35 36 20 47           
  E805    31 3A 35 2A           
  E809    31 30 32 34           
  E80D    0D 0A 0D 0A                   DEFB 0DH,0AH,0DH,0AH
  E811    52 46 4C 20                   DEFM "RFL Praeci.Port E0H"
  E815    50 72 61 65           
  E819    63 69 2E 50           
  E81D    6F 72 74 20           
  E821    45 30 48              
  E824    20 41 3A 20                   DEFM " A: 1024k -->"
  E828    31 30 32 34           
  E82C    6B 20 2D 2D           
  E830    3E                    
  E831    46 6F 72 6D                   DEFM "Format A:(J)?"
  E835    61 74 20 41           
  E839    3A 28 4A 29           
  E83D    3F                    
  E83E    00                    		DEFB 0
                                ;
  E83F    F3                    BOOT:   DI
  E840    31 F4C1                       LD   SP,0F4C1H
  E843    AF                            XOR  A
  E844    32 F4FA                       LD   (LATPU),A    ;FDC-Latch zuruecksetzen
  E847    3E 82                         LD   A,82H
  E849    32 F4CD                       LD   (DF4CD),A
  E84C    3E 20                         LD   A,20H
  E84E    32 F4CE                       LD   (DF4CE),A
  E851    CD ED50                       CALL LED50
  E854    DB 05                         IN   A,(P05)
  E856    CB 9F                         RES  3,A
  E858    D3 05                         OUT  (P05),A
	MACRO-80 3.44	09-Dec-81	PAGE	1-5


  E85A    2A 1818                       LD   HL,(D1818)
  E85D    22 F4DE                       LD   (DF4DE),HL
  E860    21 E603                       LD   HL,0E603H
  E863    22 1818                       LD   (D1818),HL
  E866    CD E957                       CALL LE957
  E869    AF                            XOR  A
  E86A    32 F51A                       LD   (DF51A),A
  E86D    32 0003                       LD   (D0003),A
  E870    32 0004                       LD   (D0004),A
  E873    32 FFD0                       LD   (DFFD0),A
  E876    CD E92D                       CALL LE92D
  E879    3E 03                         LD   A,03H
  E87B    D3 00                         OUT  (P00),A
  E87D    D3 01                         OUT  (P01),A
  E87F    D3 02                         OUT  (P02),A
  E881    D3 03                         OUT  (P03),A
  E883    3E FF                         LD   A,0FFH
  E885    ED 47                         LD   I,A
  E887    ED 5E                         IM   2
  E889    21 F304                       LD   HL,0F304H
  E88C    22 FF80                       LD   (DFF80),HL
  E88F    22 FF82                       LD   (DFF82),HL
  E892    22 FF84                       LD   (DFF84),HL
  E895    22 FF82                       LD   (DFF82),HL
  E898    21 F2EA                       LD   HL,0F2EAH
  E89B    22 FF86                       LD   (DFF86),HL
  E89E    3E 80                         LD   A,80H
  E8A0    D3 00                         OUT  (P00),A
  E8A2    3E FF                         LD   A,0FFH
  E8A4    32 F4F9                       LD   (DF4F9),A
  E8A7    3E A7                         LD   A,0A7H
  E8A9    D3 03                         OUT  (P03),A
  E8AB    AF                            XOR  A
  E8AC    D3 03                         OUT  (P03),A
  E8AE    21 E9B2                       LD   HL,0E9B2H
  E8B1    22 FF88                       LD   (DFF88),HL
  E8B4    21 EA05                       LD   HL,0EA05H
  E8B7    22 FF8A                       LD   (DFF8A),HL
  E8BA    01 0506                       LD   BC,0506H
  E8BD    21 EA13                       LD   HL,0EA13H
  E8C0    ED B3                         OTIR
  E8C2    21 E77D                       LD   HL,TEXT1
  E8C5    CD EA1A                       CALL OUTTXT
  E8C8    FB                            EI
  E8C9    CD EA34                       CALL CONIN
  E8CC    CB AF                         RES  5,A          ;Grossbuchstaben
  E8CE    FE 4A                         CP   4AH          ;J --> RAM-Disk formatieren
  E8D0    CC EE65                       CALL Z,RDFORM
  E8D3    18 1E                         JR   WBOOT1
                                ;
  E8D5    31 F4C1               WBOOT:  LD   SP,0F4C1H
  E8D8    CD E957                       CALL LE957
  E8DB    3A F51B                       LD   A,(DF51B)
  E8DE    B7                            OR   A
  E8DF    C4 F0CE                       CALL NZ,LF0CE
  E8E2    06 2C                         LD   B,2CH
  E8E4    21 EDC5                       LD   HL,READ
  E8E7    22 EEDA                       LD   (DEEDA),HL
  E8EA    CD EEC0                       CALL WRCCP
  E8ED    21 EDCA                       LD   HL,WRITE
  E8F0    22 EEDA                       LD   (DEEDA),HL
  E8F3    CD E92D               WBOOT1: CALL LE92D
	MACRO-80 3.44	09-Dec-81	PAGE	1-6


  E8F6    3E 01                         LD   A,01H
  E8F8    32 F4CD                       LD   (DF4CD),A
  E8FB    3A F4D5                       LD   A,(DF4D5)
  E8FE    32 F4D3                       LD   (DF4D3),A
  E901    E6 77                         AND  77H
  E903    32 F4D4                       LD   (DF4D4),A
  E906    3A 0004                       LD   A,(D0004)
  E909    E6 1F                         AND  1FH
  E90B    4F                            LD   C,A
  E90C    CD ED88                       CALL SELDSK
  E90F    2A E641                       LD   HL,(CCP)
  E912    E9                            JP   (HL)         ;JP CCP
                                ;
  E913    F5                    LE913:  PUSH AF
  E914    E5                            PUSH HL
  E915    CD E990                       CALL LE990
  E918    DF                            RST  18H
  E919    20 43 50                      DEFM " CP"
  E91C    CD                            DEFB 4DH+80H      ;"M+80H
  E91D    E1                            POP  HL
  E91E    F1                            POP  AF
  E91F    CD 01A5                       CALL L01A5
  E922    E1                            POP  HL
  E923    2B                            DEC  HL
  E924    CD 07F1                       CALL L07F1
  E927    DF                            RST  18H
  E928    8D                            DEFB 0DH+80H
  E929    CD 05CE                       CALL L05CE
  E92C    FF                            RST  38H
  E92D    3E C3                 LE92D:  LD   A,0C3H
  E92F    32 0000                       LD   (D0000),A
  E932    32 0005                       LD   (D0005),A
  E935    32 0038                       LD   (D0038),A
  E938    32 0066                       LD   (D0066),A
  E93B    21 E603                       LD   HL,0E603H
  E93E    22 0001                       LD   (D0001),HL
  E941    22 0067                       LD   (D0067),HL
  E944    21 D806                       LD   HL,0D806H
  E947    22 0006                       LD   (D0006),HL
  E94A    21 E913                       LD   HL,0E913H
  E94D    22 0039                       LD   (D0039),HL
  E950    21 0080                       LD   HL,0080H
  E953    22 F501                       LD   (DMA),HL
  E956    C9                            RET
                                ;
  E957    F5                    LE957:  PUSH AF
  E958    3E 01                         LD   A,01H
  E95A    18 02                         JR   LE95E
                                ;
  E95C    F5                    LE95C:  PUSH AF
  E95D    AF                            XOR  A
  E95E    D3 1E                 LE95E:  OUT  (P1E),A
  E960    F1                            POP  AF
  E961    C9                            RET
                                ;
  E962    01 FFFF               LE962:  LD   BC,0FFFFH
  E965    1A                    LE965:  LD   A,(DE)
  E966    A8                            XOR  B
  E967    47                            LD   B,A
  E968    0F                            RRCA
  E969    0F                            RRCA
  E96A    0F                            RRCA
	MACRO-80 3.44	09-Dec-81	PAGE	1-7


  E96B    0F                            RRCA
  E96C    E6 0F                         AND  0FH
  E96E    A8                            XOR  B
  E96F    47                            LD   B,A
  E970    0F                            RRCA
  E971    0F                            RRCA
  E972    0F                            RRCA
  E973    F5                            PUSH AF
  E974    E6 1F                         AND  1FH
  E976    A9                            XOR  C
  E977    4F                            LD   C,A
  E978    F1                            POP  AF
  E979    F5                            PUSH AF
  E97A    0F                            RRCA
  E97B    E6 F0                         AND  0F0H
  E97D    A9                            XOR  C
  E97E    4F                            LD   C,A
  E97F    F1                            POP  AF
  E980    E6 E0                         AND  0E0H
  E982    A8                            XOR  B
  E983    41                            LD   B,C
  E984    4F                            LD   C,A
  E985    13                            INC  DE
  E986    2B                            DEC  HL
  E987    7C                            LD   A,H
  E988    B5                            OR   L
  E989    20 DA                         JR   NZ,LE965
  E98B    C9                            RET
                                ;
  E98C    21 0000               EXIT:   LD   HL,0000H
  E98F    E5                            PUSH HL
  E990    3E 00                 LE990:  LD   A,00H
  E992    D3 1E                         OUT  (P1E),A
  E994    AF                            XOR  A
  E995    D3 11                         OUT  (P11),A
  E997    2A F4DE                       LD   HL,(DF4DE)
  E99A    22 1818                       LD   (D1818),HL
  E99D    3E 03                         LD   A,03H
  E99F    D3 00                         OUT  (P00),A
  E9A1    D3 01                         OUT  (P01),A
  E9A3    D3 02                         OUT  (P02),A
  E9A5    D3 03                         OUT  (P03),A
  E9A7    D3 06                         OUT  (P06),A
  E9A9    3E CF                         LD   A,0CFH
  E9AB    D3 06                         OUT  (P06),A
  E9AD    3E FF                         LD   A,0FFH
  E9AF    D3 06                         OUT  (P06),A
  E9B1    C9                            RET
                                ;Ansprung unklar
  E9B2    F3                    LE9B2:  DI
  E9B3    F5                            PUSH AF
  E9B4    C5                            PUSH BC
  E9B5    E5                            PUSH HL
  E9B6    DB 04                         IN   A,(P04)
  E9B8    CB 7F                         BIT  7,A
  E9BA    28 43                         JR   Z,LE9FF
  E9BC    4F                            LD   C,A
  E9BD    06 1E                         LD   B,1EH
  E9BF    DB 04                 LE9BF:  IN   A,(P04)
  E9C1    B9                            CP   C
  E9C2    20 3B                         JR   NZ,LE9FF
  E9C4    10 F9                         DJNZ LE9BF
	MACRO-80 3.44	09-Dec-81	PAGE	1-8


  E9C6    FE 80                         CP   80H
  E9C8    20 00                         JR   NZ,LE9CA
  E9CA    21 EA18               LE9CA:  LD   HL,0EA18H
  E9CD    01 0206                       LD   BC,0206H
  E9D0    ED B3                         OTIR
  E9D2    4F                            LD   C,A
  E9D3    21 FFD0                       LD   HL,0FFD0H
  E9D6    7E                            LD   A,(HL)
  E9D7    3C                            INC  A
  E9D8    FE 1F                         CP   1FH
  E9DA    28 23                         JR   Z,LE9FF
  E9DC    77                            LD   (HL),A
  E9DD    C5                            PUSH BC
  E9DE    4F                            LD   C,A
  E9DF    09                            ADD  HL,BC
  E9E0    C1                            POP  BC
  E9E1    CB B9                         RES  7,C
  E9E3    71                            LD   (HL),C
  E9E4    01 8034                       LD   BC,8034H
  E9E7    79                    LE9E7:  LD   A,C
  E9E8    3D                    LE9E8:  DEC  A
  E9E9    20 FD                         JR   NZ,LE9E8
  E9EB    DB 05                         IN   A,(P05)
  E9ED    EE 01                         XOR  01H
  E9EF    D3 05                         OUT  (P05),A
  E9F1    10 F4                         DJNZ LE9E7
  E9F3    E6 FE                         AND  0FEH
  E9F5    D3 05                         OUT  (P05),A
  E9F7    01 0200                       LD   BC,0200H
  E9FA    0B                    LE9FA:  DEC  BC
  E9FB    78                            LD   A,B
  E9FC    B1                            OR   C
  E9FD    20 FB                         JR   NZ,LE9FA
  E9FF    E1                    LE9FF:  POP  HL
  EA00    C1                            POP  BC
  EA01    F1                            POP  AF
  EA02    FB                            EI
  EA03    ED 4D                         RETI
                                ;Ansprung unklar
  EA05    F3                    LEA05:  DI
  EA06    F5                            PUSH AF
  EA07    C5                            PUSH BC
  EA08    E5                            PUSH HL
  EA09    21 EA13                       LD   HL,0EA13H
  EA0C    01 0506                       LD   BC,0506H
  EA0F    ED B3                         OTIR
  EA11    18 EC                         JR   LE9FF
                                ;Ansprung unklar
  EA13    88                    LEA13:  ADC  A,B
  EA14    CF                            RST  08H
  EA15    FF                            RST  38H
  EA16    B7                            OR   A
  EA17    7F                            LD   A,A
  EA18    8A                            ADC  A,D
  EA19    87                            ADD  A,A
  EA1A    C5                    OUTTXT: PUSH BC
  EA1B    F5                            PUSH AF
  EA1C    4E                    LEA1C:  LD   C,(HL)
  EA1D    79                            LD   A,C
  EA1E    B7                            OR   A
  EA1F    28 06                         JR   Z,LEA27
  EA21    CD EA94                       CALL CONOUT
	MACRO-80 3.44	09-Dec-81	PAGE	1-9


  EA24    23                            INC  HL
  EA25    18 F5                         JR   LEA1C
                                ;
  EA27    F1                    LEA27:  POP  AF
  EA28    C1                            POP  BC
  EA29    C9                            RET
                                ;Ansprung unklar
  EA2A    AF                    LEA2A:  XOR  A
  EA2B    C9                            RET
                                ;
  EA2C    3A FFD0               CONST:  LD   A,(DFFD0)
  EA2F    B7                            OR   A
  EA30    C8                            RET  Z
  EA31    3E FF                         LD   A,0FFH
  EA33    C9                            RET
                                ;
  EA34    F3                    CONIN:  DI
  EA35    ED 73 F4D8                    LD   (DF4D8),SP
  EA39    31 F442                       LD   SP,0F442H
  EA3C    C5                            PUSH BC
  EA3D    D5                            PUSH DE
  EA3E    E5                            PUSH HL
  EA3F    AF                    LEA3F:  XOR  A
  EA40    F3                            DI
  EA41    2A FFD0                       LD   HL,(DFFD0)
  EA44    B5                            OR   L
  EA45    20 19                         JR   NZ,LEA60
  EA47    FB                            EI
  EA48    10 F5                         DJNZ LEA3F
  EA4A    F3                            DI
  EA4B    D3 1E                         OUT  (P1E),A
  EA4D    2A 1800                       LD   HL,(D1800)
  EA50    0C                            INC  C
  EA51    CB 71                         BIT  6,C
  EA53    3A F4CE                       LD   A,(DF4CE)
  EA56    28 02                         JR   Z,LEA5A
  EA58    3E 0F                         LD   A,0FH
  EA5A    77                    LEA5A:  LD   (HL),A
  EA5B    CD E957                       CALL LE957
  EA5E    18 DF                         JR   LEA3F
                                ;
  EA60    3D                    LEA60:  DEC  A
  EA61    32 FFD0                       LD   (DFFD0),A
  EA64    7C                            LD   A,H
  EA65    21 FFD2                       LD   HL,0FFD2H
  EA68    11 FFD1                       LD   DE,0FFD1H
  EA6B    01 001F                       LD   BC,001FH
  EA6E    ED B0                         LDIR
  EA70    CD EA7C                       CALL LEA7C
  EA73    E1                            POP  HL
  EA74    D1                            POP  DE
  EA75    C1                            POP  BC
  EA76    ED 7B F4D8                    LD   SP,(DF4D8)
  EA7A    FB                            EI
  EA7B    C9                            RET
                                ;
  EA7C    FE 41                 LEA7C:  CP   41H
  EA7E    D8                            RET  C
  EA7F    D0                            RET  NC
  EA80    FE 5F                         CP   5FH
  EA82    28 0B                         JR   Z,LEA8F
  EA84    C9                            RET
	MACRO-80 3.44	09-Dec-81	PAGE	1-10


                                ;Ansprung unklar
  EA85    FE 5E                 LEA85:  CP   5EH
  EA87    38 06                         JR   C,LEA8F
  EA89    FE 61                         CP   61H
  EA8B    D8                            RET  C
  EA8C    FE 7E                         CP   7EH
  EA8E    D0                            RET  NC
  EA8F    EE 20                 LEA8F:  XOR  20H
  EA91    C9                            RET
                                ;
  EA92    C9                    LIST:   RET
                                ;
  EA93    C9                    PUNCH:  RET
                                ;
  EA94    F3                    CONOUT: DI
  EA95    ED 73 F4DA                    LD   (DF4DA),SP
  EA99    31 F468                       LD   SP,0F468H
  EA9C    F5                            PUSH AF
  EA9D    C5                            PUSH BC
  EA9E    D5                            PUSH DE
  EA9F    E5                            PUSH HL
  EAA0    CD E95C                       CALL LE95C
  EAA3    E5                            PUSH HL
  EAA4    2A 1800                       LD   HL,(D1800)
  EAA7    3A F4D2                       LD   A,(DF4D2)
  EAAA    77                            LD   (HL),A
  EAAB    3A F4CF                       LD   A,(DF4CF)
  EAAE    A7                            AND  A
  EAAF    C2 ECBE                       JP   NZ,LECBE
  EAB2    79                            LD   A,C
  EAB3    FE 20                         CP   20H
  EAB5    38 27                         JR   C,LEADE
  EAB7    FE 7F                         CP   7FH
  EAB9    30 23                         JR   NC,LEADE
  EABB    2A 1800                       LD   HL,(D1800)
  EABE    C3 EC22                       JP   LEC22
                                ;
  EAC1    2A 1800               LEAC1:  LD   HL,(D1800)
  EAC4    7E                            LD   A,(HL)
  EAC5    32 F4D2                       LD   (DF4D2),A
  EAC8    3A F4CD                       LD   A,(DF4CD)
  EACB    FE 01                         CP   01H
  EACD    20 02                         JR   NZ,LEAD1
  EACF    36 0F                         LD   (HL),0FH
  EAD1    CD E957               LEAD1:  CALL LE957
  EAD4    E1                            POP  HL
  EAD5    D1                            POP  DE
  EAD6    C1                            POP  BC
  EAD7    F1                            POP  AF
  EAD8    ED 7B F4DA                    LD   SP,(DF4DA)
  EADC    FB                            EI
  EADD    C9                            RET
                                ;
  EADE    FE 1B                 LEADE:  CP   1BH
  EAE0    20 07                         JR   NZ,LEAE9
  EAE2    3E 02                         LD   A,02H
  EAE4    32 F4CF                       LD   (DF4CF),A
  EAE7    18 D8                         JR   LEAC1
                                ;
  EAE9    2A 1800               LEAE9:  LD   HL,(D1800)
  EAEC    FE 01                         CP   01H
  EAEE    28 60                         JR   Z,LEB50
	MACRO-80 3.44	09-Dec-81	PAGE	1-11


  EAF0    FE 08                         CP   08H
  EAF2    CA EB78                       JP   Z,LEB78
  EAF5    FE 0A                         CP   0AH
  EAF7    CA EB7C                       JP   Z,LEB7C
  EAFA    FE 0C                         CP   0CH
  EAFC    28 5B                         JR   Z,LEB59
  EAFE    FE 0D                         CP   0DH
  EB00    CA EB94                       JP   Z,LEB94
  EB03    FE 14                         CP   14H
  EB05    CA EB9B                       JP   Z,LEB9B
  EB08    FE 15                         CP   15H
  EB0A    CA EBBE                       JP   Z,LEBBE
  EB0D    FE 16                         CP   16H
  EB0F    CA EBC2                       JP   Z,LEBC2
  EB12    FE 18                         CP   18H
  EB14    CA EBE9                       JP   Z,LEBE9
  EB17    FE 1A                         CP   1AH
  EB19    CA EC12                       JP   Z,LEC12
  EB1C    47                            LD   B,A
  EB1D    3A F4D3                       LD   A,(DF4D3)
  EB20    A7                            AND  A
  EB21    CA EAC1                       JP   Z,LEAC1
  EB24    78                            LD   A,B
  EB25    FE 02                         CP   02H
  EB27    CA ECAF                       JP   Z,LECAF
  EB2A    FE 82                         CP   82H
  EB2C    CA ECAF                       JP   Z,LECAF
  EB2F    FE 03                         CP   03H
  EB31    CA ECB7                       JP   Z,LECB7
  EB34    FE 83                         CP   83H
  EB36    CA ECB7                       JP   Z,LECB7
  EB39    FE 84                         CP   84H
  EB3B    CA EC74                       JP   Z,LEC74
  EB3E    FE 85                         CP   85H
  EB40    CA EC82                       JP   Z,LEC82
  EB43    FE 86                         CP   86H
  EB45    CA EC91                       JP   Z,LEC91
  EB48    FE 87                         CP   87H
  EB4A    CA EC9E                       JP   Z,LEC9E
  EB4D    C3 EAC1                       JP   LEAC1
                                ;
  EB50    21 17FF               LEB50:  LD   HL,17FFH
  EB53    22 1800                       LD   (D1800),HL
  EB56    C3 EAC1                       JP   LEAC1
                                ;
  EB59    3E 20                 LEB59:  LD   A,20H
  EB5B    CD EB85                       CALL LEB85
  EB5E    22 1800                       LD   (D1800),HL
  EB61    3A F4D3                       LD   A,(DF4D3)
  EB64    E6 77                         AND  77H
  EB66    CA EAC1                       JP   Z,LEAC1
  EB69    CD ED41                       CALL LED41
  EB6C    3A F4D3                       LD   A,(DF4D3)
  EB6F    CD EB85                       CALL LEB85
  EB72    CD ED47                       CALL LED47
  EB75    C3 EAC1                       JP   LEAC1
                                ;
  EB78    23                    LEB78:  INC  HL
  EB79    C3 EC16                       JP   LEC16
                                ;
  EB7C    11 0040               LEB7C:  LD   DE,0040H
  EB7F    A7                            AND  A
	MACRO-80 3.44	09-Dec-81	PAGE	1-12


  EB80    ED 52                         SBC  HL,DE
  EB82    C3 EC33                       JP   LEC33
                                ;
  EB85    21 1000               LEB85:  LD   HL,1000H
  EB88    77                            LD   (HL),A
  EB89    54                            LD   D,H
  EB8A    5D                            LD   E,L
  EB8B    1C                            INC  E
  EB8C    C5                            PUSH BC
  EB8D    01 07FF                       LD   BC,07FFH
  EB90    ED B0                         LDIR
  EB92    C1                            POP  BC
  EB93    C9                            RET
                                ;
  EB94    7D                    LEB94:  LD   A,L
  EB95    F6 3F                         OR   3FH
  EB97    6F                            LD   L,A
  EB98    C3 EC33                       JP   LEC33
                                ;
  EB9B    E5                    LEB9B:  PUSH HL
  EB9C    3E 0F                         LD   A,0FH
  EB9E    36 20                 LEB9E:  LD   (HL),20H
  EBA0    2B                            DEC  HL
  EBA1    BC                            CP   H
  EBA2    20 FA                         JR   NZ,LEB9E
  EBA4    E1                            POP  HL
  EBA5    3A F4D3                       LD   A,(DF4D3)
  EBA8    47                            LD   B,A
  EBA9    E6 77                         AND  77H
  EBAB    CA EAC1                       JP   Z,LEAC1
  EBAE    CD ED41                       CALL LED41
  EBB1    3E 0F                         LD   A,0FH
  EBB3    70                    LEBB3:  LD   (HL),B
  EBB4    2B                            DEC  HL
  EBB5    BC                            CP   H
  EBB6    20 FB                         JR   NZ,LEBB3
  EBB8    CD ED47                       CALL LED47
  EBBB    C3 EAC1                       JP   LEAC1
                                ;
  EBBE    2B                    LEBBE:  DEC  HL
  EBBF    C3 EC33                       JP   LEC33
                                ;
  EBC2    E5                    LEBC2:  PUSH HL
  EBC3    7D                            LD   A,L
  EBC4    E6 3F                         AND  3FH
  EBC6    47                            LD   B,A
  EBC7    04                            INC  B
  EBC8    36 20                 LEBC8:  LD   (HL),20H
  EBCA    2B                            DEC  HL
  EBCB    10 FB                         DJNZ LEBC8
  EBCD    E1                            POP  HL
  EBCE    3A F4D3                       LD   A,(DF4D3)
  EBD1    4F                            LD   C,A
  EBD2    E6 77                         AND  77H
  EBD4    CA EAC1                       JP   Z,LEAC1
  EBD7    CD ED41                       CALL LED41
  EBDA    7D                            LD   A,L
  EBDB    E6 3F                         AND  3FH
  EBDD    47                            LD   B,A
  EBDE    04                            INC  B
  EBDF    71                    LEBDF:  LD   (HL),C
  EBE0    2B                            DEC  HL
	MACRO-80 3.44	09-Dec-81	PAGE	1-13


  EBE1    10 FC                         DJNZ LEBDF
  EBE3    CD ED47                       CALL LED47
  EBE6    C3 EAC1                       JP   LEAC1
                                ;
  EBE9    E5                    LEBE9:  PUSH HL
  EBEA    7D                            LD   A,L
  EBEB    F6 3F                         OR   3FH
  EBED    6F                            LD   L,A
  EBEE    22 1800                       LD   (D1800),HL
  EBF1    E5                            PUSH HL
  EBF2    06 40                         LD   B,40H
  EBF4    36 20                 LEBF4:  LD   (HL),20H
  EBF6    2B                            DEC  HL
  EBF7    10 FB                         DJNZ LEBF4
  EBF9    E1                            POP  HL
  EBFA    3A F4D3                       LD   A,(DF4D3)
  EBFD    4F                            LD   C,A
  EBFE    E6 77                         AND  77H
  EC00    CA EAC1                       JP   Z,LEAC1
  EC03    CD ED41                       CALL LED41
  EC06    06 40                         LD   B,40H
  EC08    71                    LEC08:  LD   (HL),C
  EC09    2B                            DEC  HL
  EC0A    10 FC                         DJNZ LEC08
  EC0C    CD ED47                       CALL LED47
  EC0F    C3 EAC1                       JP   LEAC1
                                ;
  EC12    11 0040               LEC12:  LD   DE,0040H
  EC15    19                            ADD  HL,DE
  EC16    3E 18                 LEC16:  LD   A,18H
  EC18    BC                            CP   H
  EC19    CA EAC1                       JP   Z,LEAC1
  EC1C    22 1800                       LD   (D1800),HL
  EC1F    C3 EAC1                       JP   LEAC1
                                ;
  EC22    77                    LEC22:  LD   (HL),A
  EC23    3A F4D3                       LD   A,(DF4D3)
  EC26    4F                            LD   C,A
  EC27    E6 77                         AND  77H
  EC29    28 07                         JR   Z,LEC32
  EC2B    CD ED41                       CALL LED41
  EC2E    71                            LD   (HL),C
  EC2F    CD ED47                       CALL LED47
  EC32    2B                    LEC32:  DEC  HL
  EC33    22 1800               LEC33:  LD   (D1800),HL
  EC36    EB                            EX   DE,HL
  EC37    21 0FFF                       LD   HL,0FFFH
  EC3A    A7                            AND  A
  EC3B    ED 52                         SBC  HL,DE
  EC3D    EB                            EX   DE,HL
  EC3E    DA EAC1                       JP   C,LEAC1
  EC41    3E 20                         LD   A,20H
  EC43    CD EC5D                       CALL LEC5D
  EC46    3A F4D3                       LD   A,(DF4D3)
  EC49    E6 77                         AND  77H
  EC4B    CA EAC1                       JP   Z,LEAC1
  EC4E    CD ED41                       CALL LED41
  EC51    3A F4D3                       LD   A,(DF4D3)
  EC54    CD EC5D                       CALL LEC5D
  EC57    CD ED47                       CALL LED47
  EC5A    C3 EAC1                       JP   LEAC1
                                ;
	MACRO-80 3.44	09-Dec-81	PAGE	1-14


  EC5D    21 17BF               LEC5D:  LD   HL,17BFH
  EC60    11 17FF                       LD   DE,17FFH
  EC63    01 07C0                       LD   BC,07C0H
  EC66    ED B8                         LDDR
  EC68    EB                            EX   DE,HL
  EC69    22 1800                       LD   (D1800),HL
  EC6C    23                            INC  HL
  EC6D    06 40                         LD   B,40H
  EC6F    2D                    LEC6F:  DEC  L
  EC70    77                            LD   (HL),A
  EC71    10 FC                         DJNZ LEC6F
  EC73    C9                            RET
                                ;
  EC74    3A F4D4               LEC74:  LD   A,(DF4D4)
  EC77    E6 77                         AND  77H
  EC79    32 F4D3                       LD   (DF4D3),A
  EC7C    32 F4D4                       LD   (DF4D4),A
  EC7F    C3 EAC1                       JP   LEAC1
                                ;
  EC82    3A F4D4               LEC82:  LD   A,(DF4D4)
  EC85    E6 77                         AND  77H
  EC87    0F                            RRCA
  EC88    0F                            RRCA
  EC89    0F                            RRCA
  EC8A    0F                            RRCA
  EC8B    32 F4D3                       LD   (DF4D3),A
  EC8E    C3 EAC1                       JP   LEAC1
                                ;
  EC91    3A F4D4               LEC91:  LD   A,(DF4D4)
  EC94    E6 77                         AND  77H
  EC96    F6 08                         OR   08H
  EC98    32 F4D3                       LD   (DF4D3),A
  EC9B    C3 EAC1                       JP   LEAC1
                                ;
  EC9E    3A F4D3               LEC9E:  LD   A,(DF4D3)
  ECA1    E6 77                         AND  77H
  ECA3    F6 08                         OR   08H
  ECA5    0F                            RRCA
  ECA6    0F                            RRCA
  ECA7    0F                            RRCA
  ECA8    0F                            RRCA
  ECA9    32 F4D3                       LD   (DF4D3),A
  ECAC    C3 EAC1                       JP   LEAC1
                                ;
  ECAF    3E 01                 LECAF:  LD   A,01H
  ECB1    32 F4CD                       LD   (DF4CD),A
  ECB4    C3 EAC1                       JP   LEAC1
                                ;
  ECB7    AF                    LECB7:  XOR  A
  ECB8    32 F4CD                       LD   (DF4CD),A
  ECBB    C3 EAC1                       JP   LEAC1
                                ;
  ECBE    3A F4CF               LECBE:  LD   A,(DF4CF)
  ECC1    FE 02                         CP   02H
  ECC3    20 0C                         JR   NZ,LECD1
  ECC5    79                            LD   A,C
  ECC6    32 F4D0                       LD   (DF4D0),A
  ECC9    3E 01                         LD   A,01H
  ECCB    32 F4CF                       LD   (DF4CF),A
  ECCE    C3 EAC1                       JP   LEAC1
                                ;
  ECD1    79                    LECD1:  LD   A,C
	MACRO-80 3.44	09-Dec-81	PAGE	1-15


  ECD2    32 F4D1                       LD   (DF4D1),A
  ECD5    AF                            XOR  A
  ECD6    32 F4CF                       LD   (DF4CF),A
  ECD9    21 F4D0                       LD   HL,0F4D0H
  ECDC    7E                            LD   A,(HL)
  ECDD    CB 7F                         BIT  7,A
  ECDF    28 2F                         JR   Z,LED10
  ECE1    F5                            PUSH AF
  ECE2    79                            LD   A,C
  ECE3    E6 3F                         AND  3FH
  ECE5    6F                            LD   L,A
  ECE6    F1                            POP  AF
  ECE7    E6 1F                         AND  1FH
  ECE9    16 00                         LD   D,00H
  ECEB    62                            LD   H,D
  ECEC    5F                            LD   E,A
  ECED    06 06                         LD   B,06H
  ECEF    CB 23                 LECEF:  SLA  E
  ECF1    CB 12                         RL   D
  ECF3    10 FA                         DJNZ LECEF
  ECF5    19                            ADD  HL,DE
  ECF6    EB                            EX   DE,HL
  ECF7    21 17FF                       LD   HL,17FFH
  ECFA    A7                            AND  A
  ECFB    ED 52                         SBC  HL,DE
  ECFD    E5                            PUSH HL
  ECFE    2A                            DEFB 2AH          ;LD HL,XXXX ??
  ECFF    00                            NOP
  ED00    18 3A                         JR   LED3C
                                ;Ansprung unklar
  ED02    D2 77F4               LED02:  JP   NC,L77F4
  ED05    E1                            POP  HL
  ED06    22 1800                       LD   (D1800),HL
  ED09    7E                            LD   A,(HL)
  ED0A    32 F4D2                       LD   (DF4D2),A
  ED0D    C3 EAC1                       JP   LEAC1
                                ;
  ED10    FE 5F                 LED10:  CP   5FH
  ED12    20 08                         JR   NZ,LED1C
  ED14    23                            INC  HL
  ED15    7E                            LD   A,(HL)
  ED16    2A 1800                       LD   HL,(D1800)
  ED19    C3 EC22                       JP   LEC22
                                ;
  ED1C    FE 5D                 LED1C:  CP   5DH
  ED1E    C2 EAC1                       JP   NZ,LEAC1
  ED21    3A F4D3                       LD   A,(DF4D3)
  ED24    A7                            AND  A
  ED25    CA EAC1                       JP   Z,LEAC1
  ED28    23                            INC  HL
  ED29    7E                            LD   A,(HL)
  ED2A    E6 77                         AND  77H
  ED2C    47                            LD   B,A
  ED2D    0F                            RRCA
  ED2E    0F                            RRCA
  ED2F    0F                            RRCA
  ED30    0F                            RRCA
  ED31    B8                            CP   B
  ED32    CA EAC1                       JP   Z,LEAC1
  ED35    78                            LD   A,B
  ED36    32 F4D3                       LD   (DF4D3),A
  ED39    E6 77                         AND  77H
	MACRO-80 3.44	09-Dec-81	PAGE	1-16


  ED3B    32 F4D4                       LD   (DF4D4),A
  ED3E    C3 EAC1                       JP   LEAC1
                                ;
  ED41    DB F0                 LED41:  IN   A,(PF0)
  ED43    CB D7                         SET  2,A
  ED45    18 04                         JR   LED4B
                                ;
  ED47    DB F0                 LED47:  IN   A,(PF0)
  ED49    CB 97                         RES  2,A
  ED4B    E6 07                 LED4B:  AND  07H
  ED4D    D3 F0                         OUT  (PF0),A
  ED4F    C9                            RET
                                ;
  ED50    AF                    LED50:  XOR  A
  ED51    32 F4D5                       LD   (DF4D5),A
  ED54    3A 181F                       LD   A,(D181F)
  ED57    E6 0F                         AND  0FH
  ED59    0E F0                         LD   C,0F0H
  ED5B    ED 40                         IN   B,(C)
  ED5D    04                            INC  B
  ED5E    C8                            RET  Z
  ED5F    05                            DEC  B
  ED60    50                            LD   D,B
  ED61    CB D2                         SET  2,D
  ED63    21 1000                       LD   HL,1000H
  ED66    5E                            LD   E,(HL)
  ED67    ED 51                         OUT  (C),D
  ED69    77                            LD   (HL),A
  ED6A    BE                            CP   (HL)
  ED6B    ED 41                         OUT  (C),B
  ED6D    73                            LD   (HL),E
  ED6E    C0                            RET  NZ
  ED6F    ED 51                         OUT  (C),D
  ED71    C5                            PUSH BC
  ED72    11 1001                       LD   DE,1001H
  ED75    01 07FF                       LD   BC,07FFH
  ED78    ED B0                         LDIR
  ED7A    7E                            LD   A,(HL)
  ED7B    C1                            POP  BC
  ED7C    ED 41                         OUT  (C),B
  ED7E    32 F4D5                       LD   (DF4D5),A
  ED81    C9                            RET
                                ;Ansprung unklar
  ED82    AF                    LED82:  XOR  A
  ED83    3D                            DEC  A
  ED84    C9                            RET
                                ;
  ED85    AF                    LISTST: XOR  A
  ED86    3D                            DEC  A
  ED87    C9                            RET
                                ;
  ED88    21 E643               SELDSK: LD   HL,NDISK     ;Anzahl der LW
  ED8B    79                            LD   A,C          ;C = akt. LW
  ED8C    BE                            CP   (HL)
  ED8D    21 0000                       LD   HL,0000H     ;HL=0 --> kein LW
  ED90    D0                            RET  NC           ;akt. LW >= NDISK!!!
  ED91    2A E644                       LD   HL,(DPHX)
  ED94    06 00                         LD   B,00H
  ED96    09                            ADD  HL,BC
  ED97    09                            ADD  HL,BC        ;DPHX + (2 * LW)
  ED98    5E                            LD   E,(HL)
  ED99    23                            INC  HL
	MACRO-80 3.44	09-Dec-81	PAGE	1-17


  ED9A    56                            LD   D,(HL)
  ED9B    EB                            EX   DE,HL
  ED9C    7C                            LD   A,H
  ED9D    B5                            OR   L
  ED9E    C8                            RET  Z            ;HL=0 --> kein DPB
  ED9F    79                            LD   A,C
  EDA0    32 F4FC                       LD   (DRIVE),A    ;aktives LW --> A
  EDA3    22 F503                       LD   (DPH),HL     ;zugeordneter DPH --> HL
  EDA6    C9                            RET
                                ;
  EDA7    01 0000               HOME:   LD   BC,0000H
  EDAA    ED 43 F4FD            SETTRK: LD   (TRACK),BC
  EDAE    C9                            RET
                                ;
  EDAF    ED 43 F4FF            SETSEC: LD   (SECTOR),BC
  EDB3    C9                            RET
                                ;
  EDB4    ED 43 F501            SETDMA: LD   (DMA),BC
  EDB8    C9                            RET
                                ;
  EDB9    60                    SECTRN: LD   H,B
  EDBA    69                            LD   L,C
  EDBB    7A                            LD   A,D
  EDBC    B3                            OR   E
  EDBD    C8                            RET  Z
  EDBE    EB                            EX   DE,HL
  EDBF    06 00                         LD   B,00H
  EDC1    09                            ADD  HL,BC
  EDC2    6E                            LD   L,(HL)
  EDC3    62                            LD   H,D
  EDC4    C9                            RET
                                ;
  EDC5    0E 02                 READ:   LD   C,02H
  EDC7    3E 04                         LD   A,04H
  EDC9    21                            DEFB 21H          ;LD HL,063EH mit nxt. Befehl!!!
  EDCA    3E 06                 WRITE:  LD   A,06H
  EDCC    32 F4FB                       LD   (DF4FB),A    ;hier geht es fuer READ weiter!
  EDCF    79                            LD   A,C
  EDD0    32 F51E                       LD   (DF51E),A
  EDD3    21 EDEC                       LD   HL,LEDEC
  EDD6    E5                            PUSH HL
  EDD7    2A F503                       LD   HL,(DPH)
  EDDA    11 000A                       LD   DE,000AH
  EDDD    19                            ADD  HL,DE
  EDDE    7E                            LD   A,(HL)
  EDDF    23                            INC  HL
  EDE0    66                            LD   H,(HL)
  EDE1    6F                            LD   L,A
  EDE2    2B                            DEC  HL
  EDE3    7E                            LD   A,(HL)
  EDE4    2B                            DEC  HL
  EDE5    6E                            LD   L,(HL)
  EDE6    67                            LD   H,A
  EDE7    E5                            PUSH HL
  EDE8    21 F4FB                       LD   HL,0F4FBH
  EDEB    C9                            RET
                                ;
  EDEC    B7                    LEDEC:  OR   A
  EDED    C8                            RET  Z
  EDEE    3E 01                         LD   A,01H
  EDF0    C9                            RET
                                ;
	MACRO-80 3.44	09-Dec-81	PAGE	1-18


  EDF1    4E                    LEDF1:  LD   C,(HL)
  EDF2    23                            INC  HL
  EDF3    23                            INC  HL
  EDF4    7E                            LD   A,(HL)
  EDF5    32 F4C2                       LD   (DF4C2),A
  EDF8    23                            INC  HL
  EDF9    7E                            LD   A,(HL)
  EDFA    A7                            AND  A
  EDFB    20 4D                         JR   NZ,LEE4A
  EDFD    23                            INC  HL
  EDFE    7E                            LD   A,(HL)
  EDFF    32 F4C3                       LD   (DF4C3),A
  EE02    CB 7F                         BIT  7,A
  EE04    20 44                         JR   NZ,LEE4A
  EE06    23                            INC  HL
  EE07    7E                            LD   A,(HL)
  EE08    A7                            AND  A
  EE09    20 3F                         JR   NZ,LEE4A
  EE0B    23                            INC  HL
  EE0C    23                            INC  HL
  EE0D    79                            LD   A,C
  EE0E    01 0080                       LD   BC,0080H
  EE11    FE 06                         CP   06H
  EE13    28 08                         JR   Z,LEE1D
  EE15    CD EEF8                       CALL LEEF8
  EE18    ED B2                         INIR
  EE1A    00                            NOP
  EE1B    AF                            XOR  A
  EE1C    C9                            RET
                                ;
  EE1D    21 0080               LEE1D:  LD   HL,0080H
  EE20    ED 5B F501                    LD   DE,(DMA)
  EE24    CD E962                       CALL LE962
  EE27    ED 43 F4CA                    LD   (DF4CA),BC
  EE2B    CD EEF8                       CALL LEEF8
  EE2E    ED B3                         OTIR
  EE30    00                            NOP
  EE31    CD EEF8                       CALL LEEF8
  EE34    ED B2                         INIR
  EE36    00                            NOP
  EE37    21 0080                       LD   HL,0080H
  EE3A    ED 5B F501                    LD   DE,(DMA)
  EE3E    CD E962                       CALL LE962
  EE41    2A F4CA                       LD   HL,(DF4CA)
  EE44    ED 42                         SBC  HL,BC
  EE46    20 02                         JR   NZ,LEE4A
  EE48    AF                            XOR  A
  EE49    C9                            RET
                                ;
  EE4A    3E FF                 LEE4A:  LD   A,0FFH
  EE4C    C9                            RET
                                ;
  EE4D    20 3D 3E 49           TXTINI: DEFM " =>INIT.."
  EE51    4E 49 54 2E           
  EE55    2E                    
  EE56    00                            DEFB 0
                                ;
  EE57    4F 4B                 TEXTOK: DEFM "OK"
  EE59    00                            DEFB 0
                                ;
  EE5A    52 46 4C 20           RFLERR: DEFM "RFL ERROR!"
  EE5E    45 52 52 4F           
	MACRO-80 3.44	09-Dec-81	PAGE	1-19


  EE62    52 21                 
  EE64    00                            DEFB 0
                                ;
  EE65    21 EE4D               RDFORM: LD   HL,TXTINI
  EE68    CD EA1A                       CALL OUTTXT
  EE6B    21 B002                       LD   HL,0B002H    ;Hilfsprogramm von 0B000H bis 0B800H
  EE6E    54                            LD   D,H
  EE6F    5D                            LD   E,L
  EE70    2B                            DEC  HL
  EE71    36 E0                         LD   (HL),0E0H    ;0B001H = 0E0H
  EE73    2B                            DEC  HL
  EE74    36 D3                         LD   (HL),0D3H    ;0B000H = 0D3H
  EE76    01 0200                       LD   BC,0200H
  EE79    ED B0                         LDIR              ;0D3H,0E0H von 0B000H bis 0B1FFH
  EE7B    23                            INC  HL
  EE7C    36 E1                         LD   (HL),0E1H
  EE7E    2B                            DEC  HL
  EE7F    01 0200                       LD   BC,0200H
  EE82    ED B0                         LDIR              ;0D3H,0E1H von 0B200H bis 0B3FFH
  EE84    23                            INC  HL
  EE85    36 E2                         LD   (HL),0E2H
  EE87    2B                            DEC  HL
  EE88    01 0200                       LD   BC,0200H
  EE8B    ED B0                         LDIR              ;0D3H,0E2H von 0B400H bis 0B5FFH
  EE8D    23                            INC  HL
  EE8E    36 E3                         LD   (HL),0E3H
  EE90    2B                            DEC  HL
  EE91    01 0200                       LD   BC,0200H
  EE94    ED B0                         LDIR              ;0D3H,0E3H von 0B600H bis 0B7FFH
  EE96    36 C9                         LD   (HL),0C9H    ;RET auf 0B800H
  EE98    AF                            XOR  A
  EE99    D3 E7                         OUT  (PE7),A      ;L-Adresse
  EE9B    D3 E6                         OUT  (PE6),A      ;H-Adresse
  EE9D    D3 E5                         OUT  (PE5),A      ;Extended-Adresse
  EE9F    47                            LD   B,A
  EEA0    3E E5                         LD   A,0E5H       ;RD wird mit 0E5H formatiert
  EEA2    0E E6                         LD   C,0E6H
  EEA4    CD B000               RDFOR1: CALL HPRDSK       ;Hilfsprogramm Format RAM-Disk
  EEA7    ED 41                         OUT  (C),B
  EEA9    10 F9                         DJNZ RDFOR1       ;fuer alls H-Adressen (256 Durchl.)
  EEAB    21 D000                       LD   HL,EQUCCP
  EEAE    22 F501                       LD   (DMA),HL
  EEB1    06 2C                         LD   B,2CH        ;44 Bloecke CCP+BDOS
  EEB3    CD EEC0                       CALL WRCCP
  EEB6    C2 E913                       JP   NZ,LE913
  EEB9    21 EE57                       LD   HL,TEXTOK
  EEBC    CD EA1A                       CALL OUTTXT
  EEBF    C9                            RET
                                ;
  EEC0    C5                    WRCCP:  PUSH BC           ;CCP+BDOS in Systemtrack schreiben
  EEC1    0E 00                         LD   C,00H        ;LW A:
  EEC3    CD ED88                       CALL SELDSK
  EEC6    C1                            POP  BC
  EEC7    21 0000                       LD   HL,0000H
  EECA    22 F4FD                       LD   (TRACK),HL   ;Track 0
  EECD    EB                            EX   DE,HL
  EECE    2A E641                       LD   HL,(CCP)
  EED1    ED 53 F4FF            WRCCP1: LD   (SECTOR),DE
  EED5    22 F501                       LD   (DMA),HL
  EED8    C5                            PUSH BC
  EED9    CD EDCA                       CALL WRITE
  EEDC    C1                            POP  BC
	MACRO-80 3.44	09-Dec-81	PAGE	1-20


  EEDD    20 10                         JR   NZ,RDERRO
  EEDF    2A F501                       LD   HL,(DMA)
  EEE2    11 0080                       LD   DE,0080H
  EEE5    19                            ADD  HL,DE
  EEE6    ED 5B F4FF                    LD   DE,(SECTOR)
  EEEA    13                            INC  DE
  EEEB    10 E4                         DJNZ WRCCP1
  EEED    AF                            XOR  A
  EEEE    C9                            RET
                                ;
  EEEF    21 EE5A               RDERRO: LD   HL,RFLERR
  EEF2    CD EA1A                       CALL OUTTXT
  EEF5    AF                            XOR  A
  EEF6    3D                            DEC  A
  EEF7    C9                            RET
                                ;
  EEF8    AF                    LEEF8:  XOR  A            ;L=RADR 0-7 , H=RADR 8-15 , A=RADR 16-19(21)
  EEF9    6F                            LD   L,A
  EEFA    3A F4C3                       LD   A,(DF4C3)    ;(RAFSEC)
  EEFD    67                            LD   H,A          ;H=Record (max. 128 = Bit 0-6)
  EEFE    CB 1C                         RR   H
  EF00    CB 1D                         RR   L            ;H0 -> L7 ...... H6 -> H5
  EF02    3A F4C2                       LD   A,(DF4C2)    ;(RAFTRK) , A=Track (max. 64 bei 1M (256 bei 4M) = Bit 0-5(7)
  EF05    CB 1F                         RR   A            ;A0 -> CY
  EF07    30 02                         JR   NC,LEF0B
  EF09    CB F4                         SET  6,H          ;H6 = A0 (RADR14)
  EF0B    CB 1F                 LEF0B:  RR   A            ;A1 -> CY
  EF0D    30 02                         JR   NC,LEF11
  EF0F    CB FC                         SET  7,H          ;H7 = A1 (RADR15)
  EF11    F5                    LEF11:  PUSH AF
  EF12    E6 03                         AND  03H
  EF14    F6 E0                         OR   0E0H
  EF16    4F                            LD   C,A
  EF17    7D                            LD   A,L
  EF18    D3 E7                         OUT  (PE7),A      ;L-Adresse
  EF1A    7C                            LD   A,H
  EF1B    D3 E6                         OUT  (PE6),A      ;H-Adresse
  EF1D    F1                            POP  AF
  EF1E    CB 1F                         RR   A            ;Rotiere A rechts durch Carry
  EF20    CB 1F                         RR   A
  EF22    E6 0F                         AND  0FH
  EF24    D3 E5                         OUT  (PE5),A      ;Extended-Adresse
  EF26    06 80                         LD   B,80H
  EF28    2A F501                       LD   HL,(DMA)
  EF2B    C9                            RET
                                ;Ansprung unklar
  EF2C    20 4F                 LEF2C:  JR   NZ,LEF7D
  EF2E    4B                            LD   C,E
  EF2F    20 54                         JR   NZ,LEF85
  EF31    50                            LD   D,B
  EF32    41                            LD   B,C
  EF33    20 76                         JR   NZ,LEFAB
  EF35    6F                            LD   L,A
  EF36    6E                            LD   L,(HL)
  EF37    20 32                         JR   NZ,LEF6B
  EF39    30 30                         JR   NC,LEF6B
  EF3B    30 48                         JR   NC,LEF85
  EF3D    20 6E                         JR   NZ,LEFAD
  EF3F    61                            LD   H,C
  EF40    63                            LD   H,E
  EF41    68                            LD   L,B
  EF42    20 30                         JR   NZ,LEF74
	MACRO-80 3.44	09-Dec-81	PAGE	1-21


  EF44    31 3030                       LD   SP,3030H
  EF47    48                            LD   C,B
  EF48    20 75                         JR   NZ,LEFBF
  EF4A    6D                            LD   L,L
  EF4B    67                            LD   H,A
  EF4C    65                            LD   H,L
  EF4D    6C                            LD   L,H
  EF4E    61                            LD   H,C
  EF4F    64                            LD   H,H
  EF50    65                            LD   H,L
  EF51    6E                            LD   L,(HL)
  EF52    21 2100                       LD   HL,2100H
  EF55    00                            NOP
  EF56    20 11                         JR   NZ,LEF69
  EF58    00                            NOP
  EF59    01 0001                       LD   BC,0001H
  EF5C    B0                            OR   B
  EF5D    ED B0                         LDIR
  EF5F    21 EF2C                       LD   HL,0EF2CH
  EF62    CD EA1A                       CALL OUTTXT
  EF65    C9                            RET
                                ;
  EF66    F3                    LOAD:   DI
  EF67    ED 73 F4DC                    LD   (DF4DC),SP
  EF6B    31 F498               LEF6B:  LD   SP,0F498H
  EF6E    F5                            PUSH AF
  EF6F    C5                            PUSH BC
  EF70    D5                            PUSH DE
  EF71    E5                            PUSH HL
  EF72    AF                            XOR  A
  EF73    D3 1E                         OUT  (P1E),A
  EF75    11 0FFF                       LD   DE,0FFFH
  EF78    DF                            RST  18H
  EF79    8D                            DEFB 0DH+80H
  EF7A    3E 20                         LD   A,20H
  EF7C    32 F4CE                       LD   (DF4CE),A
  EF7F    21 2000                       LD   HL,2000H
  EF82    22 185B                       LD   (D185B),HL
  EF85    CD 0B32               LEF85:  CALL L0B32
  EF88    ED 5B 185B                    LD   DE,(D185B)
  EF8C    2A 185D                       LD   HL,(D185D)
  EF8F    D5                            PUSH DE
  EF90    A7                            AND  A
  EF91    ED 52                         SBC  HL,DE
  EF93    E5                            PUSH HL
  EF94    7D                            LD   A,L
  EF95    2E 00                         LD   L,00H
  EF97    A7                            AND  A
  EF98    28 01                         JR   Z,LEF9B
  EF9A    24                            INC  H
  EF9B    AF                    LEF9B:  XOR  A
  EF9C    C6 01                 LEF9C:  ADD  A,01H
  EF9E    27                            DAA
  EF9F    30 01                         JR   NC,LEFA2
  EFA1    2C                            INC  L
  EFA2    25                    LEFA2:  DEC  H
  EFA3    20 F7                         JR   NZ,LEF9C
  EFA5    65                            LD   H,L
  EFA6    6F                            LD   L,A
  EFA7    DF                            RST  18H
  EFA8    41 6E 7A 61                   DEFM "Anzahl 100H Bloe"
  EFAC    68 6C 20 31           
	MACRO-80 3.44	09-Dec-81	PAGE	1-22


  EFB0    30 30 48 20           
  EFB4    42 6C 6F 65           
  EFB8    63 6B 65 3A                   DEFM "cke:"
  EFBC    A0                            DEFB 20H+80H      ;" +80H
  EFBD    CD E957                       CALL LE957
  EFC0    7C                            LD   A,H
  EFC1    CD EFD9                       CALL LEFD9
  EFC4    7D                            LD   A,L
  EFC5    CD EFD9                       CALL LEFD9
  EFC8    C1                            POP  BC
  EFC9    11 0100                       LD   DE,0100H
  EFCC    E1                            POP  HL
  EFCD    ED B0                         LDIR
  EFCF    E1                            POP  HL
  EFD0    D1                            POP  DE
  EFD1    C1                            POP  BC
  EFD2    F1                            POP  AF
  EFD3    ED 7B F4DC                    LD   SP,(DF4DC)
  EFD7    FB                            EI
  EFD8    C9                            RET
                                ;
  EFD9    F5                    LEFD9:  PUSH AF
  EFDA    1F                            RRA
  EFDB    1F                            RRA
  EFDC    1F                            RRA
  EFDD    1F                            RRA
  EFDE    CD EFE2                       CALL LEFE2
  EFE1    F1                            POP  AF
  EFE2    E6 0F                 LEFE2:  AND  0FH
  EFE4    C6 90                         ADD  A,90H
  EFE6    27                            DAA
  EFE7    CE 40                         ADC  A,40H
  EFE9    27                            DAA
  EFEA    C3 EFED                       JP   LEFED
                                ;
  EFED    E5                    LEFED:  PUSH HL
  EFEE    D5                            PUSH DE
  EFEF    C5                            PUSH BC
  EFF0    5F                            LD   E,A
  EFF1    0E 02                         LD   C,02H
  EFF3    CD 0005                       CALL L0005
  EFF6    C1                            POP  BC
  EFF7    D1                            POP  DE
  EFF8    E1                            POP  HL
  EFF9    C9                            RET
                                ;
  EFFA    2A F503               LEFFA:  LD   HL,(DPH)
  EFFD    22 F515                       LD   (DF515),HL
  F000    2E 0F                 LF000:  LD   L,0FH
  F002    D5                    LF002:  PUSH DE
  F003    11 000A                       LD   DE,000AH
  F006    62                            LD   H,D
  F007    E5                            PUSH HL
  F008    2A F515                       LD   HL,(DF515)
  F00B    19                            ADD  HL,DE
  F00C    5E                            LD   E,(HL)
  F00D    23                            INC  HL
  F00E    56                            LD   D,(HL)
  F00F    E1                            POP  HL
  F010    19                            ADD  HL,DE
  F011    D1                            POP  DE
  F012    7E                            LD   A,(HL)
	MACRO-80 3.44	09-Dec-81	PAGE	1-23


  F013    B7                            OR   A
  F014    C9                            RET
                                ;Ansprung unklar
  F015    23                    LF015:  INC  HL
  F016    CB FE                         SET  7,(HL)
  F018    2B                            DEC  HL
  F019    AF                    LF019:  XOR  A
  F01A    32 F51C                       LD   (DF51C),A
  F01D    CD F024                       CALL LF024
  F020    3A F51C                       LD   A,(DF51C)
  F023    C9                            RET
                                ;
  F024    4E                    LF024:  LD   C,(HL)
  F025    CD EFFA                       CALL LEFFA
  F028    CA F0E1                       JP   Z,LF0E1
  F02B    79                            LD   A,C
  F02C    FE 06                         CP   06H
  F02E    3E 01                         LD   A,01H
  F030    20 01                         JR   NZ,LF033
  F032    AF                            XOR  A
  F033    32 F51D               LF033:  LD   (DF51D),A
  F036    CD F000                       CALL LF000
  F039    47                            LD   B,A
  F03A    2A F4FF                       LD   HL,(SECTOR)
  F03D    CB 3C                 LF03D:  SRL  H
  F03F    CB 1D                         RR   L
  F041    10 FA                         DJNZ LF03D
  F043    22 F518                       LD   (DF518),HL
  F046    21 F51A                       LD   HL,0F51AH
  F049    7E                            LD   A,(HL)
  F04A    36 01                         LD   (HL),01H
  F04C    B7                            OR   A
  F04D    28 26                         JR   Z,LF075
  F04F    3A F4FC                       LD   A,(DRIVE)
  F052    21 F505                       LD   HL,0F505H
  F055    BE                            CP   (HL)
  F056    20 16                         JR   NZ,LF06E
  F058    2A F506                       LD   HL,(DF506)
  F05B    ED 5B F4FD                    LD   DE,(TRACK)
  F05F    ED 52                         SBC  HL,DE
  F061    20 0B                         JR   NZ,LF06E
  F063    2A F508                       LD   HL,(DF508)
  F066    ED 5B F518                    LD   DE,(DF518)
  F06A    ED 52                         SBC  HL,DE
  F06C    28 1F                         JR   Z,LF08D
  F06E    3A F51B               LF06E:  LD   A,(DF51B)
  F071    B7                            OR   A
  F072    C4 F0CE                       CALL NZ,LF0CE
  F075    21 F4FC               LF075:  LD   HL,0F4FCH
  F078    11 F505                       LD   DE,0F505H
  F07B    01 0009                       LD   BC,0009H
  F07E    ED B0                         LDIR
  F080    2A F518                       LD   HL,(DF518)
  F083    22 F508                       LD   (DF508),HL
  F086    CD F0D1                       CALL LF0D1
  F089    AF                            XOR  A
  F08A    32 F51B                       LD   (DF51B),A
  F08D    CD F000               LF08D:  CALL LF000
  F090    23                            INC  HL
  F091    3A F4FF                       LD   A,(SECTOR)
  F094    A6                            AND  (HL)
  F095    1F                            RRA
	MACRO-80 3.44	09-Dec-81	PAGE	1-24


  F096    67                            LD   H,A
  F097    3E 00                         LD   A,00H
  F099    1F                            RRA
  F09A    6F                            LD   L,A
  F09B    11 F51F                       LD   DE,0F51FH
  F09E    19                            ADD  HL,DE
  F09F    ED 5B F501                    LD   DE,(DMA)
  F0A3    3A F51D                       LD   A,(DF51D)
  F0A6    B7                            OR   A
  F0A7    20 05                         JR   NZ,LF0AE
  F0A9    3C                            INC  A
  F0AA    32 F51B                       LD   (DF51B),A
  F0AD    EB                            EX   DE,HL
  F0AE    01 0080               LF0AE:  LD   BC,0080H
  F0B1    ED B0                         LDIR
  F0B3    3A F51C                       LD   A,(DF51C)
  F0B6    B7                            OR   A
  F0B7    20 10                         JR   NZ,LF0C9
  F0B9    3A F51E                       LD   A,(DF51E)
  F0BC    3D                            DEC  A
  F0BD    C0                            RET  NZ
  F0BE    32 F51B                       LD   (DF51B),A
  F0C1    CD F0CE                       CALL LF0CE
  F0C4    3A F51C                       LD   A,(DF51C)
  F0C7    B7                            OR   A
  F0C8    C8                            RET  Z
  F0C9    AF                    LF0C9:  XOR  A
  F0CA    32 F51A                       LD   (DF51A),A
  F0CD    C9                            RET
                                ;
  F0CE    3E 06                 LF0CE:  LD   A,06H
  F0D0    21 043E                       LD   HL,043EH
  F0D3    32 F517                       LD   (DF517),A
  F0D6    21 F51F                       LD   HL,0F51FH
  F0D9    22 F50A                       LD   (DF50A),HL
  F0DC    21 F505                       LD   HL,0F505H
  F0DF    18 09                         JR   LF0EA
                                ;
  F0E1    3A F4FB               LF0E1:  LD   A,(DF4FB)
  F0E4    32 F517                       LD   (DF517),A
  F0E7    21 F4FC                       LD   HL,0F4FCH
  F0EA    11 F50E               LF0EA:  LD   DE,0F50EH
  F0ED    01 0009                       LD   BC,0009H
  F0F0    ED B0                         LDIR
  F0F2    3A F50E                       LD   A,(DF50E)
  F0F5    17                            RLA
  F0F6    DA F307                       JP   C,LF307
  F0F9    3A F510                       LD   A,(DF510)
  F0FC    21 F512                       LD   HL,0F512H
  F0FF    B6                            OR   (HL)
  F100    C2 F1C1                       JP   NZ,LF1C1
  F103    CD F000                       CALL LF000
  F106    32 F4E8                       LD   (DF4E8),A
  F109    B7                            OR   A
  F10A    3E FF                         LD   A,0FFH
  F10C    28 02                         JR   Z,LF110
  F10E    3E 80                         LD   A,80H
  F110    32 F4EB               LF110:  LD   (DF4EB),A
  F113    23                            INC  HL
  F114    23                            INC  HL
  F115    7E                            LD   A,(HL)
  F116    32 F4E9                       LD   (DF4E9),A
	MACRO-80 3.44	09-Dec-81	PAGE	1-25


  F119    3A F511                       LD   A,(DF511)
  F11C    BE                            CP   (HL)
  F11D    38 04                         JR   C,LF123
  F11F    96                            SUB  (HL)
  F120    01 0104                       LD   BC,0104H
  F123    3C                    LF123:  INC  A
  F124    32 F4E7                       LD   (DF4E7),A
  F127    23                            INC  HL
  F128    7E                            LD   A,(HL)
  F129    32 F4EA                       LD   (DF4EA),A
  F12C    23                            INC  HL
  F12D    3A F50F                       LD   A,(DF50F)
  F130    BE                            CP   (HL)
  F131    38 04                         JR   C,LF137
  F133    96                            SUB  (HL)
  F134    01 0104                       LD   BC,0104H
  F137    32 F4E5               LF137:  LD   (DF4E5),A
  F13A    23                            INC  HL
  F13B    7E                            LD   A,(HL)
  F13C    B1                            OR   C
  F13D    32 F4E4                       LD   (DF4E4),A
  F140    78                            LD   A,B
  F141    32 F4E6                       LD   (DF4E6),A
  F144    23                            INC  HL
  F145    3A F517                       LD   A,(DF517)
  F148    16 05                         LD   D,05H
  F14A    FE 06                         CP   06H
  F14C    28 02                         JR   Z,LF150
  F14E    16 06                         LD   D,06H
  F150    7E                    LF150:  LD   A,(HL)
  F151    E6 40                         AND  40H
  F153    B2                            OR   D
  F154    32 F4E2                       LD   (DF4E2),A
  F157    11 F4EC                       LD   DE,0F4ECH
  F15A    01 0004                       LD   BC,0004H
  F15D    ED B0                         LDIR
  F15F    0E 02                         LD   C,02H
  F161    06 02                 LF161:  LD   B,02H
  F163    C5                    LF163:  PUSH BC
  F164    CD F175                       CALL LF175
  F167    C1                            POP  BC
  F168    B7                            OR   A
  F169    C8                            RET  Z
  F16A    10 F7                         DJNZ LF163
  F16C    0D                            DEC  C
  F16D    C8                            RET  Z
  F16E    C5                            PUSH BC
  F16F    CD F1D5                       CALL LF1D5
  F172    C1                            POP  BC
  F173    18 EC                         JR   LF161
                                ;
  F175    3E 03                 LF175:  LD   A,03H
  F177    06 02                         LD   B,02H
  F179    21 F4EE                       LD   HL,CTAB      ;FDC Befehlsbyte
  F17C    D3 41                         OUT  (DFDC),A     ;Datenport FDC
  F17E    CD F230                       CALL LF230
  F181    CD F1E7                       CALL LF1E7
  F184    20 3B                         JR   NZ,LF1C1
  F186    21 0040                       LD   HL,0040H
  F189    3A F4E8                       LD   A,(DF4E8)
  F18C    3C                            INC  A
  F18D    29                    LF18D:  ADD  HL,HL
	MACRO-80 3.44	09-Dec-81	PAGE	1-26


  F18E    3D                            DEC  A
  F18F    20 FC                         JR   NZ,LF18D
  F191    2B                            DEC  HL
  F192    24                            INC  H
  F193    2C                            INC  L
  F194    E5                            PUSH HL
  F195    2A F513                       LD   HL,(DF513)
  F198    E5                            PUSH HL
  F199    3A F4E2                       LD   A,(DF4E2)
  F19C    4F                            LD   C,A
  F19D    06 09                         LD   B,09H
  F19F    0F                            RRCA
  F1A0    3E 51                         LD   A,51H
  F1A2    8F                            ADC  A,A
  F1A3    32 F26F                       LD   (MODE0),A    ;A2 --> INI
  F1A6    32 F275                       LD   (MODE1),A    ;A3 --> OUTI
  F1A9    F3                            DI
  F1AA    CD F227                       CALL LF227
  F1AD    E1                            POP  HL
  F1AE    D1                            POP  DE
  F1AF    43                            LD   B,E
  F1B0    0E 41                         LD   C,DFDC       ;Datenport FDC
  F1B2    CD F262                       CALL RW           ;FDC RW-Routine
  F1B5    FB                            EI
  F1B6    CD F1C8                       CALL LF1C8
  F1B9    21 F4F0                       LD   HL,0F4F0H
  F1BC    7E                            LD   A,(HL)
  F1BD    E6 C0                         AND  0C0H
  F1BF    28 02                         JR   Z,LF1C3
  F1C1    3E FF                 LF1C1:  LD   A,0FFH
  F1C3    32 F51C               LF1C3:  LD   (DF51C),A
  F1C6    B7                            OR   A
  F1C7    C9                            RET
                                ;
  F1C8    06 07                 LF1C8:  LD   B,07H
  F1CA    21 F4F0                       LD   HL,0F4F0H
  F1CD    CD F24B               LF1CD:  CALL LF24B
  F1D0    77                            LD   (HL),A
  F1D1    23                            INC  HL
  F1D2    10 F9                         DJNZ LF1CD
  F1D4    C9                            RET
                                ;
  F1D5    01 0207               LF1D5:  LD   BC,0207H
  F1D8    CD F227                       CALL LF227
  F1DB    CD F207                       CALL LF207
  F1DE    C8                            RET  Z
  F1DF    01 0207                       LD   BC,0207H
  F1E2    CD F227                       CALL LF227
  F1E5    18 20                         JR   LF207
                                ;
  F1E7    3A F4E5               LF1E7:  LD   A,(DF4E5)
  F1EA    32 F4F7                       LD   (DF4F7),A
  F1ED    B7                            OR   A
  F1EE    28 E5                         JR   Z,LF1D5
  F1F0    01 030F                       LD   BC,030FH
  F1F3    21 F4EC                       LD   HL,0F4ECH
  F1F6    CB 66                         BIT  4,(HL)
  F1F8    28 04                         JR   Z,LF1FE
  F1FA    87                            ADD  A,A
  F1FB    32 F4E5                       LD   (DF4E5),A
  F1FE    CD F227               LF1FE:  CALL LF227
  F201    3A F4F7                       LD   A,(DF4F7)
	MACRO-80 3.44	09-Dec-81	PAGE	1-27


  F204    32 F4E5                       LD   (DF4E5),A
  F207    01 0108               LF207:  LD   BC,0108H
  F20A    CD F227                       CALL LF227
  F20D    CD F24B                       CALL LF24B
  F210    47                            LD   B,A
  F211    32 F4F0                       LD   (DF4F0),A
  F214    FE 80                         CP   80H
  F216    C4 F24B                       CALL NZ,LF24B
  F219    CB 68                         BIT  5,B
  F21B    28 EA                         JR   Z,LF207
  F21D    78                            LD   A,B
  F21E    E6 F0                         AND  0F0H
  F220    FE C0                         CP   0C0H
  F222    28 E3                         JR   Z,LF207
  F224    EE 20                         XOR  20H
  F226    C9                            RET
                                ;
  F227    C5                    LF227:  PUSH BC
  F228    CD F285                       CALL LF285
  F22B    C1                            POP  BC
  F22C    21 F4E3               LF22C:  LD   HL,0F4E3H
  F22F    71                            LD   (HL),C
  F230    0E 41                 LF230:  LD   C,41H
  F232    D5                            PUSH DE
  F233    11 1FFF               LF233:  LD   DE,1FFFH
  F236    7B                    LF236:  LD   A,E
  F237    B2                            OR   D
  F238    28 0D                         JR   Z,LF247      ;Abbruch nach 8192 Versuchen
  F23A    DB 40                         IN   A,(CFDC)     ;Lese Hauptstatusregister
  F23C    E6 C0                         AND  0C0H
  F23E    FE 80                         CP   80H          ;FDC bereit zum Schreiben?
  F240    1B                            DEC  DE
  F241    20 F3                         JR   NZ,LF236     ;noch nicht bereit
  F243    ED A3                         OUTI              ;1 Byte --> FDC
  F245    20 EC                         JR   NZ,LF233     ;Wdhlg., bis B=0
  F247    06 00                 LF247:  LD   B,00H
  F249    D1                            POP  DE
  F24A    C9                            RET
                                ;
  F24B    E5                    LF24B:  PUSH HL
  F24C    21 1FFF                       LD   HL,1FFFH
  F24F    7D                    LF24F:  LD   A,L
  F250    B4                            OR   H
  F251    3E C0                         LD   A,0C0H
  F253    28 0B                         JR   Z,LF260      ;Abbruch nach 8192 Versuchen
  F255    DB 40                         IN   A,(CFDC)     ;Lese Hauptstatusregister
  F257    E6 C0                         AND  0C0H
  F259    FE C0                         CP   0C0H         ;FDC bereit zum Lesen?
  F25B    2B                            DEC  HL
  F25C    20 F1                         JR   NZ,LF24F     ;noch nicht bereit
  F25E    DB 41                         IN   A,(DFDC)     ;1 Byte vom FDC lesen --> A
  F260    E1                    LF260:  POP  HL
  F261    C9                            RET
                                ;
                                ;
                                ;       FDC READ/WRITE Routine
                                ;       ----------------------
                                ;
  F262    3A F4FA               RW:     LD   A,(LATPU)
  F265    CB CF                         SET  1,A
  F267    D3 45                         OUT  (LATCH),A    ;WAIT-Freigabe
  F269    DB 40                 RW01:   IN   A,(CFDC)     ;Lese Hauptstatusregister
	MACRO-80 3.44	09-Dec-81	PAGE	1-28


  F26B    07                            RLCA
  F26C    30 FB                         JR   NC,RW01      ;FDC noch nicht bereit
  F26E    ED                            DEFB 0EDH         ;ED A2 = INI
  F26F    A2                    MODE0:  DEFB 0A2H         ;ED A3 = OUTI
  F270    00                            NOP
  F271    D3 43                 RW02:   OUT  (WAIT),A     ;WAIT bis Interrupt FDC
  F273    00                            NOP
  F274    ED                            DEFB 0EDH         ;ED A2 = INI
  F275    A2                    MODE1:  DEFB 0A2H         ;ED A3 = OUTI
  F276    C2 F271                       JP   NZ,RW02
  F279    15                            DEC  D
  F27A    C2 F271                       JP   NZ,RW02
  F27D    3A F4FA                       LD   A,(LATPU)
  F280    CB E7                         SET  4,A          ;Terminal Count
  F282    D3 45                         OUT  (LATCH),A    ;TC + WAIT-Sperrung
  F284    C9                            RET
                                ;
  F285    21 F4F8               LF285:  LD   HL,DF4F8
  F288    3A F4E4                       LD   A,(DF4E4)
  F28B    E6 03                         AND  03H
  F28D    BE                            CP   (HL)
  F28E    77                            LD   (HL),A
  F28F    23                            INC  HL
  F290    4E                            LD   C,(HL)
  F291    36 48                         LD   (HL),48H
  F293    F5                            PUSH AF
  F294    E5                            PUSH HL
  F295    21 F4FA                       LD   HL,LATPU
  F298    3A F4E4                       LD   A,(DF4E4)
  F29B    E6 03                         AND  03H
  F29D    28 08                         JR   Z,LF2A7
  F29F    FE 02                         CP   02H
  F2A1    28 04                         JR   Z,LF2A7
  F2A3    CB DE                         SET  3,(HL)       ;Floppy-LW 1: Motor an
  F2A5    18 02                         JR   LF2A9
                                ;
  F2A7    CB C6                 LF2A7:  SET  0,(HL)       ;Floppy-LW 0: Motor an
  F2A9    7E                    LF2A9:  LD   A,(HL)
  F2AA    D3 45                         OUT  (LATCH),A
  F2AC    E1                            POP  HL
  F2AD    F1                            POP  AF
  F2AE    20 04                         JR   NZ,LF2B4
  F2B0    79                            LD   A,C
  F2B1    A7                            AND  A
  F2B2    20 09                         JR   NZ,LF2BD
  F2B4    3E 48                 LF2B4:  LD   A,48H
  F2B6    CB 3F                         SRL  A
  F2B8    CB 3F                         SRL  A
  F2BA    BE                            CP   (HL)
  F2BB    38 F7                         JR   C,LF2B4
  F2BD    7E                    LF2BD:  LD   A,(HL)
  F2BE    A7                            AND  A
  F2BF    20 08                         JR   NZ,LF2C9
  F2C1    E5                            PUSH HL
  F2C2    21 F2DD                       LD   HL,DISCTX
  F2C5    CD EA1A                       CALL OUTTXT
  F2C8    E1                            POP  HL
  F2C9    C5                    LF2C9:  PUSH BC
  F2CA    E5                            PUSH HL
  F2CB    01 0204                       LD   BC,0204H
  F2CE    CD F22C                       CALL LF22C
  F2D1    CD F24B                       CALL LF24B
	MACRO-80 3.44	09-Dec-81	PAGE	1-29


  F2D4    E1                            POP  HL
  F2D5    C1                            POP  BC
  F2D6    CB 6F                         BIT  5,A
  F2D8    28 E3                         JR   Z,LF2BD
  F2DA    36 90                         LD   (HL),90H
  F2DC    C9                            RET
                                ;
  F2DD    20 44 49 53           DISCTX: DEFM ' DISC?'
  F2E1    43 3F                 
  F2E3    08 08 08 08                   DEFB 8,8,8,8,8,8
  F2E7    08 08                 
  F2E9    00                            NOP
                                ;
  F2EA    F5                            PUSH AF
  F2EB    3A F4F9                       LD   A,(DF4F9)
  F2EE    A7                            AND  A
  F2EF    28 12                         JR   Z,LF303
  F2F1    3D                            DEC  A
  F2F2    32 F4F9                       LD   (DF4F9),A
  F2F5    20 0C                         JR   NZ,LF303
  F2F7    E5                            PUSH HL
  F2F8    21 F4FA                       LD   HL,LATPU
  F2FB    CB 86                         RES  0,(HL)       ;Floppy-LW 0: Motor aus
  F2FD    CB 9E                         RES  3,(HL)       ;Floppy-LW 1: Motor aus
  F2FF    7E                            LD   A,(HL)
  F300    D3 45                         OUT  (LATCH),A
  F302    E1                            POP  HL
  F303    F1                    LF303:  POP  AF
  F304    FB                            EI
  F305    ED 4D                         RETI
                                ;
  F307    DB 8F                 LF307:  IN   A,(P8F)
  F309    17                            RLA
  F30A    38 FB                         JR   C,LF307
  F30C    2E 19                         LD   L,19H
  F30E    CD F002                       CALL LF002
  F311    4F                            LD   C,A
  F312    2A F511                       LD   HL,(DF511)
  F315    23                            INC  HL
  F316    AF                            XOR  A
  F317    47                            LD   B,A
  F318    3C                    LF318:  INC  A
  F319    ED 42                         SBC  HL,BC
  F31B    28 02                         JR   Z,LF31F
  F31D    30 F9                         JR   NC,LF318
  F31F    09                    LF31F:  ADD  HL,BC
  F320    3D                            DEC  A
  F321    57                            LD   D,A
  F322    5D                            LD   E,L
  F323    2E 11                         LD   L,11H
  F325    CD F002                       CALL LF002
  F328    B2                            OR   D
  F329    D3 8E                         OUT  (P8E),A
  F32B    7B                            LD   A,E
  F32C    D3 8B                         OUT  (P8B),A
  F32E    23                            INC  HL
  F32F    5E                            LD   E,(HL)
  F330    23                            INC  HL
  F331    56                            LD   D,(HL)
  F332    2A F50F                       LD   HL,(DF50F)
  F335    19                            ADD  HL,DE
  F336    7D                            LD   A,L
	MACRO-80 3.44	09-Dec-81	PAGE	1-30


  F337    D3 8C                         OUT  (P8C),A
  F339    7C                            LD   A,H
  F33A    D3 8D                         OUT  (P8D),A
  F33C    3E 01                         LD   A,01H
  F33E    D3 8A                         OUT  (P8A),A
  F340    3A F517                       LD   A,(DF517)
  F343    FE 06                         CP   06H
  F345    28 16                         JR   Z,LF35D
  F347    3E 20                         LD   A,20H
  F349    D3 8F                         OUT  (P8F),A
  F34B    DB 8F                 LF34B:  IN   A,(P8F)
  F34D    CB 5F                         BIT  3,A
  F34F    28 FA                         JR   Z,LF34B
  F351    2A F513                       LD   HL,(DF513)
  F354    01 0088                       LD   BC,0088H
  F357    ED B2                         INIR
  F359    ED B2                         INIR
  F35B    18 19                         JR   LF376
                                ;
  F35D    3E 30                 LF35D:  LD   A,30H
  F35F    D3 8F                         OUT  (P8F),A
  F361    DB 8F                 LF361:  IN   A,(P8F)
  F363    17                            RLA
  F364    38 FB                         JR   C,LF361
  F366    DB 8F                 LF366:  IN   A,(P8F)
  F368    CB 5F                         BIT  3,A
  F36A    28 FA                         JR   Z,LF366
  F36C    2A F513                       LD   HL,(DF513)
  F36F    01 0088                       LD   BC,0088H
  F372    ED B3                         OTIR
  F374    ED B3                         OTIR
  F376    DB 8F                 LF376:  IN   A,(P8F)
  F378    17                            RLA
  F379    38 FB                         JR   C,LF376
  F37B    DB 8F                         IN   A,(P8F)
  F37D    E6 89                         AND  89H
  F37F    C8                            RET  Z
  F380    3E FF                         LD   A,0FFH
  F382    32 F51C                       LD   (DF51C),A
  F385    C9                            RET
                                ;Ansprung unklar
  F386    EB                    LF386:  EX   DE,HL
  F387    23                            INC  HL
  F388    23                            INC  HL
  F389    23                            INC  HL
  F38A    23                            INC  HL
  F38B    23                            INC  HL
  F38C    3E 01                         LD   A,01H
  F38E    C9                            RET
                                ;Ansprung unklar
  F38F    CD F3E0               LF38F:  CALL LF3E0
  F392    06 0B                         LD   B,0BH
  F394    ED 78                 LF394:  IN   A,(C)
  F396    E6 0F                         AND  0FH
  F398    07                            RLCA
  F399    07                            RLCA
  F39A    07                            RLCA
  F39B    07                            RLCA
  F39C    5F                            LD   E,A
  F39D    05                            DEC  B
  F39E    ED 78                         IN   A,(C)
  F3A0    E6 0F                         AND  0FH
	MACRO-80 3.44	09-Dec-81	PAGE	1-31


  F3A2    B3                            OR   E
  F3A3    5E                            LD   E,(HL)
  F3A4    77                            LD   (HL),A
  F3A5    23                            INC  HL
  F3A6    05                            DEC  B
  F3A7    F2 F394                       JP   P,LF394
  F3AA    18 1A                         JR   LF3C6
                                ;Ansprung unklar
  F3AC    CD F3CE               LF3AC:  CALL LF3CE
  F3AF    06 0B                         LD   B,0BH
  F3B1    7E                    LF3B1:  LD   A,(HL)
  F3B2    0F                            RRCA
  F3B3    0F                            RRCA
  F3B4    0F                            RRCA
  F3B5    0F                            RRCA
  F3B6    E6 0F                         AND  0FH
  F3B8    ED 79                         OUT  (C),A
  F3BA    7E                            LD   A,(HL)
  F3BB    E6 0F                         AND  0FH
  F3BD    05                            DEC  B
  F3BE    ED 79                         OUT  (C),A
  F3C0    5E                            LD   E,(HL)
  F3C1    23                            INC  HL
  F3C2    05                            DEC  B
  F3C3    F2 F3B1                       JP   P,LF3B1
  F3C6    2B                    LF3C6:  DEC  HL
  F3C7    06 0D                         LD   B,0DH
  F3C9    AF                            XOR  A
  F3CA    ED 79                         OUT  (C),A
  F3CC    3C                            INC  A
  F3CD    C9                            RET
                                ;
  F3CE    01 0F85               LF3CE:  LD   BC,0F85H
  F3D1    ED 78                         IN   A,(C)
  F3D3    E6 0F                         AND  0FH
  F3D5    FE 04                         CP   04H
  F3D7    28 07                         JR   Z,LF3E0
  F3D9    3E 05                         LD   A,05H
  F3DB    ED 79                         OUT  (C),A
  F3DD    3D                            DEC  A
  F3DE    ED 79                         OUT  (C),A
  F3E0    01 0D85               LF3E0:  LD   BC,0D85H
  F3E3    3E 01                         LD   A,01H
  F3E5    ED 79                         OUT  (C),A
  F3E7    ED 78                         IN   A,(C)
  F3E9    CB 4F                         BIT  1,A
  F3EB    C8                            RET  Z
  F3EC    AF                            XOR  A
  F3ED    ED 79                         OUT  (C),A
  F3EF    18 EF                         JR   LF3E0
                                ;Ansprung unklar
  F3F1    F3                    LF3F1:  DI
  F3F2    F5                            PUSH AF
  F3F3    CD E95C                       CALL LE95C
  F3F6    CD 07EE                       CALL L07EE
  F3F9    CD E957                       CALL LE957
  F3FC    F1                            POP  AF
  F3FD    FB                            EI
  F3FE    C9                            RET
                                ;Ansprung unklar
  F3FF    F3                    LF3FF:  DI
  F400    F5                            PUSH AF
	MACRO-80 3.44	09-Dec-81	PAGE	1-32


  F401    CD E95C                       CALL LE95C
  F404    CD 07F1                       CALL L07F1
  F407    CF                            RST  08H
  F408    CD E957                       CALL LE957
  F40B    F1                            POP  AF
  F40C    FB                            EI
  F40D    C9                            RET
                                ;
  F40E    43 4F 4E 49           LF40E:  DEFM "CONIN-ZBIOS-STACK==26BYTES"
  F412    4E 2D 5A 42           
  F416    49 4F 53 2D           
  F41A    53 54 41 43           
  F41E    4B 3D 3D 32           
  F422    36 42 59 54           
  F426    45 53                 
  F428    43 4F 4E 49                   DEFM "CONIN-ZBIOS-STACK==26BYTES"
  F42C    4E 2D 5A 42           
  F430    49 4F 53 2D           
  F434    53 54 41 43           
  F438    4B 3D 3D 32           
  F43C    36 42 59 54           
  F440    45 53                 
  F442    43 4F 4E 4F                   DEFM "CONOUT-STACK_CONOUT-STACK_CONOUT-STACK"
  F446    55 54 2D 53           
  F44A    54 41 43 4B           
  F44E    5F 43 4F 4E           
  F452    4F 55 54 2D           
  F456    53 54 41 43           
  F45A    4B 5F 43 4F           
  F45E    4E 4F 55 54           
  F462    2D 53 54 41           
  F466    43 4B                 
  F468    4C 4F 41 44                   DEFM "LOAD-ZBIOS-STACK=48BYTES"
  F46C    2D 5A 42 49           
  F470    4F 53 2D 53           
  F474    54 41 43 4B           
  F478    3D 34 38 42           
  F47C    59 54 45 53           
  F480    4C 4F 41 44                   DEFM "LOAD-ZBIOS-STACK=48BYTES"
  F484    2D 5A 42 49           
  F488    4F 53 2D 53           
  F48C    54 41 43 4B           
  F490    3D 34 38 42           
  F494    59 54 45 53           
  F498    5A 42 49 4F                   DEFM "ZBIOS(C)ML-SOFT 2003 & AC1-BIOS(C)HR 2011"
  F49C    53 28 43 29           
  F4A0    4D 4C 2D 53           
  F4A4    4F 46 54 20           
  F4A8    32 30 30 33           
  F4AC    20 26 20 41           
  F4B0    43 31 2D 42           
  F4B4    49 4F 53 28           
  F4B8    43 29 48 52           
  F4BC    20 32 30 31           
  F4C0    31                    
                                ;
  F4C1    00                            NOP
  F4C2    00                            NOP
  F4C3    00                    DF4C3:  NOP
  F4C4    00                            NOP
  F4C5    00                            NOP
  F4C6    00                            NOP
	MACRO-80 3.44	09-Dec-81	PAGE	1-33


  F4C7    00                            NOP
  F4C8    00                            NOP
  F4C9    00                            NOP
  F4CA    00                    DF4CA:  NOP
  F4CB    00                            NOP
  F4CC    00                            NOP
  F4CD    01 20 00              DF4CD:  DEFB 1,20H,0
  F4D0    00                    DF4D0:  NOP
  F4D1    00                    DF4D1:  NOP
  F4D2    00                    DF4D2:  NOP
  F4D3    00                    DF4D3:  NOP
  F4D4    00                            NOP
  F4D5    00                    DF4D5:  NOP
  F4D6    00                            NOP
  F4D7    00                            NOP
  F4D8    00                    DF4D8:  NOP
  F4D9    00                            NOP
  F4DA    00                    DF4DA:  NOP
  F4DB    00                            NOP
  F4DC    00                    DF4DC:  NOP
  F4DD    00                            NOP
  F4DE    00                    DF4DE:  NOP
  F4DF    00                            NOP
  F4E0    00                            NOP
  F4E1    00                            NOP
  F4E2    00                            NOP
  F4E3    00                            NOP
  F4E4    00                    DF4E4:  NOP
  F4E5    00                    DF4E5:  NOP
  F4E6    00                    DF4E6:  NOP
  F4E7    00                    DF4E7:  NOP
  F4E8    00                    DF4E8:  NOP
  F4E9    00                    DF4E9:  NOP
  F4EA    00                    DF4EA:  NOP
  F4EB    00                    DF4EB:  NOP
  F4EC    00                            NOP
  F4ED    00                            NOP
  F4EE    00                    CTAB:   NOP               ;FDC Befehlsbyte
  F4EF    00                            NOP
  F4F0    00                            NOP
  F4F1    00                            NOP
  F4F2    00                            NOP
  F4F3    00                            NOP
  F4F4    00                            NOP
  F4F5    00                            NOP
  F4F6    00                            NOP
  F4F7    00                    DF4F7:  NOP
  F4F8    00                    DF4F8:  NOP
  F4F9    00                    DF4F9:  NOP
  F4FA    00                    LATPU:  NOP
  F4FB    04                    DF4FB:  DEFB 4
  F4FC    00                            NOP
  F4FD    0000                  TRACK:  DEFW 0
  F4FF    0000                  SECTOR: DEFW 0
  F501    0000                  DMA:    DEFW 0
  F503    00                    DPH:    NOP
  F504    00                            NOP
  F505    00                            NOP
  F506    00                    DF506:  NOP
  F507    00                            NOP
  F508    00                    DF508:  NOP
  F509    00                            NOP
	MACRO-80 3.44	09-Dec-81	PAGE	1-34


  F50A    00                    DF50A:  NOP
  F50B    00                            NOP
  F50C    00                            NOP
  F50D    00                            NOP
  F50E    00                    DF50E:  NOP
  F50F    00                    DF50F:  NOP
  F510    00                    DF510:  NOP
  F511    00                    DF511:  NOP
  F512    00                            NOP
  F513    00                    DF513:  NOP
  F514    00                            NOP
  F515    00                    DF515:  NOP
  F516    00                            NOP
  F517    04                    DF517:  DEFB 4
  F518    00                    DF518:  NOP
  F519    00                            NOP
  F51A    00                    DF51A:  NOP
  F51B    00                    DF51B:  NOP
  F51C    00                    DF51C:  NOP
  F51D    00                    DF51D:  NOP
  F51E    00                    DF51E:  NOP
                                ;
  F51F                                  DEFS 1024,0
  F91F                          DIRBF:  DEFS 128,0        ;0F91FH
  F99F                          ALL01:  DEFS 50,0         ;0F99FH
  F9D1                          ALL02:  DEFS 504,0        ;0F9D1H
  FBC9                          ALL03:  DEFS 256,0        ;0FBC9H
  FCC9                          ALL04:  DEFS 256,0        ;0FCC9H
  FDC9                          ALL05:  DEFS 50,0         ;0FDC9H
  FDFB                          ALL06:  DEFS 50,0         ;0FDFBH
  FE2D                          CHK00:  DEFS 32,0         ;0FE2DH
  FE4D                          CHK02:  DEFS 32,0         ;0FE4DH
  FE6D                          CHK06:  DEFS 32,0         ;0FE6DH
  FE8D                                  DEFS 115,1AH      ;0FE8DH
  FF00                          ALL00:                    ;ALL00 zeigt hinter das BIOS
                                ;
  0000                          L0000   EQU  0000H
  0005                          L0005   EQU  0005H
  01A5                          L01A5   EQU  01A5H
  0221                          L0221   EQU  0221H
  05CE                          L05CE   EQU  05CEH
  07EE                          L07EE   EQU  07EEH
  07F1                          L07F1   EQU  07F1H
  0B32                          L0B32   EQU  0B32H
  77F4                          L77F4   EQU  77F4H
  ED3C                          LED3C   EQU  0ED3CH
  EE65                          LEE65   EQU  0EE65H
  EE8C                          LEE8C   EQU  0EE8CH
  EF69                          LEF69   EQU  0EF69H
  EF74                          LEF74   EQU  0EF74H
  EF7D                          LEF7D   EQU  0EF7DH
  EFAB                          LEFAB   EQU  0EFABH
  EFAD                          LEFAD   EQU  0EFADH
  EFBF                          LEFBF   EQU  0EFBFH
  F0D1                          LF0D1   EQU  0F0D1H
  0000                          D0000   EQU  0000H        ;Die Datenworte muessen alle noch aufgeloest werden!
  0001                          D0001   EQU  0001H
  0003                          D0003   EQU  0003H
  0004                          D0004   EQU  0004H
  0005                          D0005   EQU  0005H
  0006                          D0006   EQU  0006H
  0038                          D0038   EQU  0038H
	MACRO-80 3.44	09-Dec-81	PAGE	1-35


  0039                          D0039   EQU  0039H
  0066                          D0066   EQU  0066H
  0067                          D0067   EQU  0067H
  1800                          D1800   EQU  1800H
  1818                          D1818   EQU  1818H
  181F                          D181F   EQU  181FH
  185B                          D185B   EQU  185BH
  185D                          D185D   EQU  185DH
  EEDA                          DEEDA   EQU  0EEDAH
  F4C2                          DF4C2   EQU  0F4C2H
  F4CE                          DF4CE   EQU  0F4CEH
  F4CF                          DF4CF   EQU  0F4CFH
  F4D4                          DF4D4   EQU  0F4D4H
  F4E2                          DF4E2   EQU  0F4E2H
  F4F0                          DF4F0   EQU  0F4F0H
  F4FC                          DRIVE   EQU  0F4FCH
  FF80                          DFF80   EQU  0FF80H
  FF82                          DFF82   EQU  0FF82H
  FF84                          DFF84   EQU  0FF84H
  FF86                          DFF86   EQU  0FF86H
  FF88                          DFF88   EQU  0FF88H
  FF8A                          DFF8A   EQU  0FF8AH
  FFD0                          DFFD0   EQU  0FFD0H
  0000                          P00     EQU  00H
  0001                          P01     EQU  01H
  0002                          P02     EQU  02H
  0003                          P03     EQU  03H
  0004                          P04     EQU  04H
  0005                          P05     EQU  05H
  0006                          P06     EQU  06H
  0011                          P11     EQU  11H
  001E                          P1E     EQU  1EH
  008A                          P8A     EQU  8AH
  008B                          P8B     EQU  8BH
  008C                          P8C     EQU  8CH
  008D                          P8D     EQU  8DH
  008E                          P8E     EQU  8EH
  008F                          P8F     EQU  8FH
  00F0                          PF0     EQU  0F0H
                                ;
                                        .DEPHASE
                                        END
	MACRO-80 3.44	09-Dec-81	PAGE	S


Macros:

Symbols:
FF00 	ALL00           F99F 	ALL01           F9D1 	ALL02           
FBC9 	ALL03           FCC9 	ALL04           FDC9 	ALL05           
FDFB 	ALL06           E83F 	BOOT            E641 	CCP             
0040 	CFDC            FE2D 	CHK00           FE4D 	CHK02           
FE6D 	CHK06           EA34 	CONIN           EA94 	CONOUT          
EA2C 	CONST           F4EE 	CTAB            0000 	D0000           
0001 	D0001           0003 	D0003           0004 	D0004           
0005 	D0005           0006 	D0006           0038 	D0038           
0039 	D0039           0066 	D0066           0067 	D0067           
1800 	D1800           1818 	D1818           181F 	D181F           
185B 	D185B           185D 	D185D           EEDA 	DEEDA           
F4C2 	DF4C2           F4C3 	DF4C3           F4CA 	DF4CA           
F4CD 	DF4CD           F4CE 	DF4CE           F4CF 	DF4CF           
F4D0 	DF4D0           F4D1 	DF4D1           F4D2 	DF4D2           
F4D3 	DF4D3           F4D4 	DF4D4           F4D5 	DF4D5           
F4D8 	DF4D8           F4DA 	DF4DA           F4DC 	DF4DC           
F4DE 	DF4DE           F4E2 	DF4E2           F4E4 	DF4E4           
F4E5 	DF4E5           F4E6 	DF4E6           F4E7 	DF4E7           
F4E8 	DF4E8           F4E9 	DF4E9           F4EA 	DF4EA           
F4EB 	DF4EB           F4F0 	DF4F0           F4F7 	DF4F7           
F4F8 	DF4F8           F4F9 	DF4F9           F4FB 	DF4FB           
F506 	DF506           F508 	DF508           F50A 	DF50A           
F50E 	DF50E           F50F 	DF50F           F510 	DF510           
F511 	DF511           F513 	DF513           F515 	DF515           
F517 	DF517           F518 	DF518           F51A 	DF51A           
F51B 	DF51B           F51C 	DF51C           F51D 	DF51D           
F51E 	DF51E           0041 	DFDC            FF80 	DFF80           
FF82 	DFF82           FF84 	DFF84           FF86 	DFF86           
FF88 	DFF88           FF8A 	DFF8A           FFD0 	DFFD0           
F91F 	DIRBF           F2DD 	DISCTX          F501 	DMA             
E6C6 	DPB0            E6D7 	DPB1            E6F3 	DPB2            
E70F 	DPB3            E72B 	DPB4            E747 	DPB5            
E763 	DPB6            F503 	DPH             E654 	DPH0            
E664 	DPH1            E674 	DPH2            E684 	DPH3            
E694 	DPH4            E6A4 	DPH5            E6B4 	DPH6            
E644 	DPHX            E646 	DPHY            F4FC 	DRIVE           
D000 	EQUCCP          E98C 	EXIT            EDA7 	HOME            
B000 	HPRDSK          0000 	L0000           0005 	L0005           
01A5 	L01A5           0221 	L0221           05CE 	L05CE           
07EE 	L07EE           07F1 	L07F1           0B32 	L0B32           
77F4 	L77F4           0045 	LATCH           F4FA 	LATPU           
E913 	LE913           E92D 	LE92D           E957 	LE957           
E95C 	LE95C           E95E 	LE95E           E962 	LE962           
E965 	LE965           E990 	LE990           E9B2 	LE9B2           
E9BF 	LE9BF           E9CA 	LE9CA           E9E7 	LE9E7           
E9E8 	LE9E8           E9FA 	LE9FA           E9FF 	LE9FF           
EA05 	LEA05           EA13 	LEA13           EA1C 	LEA1C           
EA27 	LEA27           EA2A 	LEA2A           EA3F 	LEA3F           
EA5A 	LEA5A           EA60 	LEA60           EA7C 	LEA7C           
EA85 	LEA85           EA8F 	LEA8F           EAC1 	LEAC1           
EAD1 	LEAD1           EADE 	LEADE           EAE9 	LEAE9           
EB50 	LEB50           EB59 	LEB59           EB78 	LEB78           
EB7C 	LEB7C           EB85 	LEB85           EB94 	LEB94           
EB9B 	LEB9B           EB9E 	LEB9E           EBB3 	LEBB3           
EBBE 	LEBBE           EBC2 	LEBC2           EBC8 	LEBC8           
EBDF 	LEBDF           EBE9 	LEBE9           EBF4 	LEBF4           
EC08 	LEC08           EC12 	LEC12           EC16 	LEC16           
EC22 	LEC22           EC32 	LEC32           EC33 	LEC33           
	MACRO-80 3.44	09-Dec-81	PAGE	S-1


EC5D 	LEC5D           EC6F 	LEC6F           EC74 	LEC74           
EC82 	LEC82           EC91 	LEC91           EC9E 	LEC9E           
ECAF 	LECAF           ECB7 	LECB7           ECBE 	LECBE           
ECD1 	LECD1           ECEF 	LECEF           ED02 	LED02           
ED10 	LED10           ED1C 	LED1C           ED3C 	LED3C           
ED41 	LED41           ED47 	LED47           ED4B 	LED4B           
ED50 	LED50           ED82 	LED82           EDEC 	LEDEC           
EDF1 	LEDF1           EE1D 	LEE1D           EE4A 	LEE4A           
EE65 	LEE65           EE8C 	LEE8C           EEF8 	LEEF8           
EF0B 	LEF0B           EF11 	LEF11           EF2C 	LEF2C           
EF69 	LEF69           EF6B 	LEF6B           EF74 	LEF74           
EF7D 	LEF7D           EF85 	LEF85           EF9B 	LEF9B           
EF9C 	LEF9C           EFA2 	LEFA2           EFAB 	LEFAB           
EFAD 	LEFAD           EFBF 	LEFBF           EFD9 	LEFD9           
EFE2 	LEFE2           EFED 	LEFED           EFFA 	LEFFA           
F000 	LF000           F002 	LF002           F015 	LF015           
F019 	LF019           F024 	LF024           F033 	LF033           
F03D 	LF03D           F06E 	LF06E           F075 	LF075           
F08D 	LF08D           F0AE 	LF0AE           F0C9 	LF0C9           
F0CE 	LF0CE           F0D1 	LF0D1           F0E1 	LF0E1           
F0EA 	LF0EA           F110 	LF110           F123 	LF123           
F137 	LF137           F150 	LF150           F161 	LF161           
F163 	LF163           F175 	LF175           F18D 	LF18D           
F1C1 	LF1C1           F1C3 	LF1C3           F1C8 	LF1C8           
F1CD 	LF1CD           F1D5 	LF1D5           F1E7 	LF1E7           
F1FE 	LF1FE           F207 	LF207           F227 	LF227           
F22C 	LF22C           F230 	LF230           F233 	LF233           
F236 	LF236           F247 	LF247           F24B 	LF24B           
F24F 	LF24F           F260 	LF260           F285 	LF285           
F2A7 	LF2A7           F2A9 	LF2A9           F2B4 	LF2B4           
F2BD 	LF2BD           F2C9 	LF2C9           F303 	LF303           
F307 	LF307           F318 	LF318           F31F 	LF31F           
F34B 	LF34B           F35D 	LF35D           F361 	LF361           
F366 	LF366           F376 	LF376           F386 	LF386           
F38F 	LF38F           F394 	LF394           F3AC 	LF3AC           
F3B1 	LF3B1           F3C6 	LF3C6           F3CE 	LF3CE           
F3E0 	LF3E0           F3F1 	LF3F1           F3FF 	LF3FF           
F40E 	LF40E           EA92 	LIST            ED85 	LISTST          
EF66 	LOAD            F26F 	MODE0           F275 	MODE1           
E643 	NDISK           EA1A 	OUTTXT          0000 	P00             
0001 	P01             0002 	P02             0003 	P03             
0004 	P04             0005 	P05             0006 	P06             
0011 	P11             001E 	P1E             008A 	P8A             
008B 	P8B             008C 	P8C             008D 	P8D             
008E 	P8E             008F 	P8F             00E5 	PE5             
00E6 	PE6             00E7 	PE7             00F0 	PF0             
EA93 	PUNCH           EEEF 	RDERRO          EEA4 	RDFOR1          
EE65 	RDFORM          EDC5 	READ            EE5A 	RFLERR          
F262 	RW              F269 	RW01            F271 	RW02            
F4FF 	SECTOR          EDB9 	SECTRN          ED88 	SELDSK          
EDB4 	SETDMA          EDAF 	SETSEC          EDAA 	SETTRK          
E77D 	TEXT1           EE57 	TEXTOK          F4FD 	TRACK           
EE4D 	TXTINI          0043 	WAIT            E8D5 	WBOOT           
E8F3 	WBOOT1          EEC0 	WRCCP           EED1 	WRCCP1          
EDCA 	WRITE           



No Fatal error(s)
   